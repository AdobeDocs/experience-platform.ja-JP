---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: セグメントビルダーのUIガイド
topic: ui guide
translation-type: tm+mt
source-git-commit: 91792f81a50d5752e46236d61b6ad645e3fda86c
workflow-type: tm+mt
source-wordcount: '2349'
ht-degree: 0%

---


# セグメントビルダーユーザーガイド

Adobe Experience Platform Segmentation Serviceは、リアルタイム顧客プロファイルデータからセグメント定義を作成するためのRESTful APIおよびユーザーインターフェイスを提供します。

## はじめに

セグメントの定義を使用するには、セグメント化に関連する様々なエクスペリエンスプラットフォームサービスについて理解しておく必要があります。 このユーザーガイドを読む前に、次のサービスのドキュメントを確認してください。

- [Segmentation Service](../home.md): Segmentation Serviceを使用すると、個人(顧客、見込み客、ユーザーまたは組織)に関連付けられるエクスペリエンスプラットフォームに保存されたデータを、類似した特性を共有し、マーケティング戦略と同様に対応する小さなグループに分割できます。
- [リアルタイム顧客プロファイル](../../profile/home.md): 複数のソースからの集計データに基づいて、統合されたリアルタイムの消費者プロファイルを提供します。
- [IDサービス](../../identity-service/home.md): プラットフォームに取り込まれる個別のデータソースからIDをブリッジすることで、リアルタイムの顧客プロファイルを有効にします。
- [Experience Data Model(XDM)](../../xdm/home.md): プラットフォームが顧客体験データを編成する際に使用する標準化されたフレームワーク。

また、このドキュメントを通じて使用される2つの主要用語を知り、それらの違いを理解することも重要です。
- **セグメント定義**: ターゲットオーディエンスの主な特性や動作を記述するために使用されるルールセット。
- **オーディエンス**: セグメント定義の条件を満たすプロファイルの結果セット。

## セグメント定義へのアクセス

Adobe Experience Platformでセグメント定義の操作を開始するには、左側のナビゲーションで **「セグメント** 」をクリックします。 組織のすべてのセグメント定義を表示するには、「 *参照* 」タブをクリックします。 この表示リストでは、評価方法、作成日、最終変更日など、セグメント定義に関する情報を説明します。

評価方法は、ストリーミングまたはバッチのいずれかです。 ストリーミングセグメントは、データがシステムに入るに従って常に評価されます。 バッチセグメントは、設定されたスケジュールに従って評価されます。

バッチセグメントには、最終評価日と次のバッチ評価日の両方を示す追加情報が表示されます。

右上隅の **「セグメントを** 作成」をクリックすると、セグメントビルダーワークスペースが開き、セグメント定義の作成を開始できます。

![](../images/segment-builder/segment-browse.png)

## セグメントビルダーのワークスペース

セグメントビルダーは、プロファイルデータ要素を操作できる豊富なワークスペースを提供します。 ワークスペースには、ルールを作成および編集するための直感的なコントロールが用意されています。例えば、データプロパティを表すために使用するドラッグ&amp;ドロップタイルを編集できます。

![](../images/segment-builder/segment-builder.png)

## セグメント定義構築ブロック

セグメント定義の基本構成要素は、 **属性** と **イベントです**。 また、既存の **オーディエンスに含まれる属性とイベントを、新しい定義のコンポーネントとして使用することもできます** 。

これらの構築ブロックは、[セグメントビルダ]ワークスペースの左側の[ *フィールド* ]セクションに表示されます。 *フィールド* には、主要構築ブロックのそれぞれに対するタブが含まれます。 **属性**、 **イベント**、 **オーディエンス**。

![](../images/segment-builder/segment-fields.png)

### 属性

「 **Attributes** 」タブでは、XDM Individualプロファイルクラスに属するプロファイル属性を参照できます。 各フォルダーを展開して、追加の属性を表示できます。各属性は、ワークスペースの中央にあるルールビルダーキャンバスにドラッグできるタイルです。 ル [ールビルダーキャンバスについては](#rule-builder-canvas) 、このガイドで後述します。

![](../images/segment-builder/attributes.png)

### イベント

「 **イベント** 」タブでは、XDM ExperienceEventデータ要素を使用して行われたイベントまたはアクションに基づいてオーディエンスを作成できます。 また、セグメントをより迅速に作成できるようにするためによく使用される **イベントの集まりである「イベント** 」タブにイベントタイプが表示されます。

ExperienceEvent要素を参照できるだけでなく、イベントタイプを検索することもできます。 イベントタイプはExperienceEventsと同じコーディングロジックを使用します。XDM ExperienceEventクラスで正しいイベントを探す必要はありません。 例えば、検索バーを使用して「cart」を検索すると、「AddCart」と「RemoveCart」というイベントタイプが返されます。これは、セグメント定義の作成時に非常に一般的に使用される2つの買い物かごアクションです。

検索バーに名前を入力すると、どのようなタイプのコンポーネントでも検索できます。 [Luceneの検索構文が使用されます](https://docs.microsoft.com/en-us/azure/search/query-lucene-syntax)。 単語全体が入力されると、検索結果が入力され始めます。 例えば、XDMフィールドに基づくルールを作成するに `ExperienceEvent.commerce.productViews`は、開始が検索フィールドに「product product表示」と入力します。 「product」という語を入力すると、検索結果が表示され始めます。 各結果には、その結果が属するオブジェクト階層が含まれます。

>[!NOTE] 組織で定義したカスタムスキーマフィールドが表示され、ルールの作成で使用できるようになるまでに最大24時間かかる場合があります。

その後、ExperienceEventsとイベントタイプを簡単にセグメント定義にドラッグ&amp;ドロップできます。

![](../images/segment-builder/events-eventTypes.png)

デフォルトでは、データストアから入力されたスキーマフィールドのみが表示されます。 イベントタイプも含まれます。 イベントタイプリストが表示されない場合、またはイベントタイプとして「任意」を選択できる場合は、「 *フィールド*」の横の歯車アイコンをクリックし、「 **使用可能なフィールド** 」の下の「完全なXDMスキーマ *を表示」を選択します*。 歯車アイコンを再度クリックして「 *フィールド* 」タブに戻り、データが含まれているかどうかに関係なく、複数のイベントタイプおよびスキーマフィールドを表示できるようになります。

![](../images/segment-builder/show-populated.png)

### Audiences

「 **オーディエンス** 」タブでは、Adobe Platform Managerなどの外部ソースから読み込んだすべてのオーディエンスと、Experience Platform内で作成したオーディエンスをリストできます。

「オーディエンス」タブでは、利用可能なすべてのソースをフォルダーのグループとして表示できます。 これらのフォルダをクリックすると、使用可能なサブフォルダやオーディエンスが表示されます。 また、フォルダアイコン（右端の画像）をクリックしてフォルダ構造を表示し（チェックマークは現在のフォルダを示します）、ツリー内のフォルダ名をクリックすると、簡単にフォルダ間を戻ることができます。

オーディエンスのⓘ横にマウスポインターを置くと、ID、説明、オーディエンスの階層など、オーディエンスに関する表示情報を参照し、を見つけることができます。

![](../images/segment-builder/audience-folder-structure.png)

また、 [Luceneの検索構文を使用した検索バーを使用してオーディエンスを検索することもできます](https://docs.microsoft.com/en-us/azure/search/query-lucene-syntax)。 「 *オーディエンス* 」タブで最上位フォルダを選択すると、検索バーが表示され、そのフォルダ内を検索できます。 検索結果の入力は、単語全体が入力された場合にのみ開始されます。 例えば、という名前のオーディエンスを検索するに `Online Shoppers`は、開始が検索バーに「Online」と入力します。 「オンライン」という単語を完全に入力すると、「オンライン」という単語を含む検索結果が表示されます。

## ルールビルダーキャンバス

セグメント定義とは、ターゲットオーディエンスの主な特性や動作を記述するために使用されるルールの集まりです。 これらのルールは、セグメントビルダーの中央にある *ルールビルダーキャンバスを使用して作成されます*。

セグメント定義に新しいルールを追加するには、「 *フィールド* 」タブからタイルをドラッグし、ルールビルダーキャンバスにドロップします。 次に、追加するデータのタイプに応じて、コンテキスト固有のオプションが表示されます。 次のようなデータタイプを使用できます。 文字列、日付、ExperienceEvents、イベントタイプおよびオーディエンス。

![](../images/segment-builder/rule-builder-canvas.png)

### オーディエンスの追加

オーディエンスを「 *オーディエンス* 」タブからルールビルダーキャンバスにドラッグ&amp;ドロップして、新しいセグメント定義のオーディエンスのメンバーシップを参照できます。 これにより、オーディエンスのメンバーシップを属性として新しいセグメントルールに含めたり、除外したりできます。

セグメントビルダーを使用して作成したプラットフォームオーディエンスでは、オーディエンスを、そのオーディエンスのセグメント定義で使用された一連のルールに変換するオプションが与えられます。 この変換により、ルールロジックのコピーが作成され、元のセグメント定義に影響を与えることなく変更できます。

>[!NOTE] 外部ソースからオーディエンスを追加する場合、オーディエンスのメンバーシップのみが参照されます。 このオーディエンスをルールに変換することはできないので、元のオーディエンスの作成に使用されたルールは、新しいセグメント定義で変更できません。

![](../images/segment-builder/add-audience-to-segment.png)

## コンテナ

セグメントルールは、リストに表示された順序で評価されます。 コンテナを使用すると、ネストされたクエリを使用して実行順序を制御できます。

ルールビルダーキャンバスに少なくとも1つのタイルを追加すると、コンテナの追加を開始できます。 新しいコンテナを作成するには、タイルの右上隅にある三点リーダー(...)をクリックし、「 **コンテナ**」をクリックします。

![](../images/segment-builder/add-container.png)

新しいコンテナが最初のコンテナの子として表示されますが、コンテナをドラッグ&amp;移動して階層を調整できます。 コンテナのデフォルトの動作は、提供された属性、イベント、またはオーディエンスを「含める」ことです。 タイルの左上隅にある「 **含む** 」をクリックし、「除外」を選択すると、コンテナ条件に一致する「除外」プロファイルをルールに設定できます。

子コンテナの「コンテナを解除」をクリックして、子コンテナを抽出し、親コンテナにインラインで追加することもできます。 子コンテナの右上隅にある三点リーダー(...)をクリックして、このオプションにアクセスします。

![](../images/segment-builder/include-exclude.png)

「 **コンテナを解除** 」をクリックすると、子コンテナが削除され、条件がインラインで表示されます。

>[!NOTE] コンテナのラッピングを解除する場合、ロジックが引き続き目的のセグメント定義を満たすように注意してください。

![](../images/segment-builder/unwrapped-container-inline.png)

## 結合ポリシー

エクスペリエンスプラットフォームを使用すると、複数のソースからデータを統合し、それを組み合わせて、個々の顧客の完全な表示を確認できます。 このデータを統合する場合、マージポリシーは、データの優先順位付け方法と、どのデータを組み合わせてプロファイルを作成するかを決定する際にPlatformが使用するルールです。

このオーディエンスのマーケティング目的に一致するマージポリシーを選択するか、Platformが提供するデフォルトのマージポリシーを使用できます。 独自のデフォルトの結合ポリシーの作成など、組織固有の複数の結合ポリシーを作成できます。 組織の結合ポリシーを作成する手順については、UIを使用した結合ポリシーの [操作に関するチュートリアルを参照してください](../../profile/ui/merge-policies.md)。

セグメント定義の結合ポリシーを選択するには、「 *フィールド* 」タブの歯車アイコンをクリックし、 ** 結合ポリシードロップダウンメニューを使用して、使用する結合ポリシーを選択します。

![](../images/segment-builder/merge-policy-selector.png)

## セグメントのプロパティ

セグメント定義を作成すると、ワークスペースの右側の「 *セグメントプロパティ* 」セクションに結果のセグメントのサイズの予測が表示され、オーディエンス自体を作成する前に、必要に応じてセグメント定義を調整できます。

「 *セグメントプロパティ* 」セクションでは、セグメント定義に関する重要な情報( *名前* 、 **&#x200B;説明など)を指定することもできます。 セグメント定義名は、組織で定義されたセグメントの中でセグメントを識別するために使用されます。したがって、説明的、簡潔、一意である必要があります。

セグメント定義を作成し続ける際に、 **表示プロファイルを選択して、オーディエンスのページ分割プレビューを表示できます**。

![](../images/segment-builder/segment-properties.png)

>[!NOTE] オーディエンスの見積もりは、その日のサンプルデータのサンプルサイズを使用して生成されます。 プロファイルストア内のエンティティが100万エンティティ未満の場合は、フルデータセットが使用されます。 100万から2000万のエンティティに対しては、100万のエンティティが使用されます。 2,000万以上のエンティティに対しては全体の5%が使用されます セグメント予測の生成に関する詳細は、セグメント作成チュートリアルの [予測生成セクション](../tutorials/create-a-segment.md#estimate-and-preview-an-audience) を参照してください。

## スケジュール済みセグメントの有効化

セグメント定義を作成したら、オンデマンドまたは予定（継続的）な評価を通じて、セグメント定義を評価できます。 評価とは、対応するオーディエンスを生成するために、セグメント定義を介してリアルタイム顧客プロファイルデータを移動させることを意味します。 作成したオーディエンスは保存、保存され、Experience Platform APIを使用して書き出せるようになります。

オンデマンド評価では、APIを使用して評価を実行し、必要に応じてオーディエンスを作成します。一方、予定評価（「予定セグメント化」とも呼ばれます）では、特定の時間（最大1日に1回）にセグメント定義を評価する定期的なスケジュールを作成できます。

スケジュールされた評価に対するセグメント定義の有効化は、UIまたはAPIを使用して行うことができます。 UIで、「 *セグメント」内の「* 参照 **」タブに戻り、「すべてのセグメントを** 評価 **」を切り替えます**。 これにより、組織が設定したスケジュールに基づいてすべてのセグメントが評価されます。

>[!NOTE] スケジュールされた評価は、XDM個別プロファイル用に最大5個のマージポリシーを持つサンドボックスに対して有効にできます。 1つのSandbox環境内にXDM個々のプロファイル用に5つ以上のマージポリシーがある場合、スケジュールされた評価を使用できません。

スケジュールは現在、APIを使用してのみ作成できます。 APIを使用してスケジュールを作成、編集、および操作する詳細な手順については、APIを使用したスケジュールされた評価の節を含む、セグメント結果の評価とアクセスに関するチュートリアルを参照して [ください](../tutorials/evaluate-a-segment.md#scheduled-evaluation)。

![](../images/segment-builder/scheduled-segmentation.png)

## ストリーミングセグメントを有効にする

>[!NOTE] ストリーミングセグメントはベータ版の機能で、ご要望に応じてご利用いただけます。

また、セグメント定義をストリーミングセグメントに対して有効にすることもできます。セグメント定義は、作成前と作成後で有効にできます。 ストリーミングセグメントは、イベントが特定のセグメントグループに入るとすぐに顧客を評価します。 この機能を使用すると、ほとんどのセグメントルールを、データがプラットフォームに渡される際に評価できるようになりました。つまり、セグメントのメンバーシップは、スケジュール済みのセグメントジョブを実行せずに最新の状態に維持されます。 ストリーミングのセグメント化について詳しくは、 [ストリーミングのセグメント化に関するドキュメントを参照してください](../api/streaming-segmentation.md)。

ストリーミング用のセグメント定義の有効化は、UIまたはAPIを使用して行うことができます。 UIでストリーミング用の新しい、または既存のセグメント定義を有効にするには、「ストリーミング *」オプションを「オン* 」に切り替える必要があります ****。

![](../images/segment-builder/enable-streaming-segmentation.png)

ストリーミングセグメントを有効にしたら、ベースラインを確立する必要があります（これは、セグメントが常に最新の状態になる最初の実行です）。 ベースラインは自動的に処理されますが、これはスケジュール済みのセグメント化が有効になっている場合にのみ可能です。 スケジュールされたセグメント化を有効にする方法の詳細については、このユーザーガイド [の前の節を参照してください](#enable-scheduled-segmentation)。

## ポリシー違反のスケジュール

>[!NOTE] SCHEDULEポリシー違反は、宛先に割り当てられたセグメントを作成する場合にのみ適用されます。

セグメントの作成が完了すると、そのセグメントがデータガバナンスによって分析され、セグメント内にポリシー違反がないことを確認します。 DULEとポリシー違反の詳細については、「 [データ使用ラベルの概要](../../data-governance/labels/overview.md)」を参照してください。

![](../images/segment-builder/segment-dule-policy-violations.png)

## 次の手順

セグメントビルダーは、マーケティング可能なオーディエンスをリアルタイム顧客プロファイルデータから分離できる豊富なワークフローを提供します。 このガイドを読むと、次のことができるようになります。

- 属性、イベント、および既存のオーディエンスの組み合わせを構成要素として使用して、セグメント定義を作成します。
- [ルールビルダ]キャンバスとコンテナを使用して、セグメントルールの実行順序を制御します。
- 見込みオーディエンスの表示予測。必要に応じてセグメント定義を調整できます。
- スケジュール済みセグメントのすべてのセグメント定義を有効にします。
- ストリーミングセグメントに対して、指定したセグメント定義を有効にします。

Real-time Customer Customer Apiを使用してSegmentation Serviceを使用する手順については、APIを使用したオーディエンスセグメントの [作成のチュートリアルを参照してください](../tutorials/create-a-segment.md) 。