---
solution: Experience Platform
title: ストリーミングセグメント化 UI ガイド
description: Adobe Experience Platform でのストリーミングセグメント化により、データの豊富さに重点を置きながら、ほぼリアルタイムでセグメント化を実行できます。ストリーミングセグメント化を使用すると、データが Platform に到着する際にセグメントの選定が行われるので、セグメント化ジョブをスケジュールして実行する必要がなくなります。この機能により、データが Platform に渡される際に、ほとんどのセグメントルールが評価されるようになりました。つまり、スケジュールに沿ったセグメント化ジョブを実行しなくても、セグメントメンバーシップが常に最新の状態に保たれます。
exl-id: cb9b32ce-7c0f-4477-8c49-7de0fa310b97
source-git-commit: c2f9bcd9aeb0073b8b26413ec29e2dff1ee5c80d
workflow-type: tm+mt
source-wordcount: '1537'
ht-degree: 89%

---

# ストリーミングセグメント化

>[!NOTE]
>
>次のドキュメントでは、UI を使用したストリーミングセグメント化の使用方法について説明します。 API を使用したストリーミングセグメント化の使用について詳しくは、[ストリーミングセグメント化 API ガイド](../api/streaming-segmentation.md)を参照してください。

[!DNL Adobe Experience Platform] でのストリーミングセグメント化では、データの豊富さに重点を置きながら、ほぼリアルタイムでセグメント化を実行できます。ストリーミングセグメント化を使用すると、ストリーミングデータが [!DNL Platform] に到着する際にセグメントの選定が行われるので、セグメント化ジョブをスケジュールして実行する必要がなくなります。 この機能により、データが [!DNL Platform] に渡される際に、ほとんどのセグメントルールが評価されるようになりました。つまり、スケジュールに沿ったセグメント化ジョブを実行しなくても、セグメントメンバーシップが常に最新の状態に保たれます。

>[!NOTE]
>
>ストリーミングセグメント化は、ストリーミングソースを使用して取り込まれたすべてのデータに対して機能します。 バッチベースのソースを使用して取り込まれたデータは、ストリーミングのセグメント化の対象となっている場合でも、毎晩評価されます。
>
>さらに、セグメント定義が、バッチセグメント化を使用して評価された別のセグメント定義に基づいている場合、ストリーミングセグメント化で評価されたセグメントは、理想的なメンバーシップと実際のメンバーシップの間を転々とする可能性があります。例えば、セグメント A がセグメント B に基づいており、セグメント B がバッチセグメント化を使用して評価される場合、セグメント B は 24 時間ごとにのみ更新されるので、セグメント A はセグメント B の更新と再同期するまで、実際のデータからさらに乖離します。

## ストリーミングセグメント化クエリタイプ {#query-types}

>[!NOTE]
>
>ストリーミングセグメント化を機能させるには、スケジュールされたセグメント化を組織で有効にする必要があります。 スケジュールに沿ったセグメント化を有効にする方法について詳しくは、[Audience Portal の概要 ](./audience-portal.md#scheduled-segmentation) を参照してください。

次のいずれかの条件を満たす場合、クエリはストリーミングセグメント化で自動評価されます。

| クエリタイプ | 詳細 | 例 |
| ---------- | ------- | ------- |
| 単一イベント | 時間制限のない 1 つの受信イベントを参照するセグメント定義。 | ![単一イベントの例](../images/ui/streaming-segmentation/incoming-hit.png) |
| 相対時間枠内の単一のイベント | 1 つの受信イベントを参照するセグメント定義。 | ![相対時間枠内の単一イベントの例](../images/ui/streaming-segmentation/relative-hit-success.png) |
| 時間枠を含む単一イベント | 時間枠を持つ 1 つの受信イベントを参照するセグメント定義。 | ![時間枠を持つ単一イベントの例](../images/ui/streaming-segmentation/historic-time-window.png) |
| プロファイルのみ | プロファイル属性のみを参照するセグメント定義。 | |
| 24 時間未満の相対時間枠内でのプロファイル属性を持つ単一のイベント | 1 つ以上のプロファイル属性を持つ 1 つの受信イベントを参照し、24 時間未満の相対時間枠内に発生するセグメント定義。 | ![相対時間枠内にプロファイル属性を持つ単一イベントの例](../images/ui/streaming-segmentation/profile-relative-success.png) |
| セグメントのセグメント | 1 つ以上のバッチセグメントまたはストリーミングセグメントを含むセグメント定義。 **メモ：**&#x200B;セグメントのセグメントが使用される場合、**24 時間ごとに**&#x200B;プロファイルの不適合が発生します。 | ![セグメントのセグメントの例](../images/ui/streaming-segmentation/two-batches.png) |
| プロファイル属性を持つ複数のイベント | **過去 24 時間以内に**&#x200B;複数のイベントを参照し、（オプションで）1 つ以上のプロファイル属性を持つ任意のセグメント定義。 | ![プロファイル属性を持つ複数イベントの例](../images/ui/streaming-segmentation/event-history-success.png) |

次のシナリオでは、セグメント定義はストリーミングセグメント化に対して有効に&#x200B;**なりません**。

- セグメント定義には、Adobe Audience Manager（AAM）のセグメントまたは特性が含まれます。
- セグメント定義には複数のエンティティ（複数エンティティクエリ）が含まれます。
- セグメント定義には、単一のイベントと `inSegment` イベントの組み合わせが含まれます。
   - ただし、`inSegment` イベントに含まれるセグメント定義がプロファイルのみの場合、セグメント定義はストリーミングセグメント化に対して有効に&#x200B;**なります**。
- セグメント定義では、時間制約の一部として「年を無視」を使用します。

ストリーミングセグメント化を行う場合は、次のガイドラインに従ってください。

| クエリタイプ | ガイドライン |
| ---------- | -------- |
| 単一イベントクエリ | ルックバックウィンドウに制限はありません。 |
| イベント履歴を含むクエリ | <ul><li>ルックバックウィンドウは **1 日**&#x200B;に制限されています。</li><li>イベント間に厳密な時間順序条件が存在する&#x200B;**必要があります**。</li><li>少なくとも 1 つの否定イベントを含むクエリがサポートされています。 ただし、イベント全体を否定することは&#x200B;**できません**。</li></ul> |

セグメント定義を変更して、ストリーミングセグメント化の条件を満たさなくなった場合、セグメント定義は自動的に「ストリーミング」から「バッチ」に切り替わります。

また、セグメントの選定解除は、セグメントの選定と同様に、リアルタイムで発生します。その結果、オーディエンスがセグメントの選定対象ではなくなった場合、そのオーディエンスはただちに選定解除となります。例えば、セグメント定義で「過去 3 時間で赤い靴を購入したすべてのユーザー」という要求があった場合、3 時間後に、最初にセグメント定義で選定されたすべてのプロファイルが無効になります。

## ストリーミングセグメント化セグメント定義の詳細

ストリーミングが有効なセグメントを作成すると、そのセグメントの詳細を表示できます。

![セグメント定義の詳細ページ。](../images/ui/streaming-segmentation/monitoring-streaming-segment.png)

特に、選定オーディエンスの合計数が確認できる&#x200B;**[!UICONTROL 合計選定]**&#x200B;指標が、このセグメントのバッチおよびストリーミングの評価に基づいて表示されます。

以下は、ストリーミング評価方法を使用して過去 24 時間に更新された、新しいオーディエンスの数を示す折れ線グラフです。ドロップダウンを調整して、過去 24 時間、先週または過去 30 日間を表示できます。**[!UICONTROL 更新された新しいオーディエンス]**&#x200B;指標は、ストリーミングのセグメント化によって評価されたように、選択した時間範囲でのオーディエンスサイズの変化に基づきます。この指標には、毎日のセグメントバッチ評価からの合計選定オーディエンスは含まれません。

>[!NOTE]
>
>セグメント定義は、ステータスなし状態から適合済み状態に移行した場合、または離脱済みから適合済みに移行した場合に選定されたと見なされます。セグメント定義は、適合済みから離脱済みに移行すると選定解除と見なされます。
>
>これらのステータスの詳細については、[ オーディエンスポータルの概要 ](./audience-portal.md#customize) 内のステータステーブルで確認できます。

![プロファイルの推移カードがハイライト表示され、プロファイルの時間的変化の折れ線グラフが表示されます。](../images/ui/streaming-segmentation/monitoring-streaming-segment-graph.png)

最後のセグメント評価に関する追加情報は、**[!UICONTROL 合計選定]**&#x200B;の横の情報バブルを選択して確認できます。

![「合計認定」プロファイルの情報バブルが選択されています。 これには、前回のセグメント評価時間に関する情報が表示されます。](../images/ui/streaming-segmentation/info-bubble.png)

セグメント定義について詳しくは、[セグメント定義の詳細](#segment-details)の前の節を参照してください。

## 次の手順

このユーザーガイドでは、ストリーミングが有効なセグメント定義が Adobe Experience Platform でどのように機能するか、およびストリーミングが有効なセグメントをどのように監視するかについて説明します。

Adobe Experience Platform ユーザーインターフェイスの使用について詳しくは、[セグメント化ユーザーガイド](./overview.md)を参照してください。

## 付録

次の節では、ストリーミングセグメント化に関するよくある質問を一覧表示しています。

### ストリーミングセグメント化の「選定解除」もリアルタイムで発生しますか。

ほとんどのインスタンスでは、ストリーミングセグメント化の選定解除はリアルタイムで発生します。ただし、セグメントのセグメントを使用するストリーミングセグメントでは、リアルタイムで選定解除は発生&#x200B;**せず**、24 時間後に発生します。

### ストリーミングセグメント化はどのデータで機能しますか。

ストリーミングセグメント化は、ストリーミングソースを使用して取り込まれたすべてのデータに対して機能します。 バッチベースのソースを使用して取り込まれたセグメントは、ストリーミングセグメント化の対象となっている場合でも、毎晩評価されます。タイムスタンプが 24 時間より古いシステムにストリーミングされたイベントは、後続のバッチジョブで処理されます。

### セグメントはどのようにバッチまたはストリーミングセグメント化として定義されますか。

セグメント定義は、クエリタイプとイベント履歴期間の組み合わせに基づいて、バッチ、ストリーミング、エッジのセグメント化として定義されます。ストリーミングセグメント定義として評価されるセグメントのリストは、[ストリーミングセグメント化クエリタイプの節](#query-types)で確認できます。

セグメント定義に `inSegment` 式と直接単一イベントチェーンの&#x200B;**両方**&#x200B;を含む場合、ストリーミングセグメント化の対象にはなりません。このセグメント定義をストリーミングセグメント化の対象として選定する場合は、直接単一イベントチェーンを独自のセグメントにする必要があります。

### 「セグメント定義の詳細」セクション内で、「過去 X 日間」の数がゼロのままなのに、「合計選定」セグメントの数が増加し続けるのはなぜですか。

合計選定セグメント数は、毎日のセグメント化ジョブから取得されます。このジョブには、バッチおよびストリーミングセグメントの両方に適合するオーディエンスが含まれます。この値は、バッチおよびストリーミングセグメントの両方で表示されます。

「過去 X 日間」の下にある数値は、ストリーミングセグメント化の対象となるオーディエンスの数&#x200B;**のみ**&#x200B;を表し、データをシステムにストリーミングしそのストリーミング定義に照合してカウントする場合に&#x200B;**のみ**&#x200B;増加します。この値は、ストリーミングセグメント&#x200B;**のみ**&#x200B;を対象にした表示です。そのため、この値はバッチセグメントに対しては 0 と表示されても&#x200B;**問題ありません**。

つまり、「過去 X 日間」の下にある数値がゼロで、線グラフにもゼロと表示されている場合は、そのセグメントに適格となるプロファイルをシステムにストリーミングして&#x200B;**いません**。

### セグメント定義が使用可能になるまで、どれくらいかかりますか。

セグメント定義が使用可能になるまでに最大 1 時間かかります。

### ストリーミングされるデータに制限はありますか？

ストリーミングデータをストリーミングセグメント化で使用するには、ストリーミングされるイベント間に間隔を設ける **必要があります**。 1 秒以内にストリーミングされるイベントが多すぎると、Platform はこれらのイベントをボット生成データとして扱い、破棄します。 ベストプラクティスとして、データが適切に使用されるようにするには、イベントデータの間に **少なくとも** 5 秒は必要です。
