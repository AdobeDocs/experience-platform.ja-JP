---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: プロファイルクエリ言語(PQL)の概要
topic: developer guide
translation-type: tm+mt
source-git-commit: 902ba5efbb5f18a2de826fffd023195d804309cc

---


# プロファイルクエリ言語(PQL)の概要

プロファイルクエリ言語(PQL)は、Experience Data Model(XDM)に準拠したクエリ言語で、リアルタイム顧客プロファイルデータのセグメントクエリの定義と実行をサポートするように設計されています。

このガイドでは、PQLの一般的な概要と、フォーマットのガイドラインとPQL式の例を示します。

## PQLクエリの形式

PQLクエリには次のシグネチャがあります。

```sql
({INPUT_PARAMETER_1}, {INPUT_PARAMETER_2}, ...) => {RESULT_TYPE}
```

入力パラメータは、ブール値や文字列などの単純なプリミティブ、またはオブジェクト、配列、マップなどのより複雑な型にすることができます。

PQLパラ **メータ** の本体内で入力パラメータを参照するには、次の3つの方法があります。式

### 最初のパラメーターへの暗黙の参照

次の例では、最初のパラメーターは常にコンテキスト内にあるので、プロパティ参照(`homeAddress`)を直接作成できます。

```sql
homeAddress.stateProvince = workAddress.stateProvince
```

### 最初のパラメーターへの明示的な参照

次の例では、は最初のパ `$1` ラメーターを参照しています。 その結果、は2番 `$2` 目のパラメータなどを参照します。

```sql
$1.homeAddress.stateProvince = $1.homeAddress.stateProvince
```

### 名前付き変数の使用（ラムダ表記を使用）

次の例では、は変 `Profile` 数名で、この名前はクエリの作成者が選択できます。

```sql
(Profile) => Profile.homeAddress.stateProvince = Profile.workAddress.stateProvince
```

## PQLリテラル

PQLは、次のリテラル型をサポートします。

| リテラル | 定義 | 例 |
| ------- | ---------- | ------- |
| 文字列 | 引用符で囲まれた文字で構成される重複型。 | `"pizza"`, `"jobs"`, `"antidisestablishmentarianism"` |
| Boolean | trueまたはfalseのデータ型です。 | `true`、`false` |
| 整数 | 整数を表すデータ型です。 正、負、またはゼロを指定できます。 | `-201`, `0`, `412` |
| 重複 | 任意の実数を表すデータ型です。 正、負、またはゼロを指定できます。 | `-51.24`, `3.14`, `0.6942058` |
| 日付 | 年、月、日に基づいて日付を整数のパラメーターとして作成するために使用できるデータ型です。 It is formatted as `date(year, month, day)` | `date(2020, 3, 14)` |
| 配列 | 他のリテラル値のグループとして構成されるデータ型です。 複数の値を区切る場合は、角括弧で囲んでグループ化し、カンマで区切ります。 <br> **注意：** 配列内の項目のプロパティに直接アクセスすることはできません。 したがって、配列内のプロパティにアクセスする必要がある場合、サポートされているメソッドはで `select X from array where X.item = ...`す。 <br> PQLは、プロファイルにリンクさ `xEvent` れた一連のエクスペリエンスイベントを指す語を予約します。 | `[1, 4, 7]`、`["US", "CA"]` |
| 相対時間参照 | タイムスタンプおよび時間間隔の参照の形式設定に使用できる予約語。 <ul><li>今日昨日明日</li><li>これ、最後、次</li><li>前、後、後</li><li>ミリ秒、秒、分、時間、日、週、月、年、10年、世紀/世紀、千年</li></ul> | `X.timestamp occurs before today`, `X.timestamp occurs last month`, `X.timestamp occurs <= 3 days before now` |


## PQL関数

次の表に、サポートされるPQL関数の様々なカテゴリを示します。詳細については、その他のドキュメントへのリンクも含まれています。

| カテゴリ | 定義 |
| -------- | ---------- |
| Boolean | PQL内にブール代数を実装するために使用します。 これらの関数の詳細は、「 [boolean functions」ドキュメント](./boolean-functions.md)。 |
| 比較 | 異なるPQL要素間の比較に使用します。 これらの関数の詳細については、「比較関数」 [ドキュメント](./comparison-functions.md)。 |
| アレイ、リスト、セット | 配列、配列、セットの操作に使用されるリストです。 これらの関数の詳細は、配列、リスト、およびセット [関数のドキュメント](./array-functions.md)。 |
| マップ | マップの操作に使用します。 これらの関数の詳細については、「 map関数」 [ドキュメント](./map-functions.md)。 |
| 文字列 | 文字列の操作に使用します。 これらの関数の詳細については、文字列関数の [ドキュメント](./string-functions.md)。 |
| 算術 | PQL要素に対して基本的な演算を実行するために使用します。 これらの関数の詳細については、演算関数のドキュメントを参照し [てください。](./arithmetic-functions.md) |
| 集計 | 配列の結果を単一の結果に組み合わせるために使用します。 集計関数の詳細については、集計関数のドキュメントを参照し [てください](./aggregation-functions.md)。 |
| 日時 | 日付、時間、および日時の各オブジェクトと組み合わせて使用します。 これらの関数の詳細については、日付/時間関数 [ドキュメントを参照](./datetime-functions.md)。 |
| フィルター | 配列内のデータのフィルタに使用します。 これらの関数の詳細については、「フィルタ関数」 [ドキュメント](./filter-functions.md)。 |
| 論理量指定子 | 配列内の条件をアサートするために使用します。 詳しくは、論理量指定子のドキュメント [を参照](./logical-quantifiers.md)。 |
| その他 | 上記のカテゴリに適合しない関数は、その他の関数ドキュメントに [あります](./misc-functions.md)。 |

## 次の手順

これで、プロファイルクエリ言語の使用方法を学びました。セグメントの作成と変更にPQLを使用できます。 セグメント化について詳しくは、セグメント化の概要を参照 [してください](../home.md)。