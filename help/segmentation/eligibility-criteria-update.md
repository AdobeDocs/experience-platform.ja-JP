---
title: セグメント化実施要件条件の更新
description: ストリーミングおよびエッジセグメント化を使用して評価できるオーディエンスのタイプに影響する、セグメント化実施要件の更新について説明します。
hide: true
hidefromtoc: true
exl-id: c91c0f75-9bc8-4fa7-9d27-9b07d0ea560c
source-git-commit: eafb7337edacc5d2b2aa9c38540aff946c8d39c0
workflow-type: tm+mt
source-wordcount: '582'
ht-degree: 4%

---

# セグメント化の実施要件条件の更新

>[!IMPORTANT]
>
>ストリーミングセグメント化またはエッジセグメント化を使用して現在評価されている既存のセグメント定義は、編集または更新されない限り、引き続きそのまま機能します。

2025 年 5 月 20 日（PT）以降、セグメント化の実施要件に影響する 3 つの更新が行われます。

1. 適格なルールセット
2. 期間の実施要件
3. ストリーミングオーディエンスへのバッチデータの組み込み
4. アクティブな結合ポリシー

## ルールセット {#ruleset}

次のルールセットに一致する **新規または編集** セグメント定義は、ストリーミングまたはエッジセグメント化を使用して **評価されなくなります**。 代わりに、バッチセグメント化を使用して評価されます。

- 24 時間を超える時間枠を持つ単一イベント
   - 過去 3 日間に Web ページを表示したすべてのプロファイルでオーディエンスをアクティブ化します。
- 時間枠のない単一イベント
   - Web ページを表示したすべてのプロファイルでオーディエンスをアクティブ化します。

## 時間枠 {#time-window}

ストリーミングセグメント化を使用してオーディエンスを評価するには、24 時間の時間枠内にオーディエンスを制限する **必要** があります。

## ストリーミングオーディエンスへのバッチデータの組み込み {#include-batch-data}

この更新を行う前は、バッチとストリーミングの両方のデータソースを組み合わせたストリーミングオーディエンス定義を作成していました。 ただし、最新の更新では、バッチデータソースとストリーミングデータソースの両方を使用したオーディエンスの作成は、バッチセグメント化を使用して評価されます。

更新されたルールセットに一致するストリーミングまたはエッジセグメント化を使用してセグメント定義を評価する必要がある場合は、バッチおよびストリーミングルールセットを明示的に作成し、セグメントのセグメントを使用してそれらを組み合わせる必要があります。 このバッチルールセット **必須** は、プロファイルスキーマに基づいている必要があります。

例えば、プロファイルスキーマデータを格納するオーディエンスと、エクスペリエンスイベントスキーマデータを格納する他のオーディエンスの 2 つのオーディエンスがあるとします。

| オーディエンス | スキーマ | ソースタイプ | クエリ定義 | オーディエンス ID |
| -------- | ------ | ----------- | ---------------- | ----------- |
| カリフォルニア住民 | プロファイル | バッチ | 住所はカリフォルニア州です | `e3be6d7f-1727-401f-a41e-c296b45f607a` |
| 最近のチェックアウト | エクスペリエンスイベント | ストリーミング | 過去 24 時間以内に少なくとも 1 つのチェックアウトがある | `9e1646bb-57ff-4309-ba59-17d6c5bab6a1` |

ストリーミングオーディエンスでバッチコンポーネントを使用する場合は、セグメントのセグメントを使用してバッチオーディエンスを参照する必要があります。

したがって、2 つのオーディエンスを組み合わせるルールセットの例を次に示します。

```
inSegment("e3be6d7f-1727-401f-a41e-c296b45f607a") and 
CHAIN(xEvent, timestamp, [C0: WHAT(eventType.equals("commerce.checkouts", false)) 
WHEN(<= 24 hours before now)])
```

結果のオーディエンス *は、バッチオーディエンスコンポーネントを参照することでバッチオーディエンスのメンバーシップを活用するので、ストリーミングセグメント化を使用して評価されます*。

ただし、2 つのオーディエンスをイベントデータと組み合わせる場合は、2 つのイベントのみを組み合わせる **はできません**。 両方のオーディエンスを作成し、`inSegment` を使用して両方のオーディエンスを参照する別のオーディエンスを作成します。

例えば、2 つのオーディエンスがあり、両方のオーディエンスにエクスペリエンスイベントスキーマデータが格納されているとします。

| オーディエンス | スキーマ | ソースタイプ | クエリ定義 | オーディエンス ID |
| -------- | ------ | ----------- | ---------------- | ----------- |
| 最近の中断 | エクスペリエンスイベント | バッチ | 過去 24 時間に 1 つ以上の中断イベントがある | `e3be6d7f-1727-401f-a41e-c296b45f607a` |
| 最近のチェックアウト | エクスペリエンスイベント | ストリーミング | 過去 24 時間以内に少なくとも 1 つのチェックアウトがある | `9e1646bb-57ff-4309-ba59-17d6c5bab6a1` |

この場合は、次のように 3 つ目のオーディエンスを作成する必要があります。

```
inSegment("e3be6d7f-1727-401f-a41e-c296b45f607a") and inSegment("9e1646bb-57ff-4309-ba59-17d6c5bab6a1")
```

>[!IMPORTANT]
>
>ルールセットに一致する既存のセグメント定義はすべて、編集されるまでストリーミングまたはエッジセグメント化を使用して評価されます。
>
>さらに、他のストリーミングセグメント化評価条件またはエッジセグメント化評価条件を現在満たしている既存のセグメント定義はすべて、ストリーミングセグメント化またはエッジセグメント化で引き続き評価されます。

## 結合ポリシー {#merge-policy}

ストリーミングまたはエッジセグメント化の対象となる **新規または編集** セグメント定義は **必ず**、「Edgeでアクティブ」結合ポリシー上にある必要があります。

アクティブな結合ポリシーが設定されていない場合は、[ 結合ポリシーを設定 ](../profile/merge-policies/ui-guide.md#configure) し、エッジでアクティブに設定する必要があります。
