---
title: 支援の同意
seo-title: Supporting Adobe Experience Platform Web SDK consent preference
description: Experience Platform Web SDKを使用して、同意の環境設定をサポートする方法を説明します。
seo-description: Experience Platform Web SDKを使用して、同意の環境設定をサポートする方法を説明します。
translation-type: tm+mt
source-git-commit: 0cc6e233646134be073d20e2acd1702d345ff35f

---


# （ベータ）支持同意

>[!IMPORTANT]
>
>Adobe Experience Platform Web SDKは現在ベータ版で、すべてのユーザーが利用できるわけではありません。 ドキュメントと機能は変更される場合があります。

ユーザーのプライバシーを尊重するために、SDKが特定の目的でユーザー固有のデータを使用することを許可する前に、ユーザーの同意を求めることができます。 現在、SDKで許可されているのは、すべての目的のオプトインまたはオプトアウトのみですが、今後は、特定の目的に対してより詳細な制御を行うことを希望しています。

ユーザーがすべての目的にオプトインした場合、SDKは次のタスクを実行できます。

* アドビのサーバーとの間でデータを送信します。
* CookieまたはWebストレージ項目の読み取りと書き込み（ユーザーのオプトイン設定の保持を除く）。

ユーザーがすべての目的からオプトアウトした場合、SDKはこれらのタスクを実行しません。

## 同意の設定

デフォルトでは、ユーザーはすべての目的にオプトインされます。 ユーザーがオプトインするまでSDKが上記のタスクを実行しないようにするには、SDKの設定時 `"defaultConsent": { "general": "pending" }` に次のように渡します。

```javascript
alloy("configure", {
  "configId": "ebebf826-a01f-4458-8cec-ef61de241c93",
  "imsOrgId": "ADB3LETTERSANDNUMBERS@AdobeOrg",
  "defaultConsent": { "general": "pending" }
});
```

一般的な目的のデフォルトの同意が保留に設定されている場合、ユーザーのオプトイン設定に依存するコマンド（例えば、コマンド）を実行しようとすると、そのコマンドはSDK内のキューに入れられます。 `event` これらのコマンドは、ユーザーのオプトイン設定をSDKに通知するまで処理されません。

この時点で、ユーザーにユーザーインターフェイス内のどこかでオプトインするように求めることをお勧めします。 ユーザーの環境設定を収集した後、これらの環境設定をSDKに伝えます。

## 同意の基本設定の伝達

ユーザーがオプトインした場合は、次のようにオ `setConsent` プションを設定し `general` てコマンドを実 `in` 行します。

```javascript
alloy("setConsent", {
  "general": "in"
});
```

ユーザーがオプトインしたので、SDKは以前にキューに登録されたすべてのコマンドを実行します。 ユーザーのオプトインに依存する以降のコマンドは、キ _ューに_ 格納されず、即座に実行されます。

ユーザーがオプトアウトを選択した場合は、次のように `setConsent` オプションを設 `general` 定してコマンドを `out` 実行します。

```javascript
alloy("setConsent", {
  "general": "out"
});
```

>[!NOTE]
>
>ユーザーがオプトアウトした後、SDKはユーザーの同意を設定することを許可しませ `in`ん。

ユーザーがオプトアウトを選択したので、以前にキューに登録されたコマンドから返された約束は拒否されます。 ユーザーのオプトインに依存する以降のコマンドは、同様に拒否されたプロミスを返します。 エラーの処理や抑制の詳細については、「コマンドの実行」を参照 [してください](executing-commands.md)。

>[!NOTE]
>
>現在、SDKは目的のみをサポートして `general` います。 アドビの様々な機能や製品に対応するより堅牢な目的やカテゴリのセットを構築する予定ですが、現在の実装はオプトインの完全なまたは無のアプローチです。  これは、Adobe Experience Platform Web SDKにのみ当てはまり、他のAdobe JavaScriptライブラリには当てはまりません。

## 同意の好みの持続

コマンドを使用してユーザー設定をSDKに伝え `setConsent` た後、SDKはユーザー設定をCookieに保持します。 次回ユーザーがブラウザーにWebサイトを読み込むと、SDKはこれらの永続的な環境設定を取得して使用します。 コマンドを再び実行する必要はあり `setConsent` ません。ただし、ユーザーの環境設定の変更を伝える必要があります。これは、いつでも行うことができます。