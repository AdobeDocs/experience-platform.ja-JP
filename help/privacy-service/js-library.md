---
keywords: Experience Platform;ホーム;人気のトピック
solution: Experience Platform
title: AdobeプライバシーJavaScript Library の概要
description: AdobeプライバシーJavaScript ライブラリを使用すると、Privacy Serviceで使用するデータ主体の ID を取得できます。
exl-id: 757bf69e-25bf-4ef9-9787-3e74b213908a
source-git-commit: fcd44aef026c1049ccdfe5896e6199d32b4d1114
workflow-type: tm+mt
source-wordcount: '1000'
ht-degree: 55%

---

# アドビのプライバシー JavaScript ライブラリの概要

アドビは、データプロセッサーとして、お客様の許可と指示に従って個人データを処理します。データ管理者であるお客様は、アドビに処理および保管を委任する個人データを決めます。Adobe Experience Cloud ソリューションを通じて送信する情報に応じて、Adobeでは、[!DNL General Data Protection Regulation] （GDPR）や [!DNL California Consumer Privacy Act] （CCPA）などのプライバシー規制に適用される個人情報を保存できます。 Experience Cloud ソリューションによる個人データの収集について詳しくは、[Adobe Experience Cloud のプライバシー](https://www.adobe.com/jp/privacy/experience-cloud.html)に関するドキュメントを参照してください。

**AdobeプライバシーJavaScript ライブラリを使用すると** データ管理者は、特定のドメインの [!DNL Experience Cloud] ソリューションによって生成されたすべてのデータ主体 ID を自動的に取得できます。 [Adobe Experience Platform Privacy Service](home.md) が提供する API では、これらの ID を使用して、データサブジェクトに属する個人データへのアクセスリクエストと削除リクエストを作成できます。

>[!NOTE]
>
>通常、[!DNL Privacy JS Library] はプライバシー関連のページにのみインストールする必要があり、web サイトやドメインのすべてのページにインストールする必要はありません。

## 関数

[!DNL Privacy JS Library] には、[!DNL Privacy Service] で ID を管理するためのいくつかの機能があります。 これらの関数は、ブラウザーに保存されている、特定の訪問者の ID を管理する場合にのみ使用できます。[!DNL Experience Cloud Central Service] ーザーに情報を直接送信する場合には使用できません。

次の表に、ライブラリが提供する様々な関数の概要を示します。

| 関数 | 説明 |
| --- | --- |
| `retrieveIdentities` | [!DNL Privacy Service] から取得された、一致する ID （`validIds`）の配列と、見つからなかった ID の配列（`failedIds`）を返します。 |
| `removeIdentities` | 一致する（有効な）各 ID をブラウザーから削除します。一致する ID の配列（`validIds`）を返します。各 ID には、この ID が削除されたかどうかを示す `isDeletedClientSide` ブール値が含まれます。 |
| `retrieveThenRemoveIdentities` | 一致する ID の配列（`validIds`）を取得し、ブラウザーからそれらの ID を削除します。この関数は `removeIdentities` に似ていますが、削除の前に、使用中の Adobe ソリューションでアクセス要求を実行する必要がある場合（削除リクエストに指定する固有の ID を取得する必要がある場合など）に最も適しています。 |

>[!NOTE]
>
>ID をサポートする特定のAdobeソリューションの場合は、ブラウザーから ID を `removeIdentities` および `retrieveThenRemoveIdentities` でのみ削除できます。 例えば、Adobe Audience Manager では、サードパーティの Cookie に保存されている demdex ID は削除されませんが、Adobe Target では ID を保存しているすべての cookie が削除されます。

これら 3 つの関数はすべて非同期プロセスを表すので、取得した ID はコールバックまたは promise を使用して処理する必要があります。


## インストール

[!DNL Privacy JS Library] の使用を開始するには、次のいずれかの方法を使用して、マシンにインストールする必要があります。

* `npm install @adobe/adobe-privacy` コマンドを実行して、npm を使用してインストールする。
* [Experience Cloud GitHub リポジトリからダウンロード ](https://github.com/Adobe-Marketing-Cloud/adobe-privacy)

タグ拡張機能を使用してライブラリをインストールすることもできます。 詳しくは、[Adobeプライバシータグ拡張機能 ](../tags/extensions/client/privacy/overview.md) の概要を参照してください。

## [!DNL Privacy JS Library] のインスタンス化

[!DNL Privacy JS Library] を使用するすべてのアプリは、新しい `AdobePrivacy` オブジェクトをインスタンス化する必要があります。このオブジェクトは、特定のAdobeソリューションに設定する必要があります。 例えば、Adobe Analytics でインスタンス化する場合は、次のようになります。

```js
var adobePrivacy = new AdobePrivacy({
    imsOrgID: "{ORG_ID}",
    reportSuite: "{REPORT_SUITE_ID}",
    trackingServer: "{SERVER_URL}",
    clientCode: "{TARGET_CLIENT_CODE}"
});
```

様々なアドビソリューションのためにサポートされている全パラメーターのリストについては、付録の、サポートされている[アドビソリューションの設定パラメーター](#adobe-solution-configuration-parameters)に関する節を参照してください。

## コードサンプル {#samples}

次のコードサンプルは、タグを使用しない場合に、いくつかの一般的なシナリオで [!DNL Privacy JS Library] を使用する方法を示しています。

### ID の取得

この例では、[!DNL Experience Cloud] から ID のリストを取得する方法を示しています。

#### JavaScript

次のコードは、関数 `handleRetrievedIDs` を定義します。これは、`retrieveIdentities` で取得された ID を処理するコールバックまたは promise として使用されます。

```javascript
function handleRetrievedIDs(ids) {
    const validIDs = ids.validIDs;
    const failedIDs = ids.failedIDs;
}

// If using callbacks:
adobePrivacy.retrieveIdentities(handleRetrievedIDs);

// If using promises:
adobePrivacy.retrieveIdentities().then(handleRetrievedIDs);
```

| 変数 | 説明 |
| --- | --- |
| `validIds` | 正常に取得されたすべての ID を含む JSON オブジェクト。 |
| `failedIDs` | [!DNL Privacy Service] から取得されなかったか、その他の場合は見つからなかったすべての ID を含む JSON オブジェクト。 |

#### 結果

コードが正常に実行された場合は、取得された ID のリストが `validIDs` に表示されます。

```json
{
    "company": "adobe",
    "namespace": "ECID",
    "namespaceId": 4,
    "type": "standard",
    "name": "Experience Cloud ID",
    "description": "This is the ID generated by the ID Service.",
    "value": "79352169365966186342525781172209986543"
},
{
    "company": "adobe",
    "namespace": "gsurfer_id",
    "namespaceId": 411,
    "type": "standard",
    "value": "WqmIJQAAB669Ciao"
}
```

### ID の削除

この例では、ブラウザーから ID のリストを削除する方法を示しています。

#### JavaScript

次のコードは、関数 `handleRemovedIDs` を定義します。これは、ブラウザーから削除された後に、`removeIdentities` で取得された ID を処理するコールバックまたは promise として使用されます。

```javascript
function handleRemovedIDs(ids) {
    const validIDs = ids.validIDs;
    const failedIDs = ids.failedIDs;
}

// If using callbacks:
adobePrivacy.removeIdentities(handleRemovedIDs);

// If using promises:
adobePrivacy.removeIdentities().then(handleRemovedIDs)…
```

| 変数 | 説明 |
| --- | --- |
| `validIds` | 正常に取得されたすべての ID を含む JSON オブジェクト。 |
| `failedIDs` | [!DNL Privacy Service] から取得されなかったか、その他の場合は見つからなかったすべての ID を含む JSON オブジェクト。 |

#### 結果

コードが正常に実行された場合は、取得された ID のリストが `validIDs` に表示されます。

```json
{
    "company": "adobe",
    "namespace": "ECID",
    "namespaceId": 4,
    "type": "standard",
    "name": "Experience Cloud ID",
    "description": "This is the ID generated by the ID Service.",
    "value": "79352169365966186342525781172209986543",
    "isDeletedClientSide": false
},
{
    "company": "adobe",
    "namespace": "AMO",
    "namespaceId": 411,
    "type": "standard",
    "value": "WqmIJQAAB669Ciao",
    "isDeletedClientSide": true
}
```

## 次の手順

このドキュメントでは、[!DNL Privacy JS Library] のコア機能について説明しました。 ライブラリを使用して ID のリストを取得した後、それらの ID を使用して、[!DNL Privacy Service] API へのデータアクセス要求および削除要求を作成できます。 詳しくは、[Privacy ServiceAPI ガイド ](api/overview.md) を参照してください。

## 付録

この節では、[!DNL Privacy JS Library] の使用に関する補足情報を提供します。

### アドビソリューションの設定パラメーター {#config-params}

次のリストは、サポートされているアドビソリューションで受け入れ可能な、[AdobePrivacy オブジェクトのインスタンス化](#instantiate-the-privacy-js-library)に使用される設定パラメーターを示しています。

**すべてのソリューション**

| パラメーター | 説明 |
| --- | --- |
| `key` | ユーザーまたはデータ主体を識別する一意の ID。 このプロパティは、独自の内部トラッキング目的で使用するためのものであり、Adobeでは使用されません。 |

**Adobe Analytics**

| パラメーター | 説明 |
| --- | --- |
| `cookieDomainPeriods` | Cookie のトラッキングに使用されるドメインの期間数（デフォルトは `2`、例えば `.domain.com`）。 JavaScript web ビーコンで指定しない限り、ここで定義しないでください。 |
| `dataCenter` | Adobeデータ収集データセンター。 これは、JavaScript Web ビーコンで指定されている場合にのみ、含める必要があります。設定可能な値は次のとおりです。 <ul><li>`d1`: サンノゼのデータセンター</li><li>`d2`: ダラス データセンター</li></ul> |
| `reportSuite` | JavaScript web ビーコンで指定されたレポートスイート ID （例：`s_code.js` または `dtm`）。 |
| `trackingServer` | SSL 以外のデータ収集ドメイン。 これは、JavaScript Web ビーコンで指定されている場合にのみ、含める必要があります。 |
| `trackingServerSecure` | SSL データ収集ドメイン。 これは、JavaScript Web ビーコンで指定されている場合にのみ、含める必要があります。 |
| `visitorNamespace` | 訪問者のグループ化に使用する名前空間。 これは、JavaScript Web ビーコンで指定されている場合にのみ、含める必要があります。 |

**Adobe Audience Manager**

| パラメーター | 説明 |
| --- | --- |
| `aamUUIDCookieName` | Adobe Audience Manager から返された一意のユーザー ID を含むファーストパーティ Cookie の名前。 |

**Adobe Experience Cloud ID サービス （ECID）**

| パラメーター | 説明 |
| --- | --- |
| `imsOrgID` | 組織 ID。 |

**Adobe Target**

| パラメーター | 説明 |
| --- | --- |
| `clientCode` | Adobe Target システムでクライアントを識別するクライアントコード。 |
