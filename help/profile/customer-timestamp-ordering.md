---
title: 顧客タイムスタンプの順序
description: プロファイルデータの一貫性を確保するために、データセットに顧客タイムスタンプの順序を追加する方法を説明します。
badgePrivateBeta: label="Private Beta" type="Informative"
hide: true
hidefromtoc: true
exl-id: 1cd9f0b5-6334-4815-860a-78596a9cea1a
source-git-commit: 57d42d88ec9a93744450a2a352590ab57d9e5bb7
workflow-type: tm+mt
source-wordcount: '410'
ht-degree: 0%

---

# 顧客タイムスタンプの順序

Adobe Experience Platformでは、プロファイルストアへのストリーミング取得を通じてデータを取り込む場合、デフォルトでは、データ順序が保証されるわけではありません。 顧客タイムスタンプの順序付けを使用すると、指定された顧客タイムスタンプに従った最新のメッセージがプロファイルストアに保持されます。 その後、古いメッセージはすべて削除され、セグメント化や宛先などのプロファイルデータを使用するダウンストリームサービスで使用できるようになります **使用できません**。 その結果、プロファイルデータの一貫性が保たれ、プロファイルデータとソースシステムの同期が維持されます。

お客様のタイムスタンプの順序を有効にするには、[&#x200B; 外部Source システム監査属性フィールドグループ &#x200B;](https://github.com/adobe/xdm/blob/master/docs/reference/fieldgroups/shared/external-source-system-audit-details.schema.md) 内の `extSourceSystemAudit.lastUpdatedDate` フィールドを使用し、サンドボックスとデータセット情報を担当するAdobeのテクニカルアカウントマネージャーまたはAdobeカスタマーケアにお問い合わせください。

## 制約

このプライベートベータ版では、顧客タイムスタンプの順序を使用する場合、次の制約が適用されます。

- プロファイルストアで **ストリーミング取り込み** で取り込まれた **プロファイル属性** を使用して、顧客タイムスタンプの順序のみを使用できます。
   - データレイクまたは ID サービスのデータには **順序付けの保証は提供されていま** ん。
- **非実稼動** サンドボックスでは、顧客タイムスタンプの順序のみを使用できます。
- 顧客のタイムスタンプの順序は、サンドボックスごとの **5** データセットにのみ適用できます。
- 顧客のタイムスタンプの順序が有効になっているデータセットで、ストリーミングアップサートを使用して部分行の更新を送信することは **できません**。
- `extSourceSystemAudit.lastUpdatedDate` フィールド **必須** は [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) 形式です。 ISO 8601 形式を使用する場合は、**必ず** 形式 `yyyy-MM-ddTHH:mm:ss.sssZ` の完全な日時として指定します（例：`2028-11-13T15:06:49.001Z`）。
- 取り込まれたデータのすべての行 **必須** には、`extSourceSystemAudit.lastUpdatedDate` フィールドが最上位のフィールドグループとして含まれます。 つまり、このフィールドを XDM スキーマ内にネストしない **必要があります** でください。 このフィールドがない場合や形式が正しくない場合、形式が正しくないレコードは取り込まれ **せん**、対応するエラーメッセージが送信されます。
- 顧客のタイムスタンプの順序付けが有効なデータセット **必須** は、以前に取り込んだデータのない新しいデータセットです。
- どのプロファイルフラグメントでも、より新しい `extSourceSystemAudit.lastUpdatedDate` を含んだ行のみが取り込まれます。 古い `extSourceSystemAudit.lastUpdatedDate` または同じ年齢の行は破棄されます。

## レコメンデーション

顧客のタイムスタンプの順序を実装する場合は、次の点に注意してください。

- プロファイルストアにデータを送信するすべての内部システムでクロックを同期する必要があります。
- ISO 8061 形式のタイムスタンプには、ミリ秒レベルの精度が必要です。
