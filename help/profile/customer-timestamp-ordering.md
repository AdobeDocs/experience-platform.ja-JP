---
title: 顧客タイムスタンプの順序
description: プロファイルデータの一貫性を確保するために、データセットに顧客タイムスタンプの順序を追加する方法を説明します。
badgePrivateBeta: label="プライベートベータ版" type="Informative"
hide: true
hidefromtoc: true
source-git-commit: dffbdafc3f063906c8c8fb648ace59b2f1aedab8
workflow-type: tm+mt
source-wordcount: '410'
ht-degree: 0%

---


# 顧客タイムスタンプの順序

Adobe Experience Platformでは、プロファイルストアへのストリーミング取得を通じてデータを取り込む場合、デフォルトでは、データ順序が保証されるわけではありません。 顧客タイムスタンプの順序付けを使用すると、指定された顧客タイムスタンプに従った最新のメッセージがプロファイルストアに保持されます。 その後、古いメッセージはすべて削除され、次のように処理されます **ではない** セグメント化や宛先などのプロファイルデータを使用するダウンストリームサービスで使用できます。 その結果、プロファイルデータの一貫性が保たれ、プロファイルデータとソースシステムの同期が維持されます。

顧客タイムスタンプの順序を有効にするには、を使用します `extSourceSystemAudit.lastUpdatedDate` 内のフィールド [「外部ソースシステム監査属性」フィールドグループ](https://github.com/adobe/xdm/blob/master/docs/reference/fieldgroups/shared/external-source-system-audit-details.schema.md) さらに、AdobeのテクニカルアカウントマネージャーまたはAdobeカスタマーケアに、サンドボックスとデータセットに関する情報をお問い合わせください。

## 制約

このプライベートベータ版では、顧客タイムスタンプの順序を使用する場合、次の制約が適用されます。

- で使用できるのは、顧客タイムスタンプ順序のみです **プロファイル属性** 取り込み先 **ストリーミング取り込み** プロファイルストアで。
   - 次のものがあります **なし** 順序付けは、データレイクまたは ID サービスのデータに対して提供される保証です。
- で使用できるのは、次の顧客タイムスタンプ順序のみです **実稼動以外** サンドボックス。
- 顧客のタイムスタンプの順序をに適用することのみ可能です **5** サンドボックスごとのデータセット。
- あなた **できません** ストリーミングアップサートを使用して、顧客タイムスタンプの順序が有効になっているデータセット内の部分行の更新を送信します。
- この `extSourceSystemAudit.lastUpdatedDate` フィールド **が** ～に入っている [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) 形式。 ISO 8601 形式を使用する場合、 **が** 形式では完全な日時として指定します `yyyy-MM-ddTHH:mm:ss.sssZ` （例： `2028-11-13T15:06:49.001Z`）に設定します。
- 取り込まれたデータのすべての行 **が** contain `extSourceSystemAudit.lastUpdatedDate` 最上位のフィールドグループとしてのフィールド。 このフィールドは **が** xdm スキーマ内にネストしないでください。 このフィールドがないか、形式が正しくない場合、不正なレコードは次のようになります。 **ではない** を取り込むと、対応するエラーメッセージが送信されます。
- 顧客のタイムスタンプ順序が有効になっているデータセット **が** 以前に取り込んだデータを含まない新しいデータセットにする。
- 特定のプロファイルフラグメントで、より新しい `extSourceSystemAudit.lastUpdatedDate` は取り込まれます。 を含む行 `extSourceSystemAudit.lastUpdatedDate` その年齢より古い場合や、同じ年齢の場合は破棄されます。

## レコメンデーション

顧客のタイムスタンプの順序を実装する場合は、次の点に注意してください。

- プロファイルストアにデータを送信するすべての内部システムでクロックを同期する必要があります。
- ISO 8061 形式のタイムスタンプには、ミリ秒レベルの精度が必要です。
