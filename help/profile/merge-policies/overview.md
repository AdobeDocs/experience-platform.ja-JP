---
keywords: Experience Platform、プロファイル、リアルタイム顧客プロファイル、結合ポリシー、UI、ユーザーインターフェイス、順序付きタイムスタンプ、データセットの優先順位
title: 結合ポリシーの概要
type: Documentation
description: Adobe Experience Platformでは、複数のソースからデータフラグメントを組み合わせて、個々の顧客の全体像を把握できます。 このデータを統合する場合、結合ポリシーは、データの優先順位付け方法と、統合ビューを作成するためにどのデータを組み合わせるかを決定するためにPlatformが使用するルールです。
source-git-commit: c2cc1428e3a70cf987adab583e9f9fb5d5140c74
workflow-type: tm+mt
source-wordcount: '1492'
ht-degree: 11%

---


# 結合ポリシーの概要

Adobe Experience Platformでは、複数のソースからデータフラグメントを組み合わせて、個々の顧客の全体像を把握できます。 このデータを統合する場合、結合ポリシーは、データの優先順位付け方法と、統合表示を作成するために組み合わされるデータを決定するために[!DNL Platform]が使用するルールです。

RESTful API またはユーザーインターフェイスを介すると、新しい結合ポリシーの作成、既存のポリシーの管理、組織のデフォルトの結合ポリシーの設定をおこなえます。このドキュメントでは、結合ポリシーと、ポリシーがExperience Platform内で果たす役割の概要を説明します。

## はじめに

このガイドでは、いくつかの重要な[!DNL Experience Platform]機能に関する十分な知識が必要です。 このガイドに従って結合ポリシーを使用する前に、次のサービスのドキュメントを確認してください。

* [リアルタイム顧客プロファイル](../home.md)：複数のソースから集約されたデータに基づいて、統合されたリアルタイムのコンシューマープロファイルを提供します。
* [Adobe Experience Platform Identity Service](../../identity-service/home.md):に取り込まれる様々なデータソースのIDを関連付けることで、リアルタイム顧客プロファイルを有効にしま [!DNL Platform]す。
* [エクスペリエンスデータモデル（XDM）](../../xdm/home.md)[!DNL Platform]： が顧客エクスペリエンスデータを整理する際に使用する標準化されたフレームワーク。

## 結合ポリシーについて

Adobe Experience Platformを使用すると、複数のソースからデータフラグメントを組み合わせて、個々の顧客の全体像を把握できます。 このデータを統合する場合、統合ポリシーは、データの優先順位付け方法と、統合されたビューを作成するためにどのデータを組み合わせるかを決定するために Platform で使用されるルールです。

例えば、顧客が複数のチャネルをまたがって自社のブランドとやり取りをおこなう場合、1 人の顧客に関連する複数のプロファイルフラグメントが複数のデータセットに表示されます。これらのフラグメントが Platform に取り込まれると、それらのフラグメントが結合され、その顧客用に単一のプロファイルが作成されます。

複数のソースのデータが競合する場合（例えば、1つのフラグメントで顧客が「シングル」、他のフラグメントで顧客が「既婚」と表示される場合）、結合ポリシーによって、個人のプロファイルに含める情報が決まります。

結合ポリシーはIMS組織の非公開で、必要な方法で異なるポリシーを作成してスキーマを結合できます。 明示的に指定されていない場合に使用するデフォルトの結合ポリシーを指定することもできます。 詳しくは、このドキュメントの後半の[デフォルトの結合ポリシー](#default-merge-policy)の節を参照してください。

## マージメソッド{#merge-methods}

各プロファイルフラグメントには、1人の個人に存在できるIDの合計数のうち、1つのIDの情報のみが含まれます。 そのデータを結合して顧客プロファイルを形成する場合、その情報が競合する可能性があり、優先度を指定する必要があります。

結合メソッドを選択すると、データセット間で結合の競合が発生した場合に優先順位を付けるデータセット属性を指定できます。

結合ポリシーには、2つの結合メソッドを使用できます。 これらの各方法の概要を以下に示し、以降の節で詳しく説明します。

* **[!UICONTROL データセットの優先順位]:** 競合が発生した場合は、その競合元のデータセットに基づいて、プロファイルフラグメントを優先します。このオプションを選択する場合は、関連するデータセットと優先順位を選択する必要があります。 [データセットの優先順位](#dataset-precedence)結合メソッドの詳細を説明します。
* **[!UICONTROL 順序付きタイムスタンプ]:** 競合が発生した場合、最近更新されたプロファイルフラグメントが優先されます。[順序付きタイムスタンプ](#timestamp-ordered)結合メソッドの詳細を説明します。
   * **カスタムタイムスタンプ：** タイムスタンプ順序付き結合メソッドでは、同じデータセット内（複数のID）またはデータセット間でデータを結合する際のシステムのタイムスタンプよりも優先されるカスタムタイムスタンプもサポートされます。詳しくは、[カスタムタイムスタンプの使用](#custom-timestamps)に関する節を参照してください。

### データセットの優先順位 {#dataset-precedence}

結合ポリシーの結合方法として&#x200B;**[!UICONTROL データセットの優先順位]**&#x200B;が選択されている場合、元のデータセットに基づいてプロファイルフラグメントを優先できます。 例えば、あるデータセットに情報が存在し、他のデータセットのデータよりも優先度や信頼度が高い場合などに使用できます。

**[!UICONTROL データセットの優先順位]**&#x200B;を使用して結合ポリシーを作成するには、含まれるプロファイルデータセットとExperienceEventデータセットを選択し、プロファイルデータセットの優先順位を手動で指定する必要があります。 データセットが選択され、並べ替えられると、最上位のデータセットが最も高く、2番目のデータセットが2番目に高くなるなど、

### {#timestamp-ordered}が並べ替えられたタイムスタンプ

プロファイルレコードがExperience Platformに取り込まれると、取り込み時にシステムタイムスタンプが取得され、レコードに追加されます。 結合ポリシーの結合方法として&#x200B;**[!UICONTROL Timestamp ordered]**&#x200B;が選択されている場合、プロファイルはシステムのタイムスタンプに基づいて結合されます。 つまり、結合は、レコードがPlatformに取り込まれた時点のタイムスタンプに基づいておこなわれます。

#### カスタムタイムスタンプ{#custom-timestamps}の使用

場合によっては、カスタムタイムスタンプを指定し、結合ポリシーでシステムタイムスタンプではなくカスタムタイムスタンプを適用する必要がある場合があります。 例としては、データのバックフィルや、レコードが順不同で取り込まれた場合のイベントの正しい順序の確保などがあります。

カスタムタイムスタンプを使用するには、**[!UICONTROL 外部ソースシステム監査詳細]スキーマフィールドグループ**&#x200B;をプロファイルスキーマに追加する必要があります。 追加後は、 `lastUpdatedDate`フィールドを使用してカスタムタイムスタンプを入力できます。 `lastUpdatedDate`フィールドに値が入力された状態でレコードが取り込まれると、Experience Platformはそのフィールドを使用して、データセット間でレコードを結合します。 `lastUpdatedDate`が存在しない場合や、値が設定されていない場合、Platformは引き続きシステムタイムスタンプを使用します。

>[!NOTE]
>
>同じレコードに更新を取り込む際に、`lastUpdatedDate`タイムスタンプが設定されていることを確認する必要があります。

次のスクリーンショットは、[!UICONTROL External Source System Audit Details]フィールドグループのフィールドを示しています。 スキーマにフィールドグループを追加する方法など、Platform UIを使用したスキーマの操作手順については、UI](../../xdm/tutorials/create-schema-ui.md)を使用したスキーマの作成に関するチュートリアル[を参照してください。

![](../images/merge-policies/custom-timestamp-field-group.png)

APIを使用してカスタムタイムスタンプを操作するには、[結合ポリシーのエンドポイントガイドで、カスタムタイムスタンプの使用に関する節を参照してください。](../api/merge-policies.md#custom-timestamps)

## IDステッチ{#id-stitching}

IDステッチ（[!UICONTROL IDステッチ]）は、データフラグメントを識別し、それらを組み合わせて完全なプロファイルレコードを形成するプロセスです。 様々なステッチ動作を説明するために、2つの異なるEメールアドレスを使用してブランドとやり取りする1人の顧客を考えてみましょう。

* **[!UICONTROL なし]:** このオプションを選択すると、IDは結び付けられません。セグメント化が発生すると、同じ人物に属するIDは結び付けられず、セグメント化では、顧客がセグメントメンバーシップに適合するかどうかを判断する際にのみ、各個々のIDに添付された属性を考慮します。 その結果、1人の顧客が複数のプロファイルを持ち、各プロファイルが異なるセグメントに適合し、その結果、複数のマーケティングメッセージが同じ顧客に送信される可能性があります。
* **[!UICONTROL プライベートグラフ]:** プライベートグラフを選択すると、同じ個人に関連する複数のIDが結び付けられます。これにより、顧客は単一のプロファイルを持ち、セグメント化では、セグメント認定を決定する際に、複数の関連IDからの複数の属性を考慮できます。 このシナリオでは、顧客は単一のプロファイルを持ち、ID間の属性の組み合わせに基づいて1つのセグメントに適合し、1つのマーケティングメッセージのみを受け取ることになります。

IDと、プロファイルおよびセグメント生成でのIDの役割について詳しくは、まず「[IDサービスの概要](../../identity-service/home.md)」を参照してください。

## 既定の結合ポリシー{#default-merge-policy}

組織は、プロファイルフラグメントの結合時に使用するデフォルトの結合ポリシーを作成できます。 これにより、ユーザーは、顧客プロファイルの表示やセグメントの作成などのExperience Platformでアクションを実行する際に、デフォルトポリシーを簡単に選択できます。 ほとんどの場合、別の結合ポリシーを指定しない限り、デフォルトの結合ポリシーが使用されます。

各組織は、1つのXDMスキーマクラスに関連する複数の結合ポリシーを作成できますが、各クラスに対して宣言できるデフォルトの結合ポリシーは1つだけです。 例えば、[!DNL XDM Individual Profile]クラスに関連するデフォルトの結合ポリシーと、カスタムビルドの製品在庫クラスに別のデフォルトの結合ポリシーを持つことができます。

新しい結合ポリシーを作成してデフォルトとして設定すると、以前のデフォルトの結合ポリシーは自動的に更新され、デフォルトの結合ポリシーは無効になります。

>[!WARNING]
>
>プロファイルの数と、既存のデフォルト結合ポリシーが関連付けられているセグメントが影響を受ける場合があります。 デフォルトの結合ポリシーが適用されているセグメントは、すべて新しいデフォルトの結合ポリシーに更新されます。

## 次の手順

このガイドを読むと、結合ポリシーの概要と、ポリシーがExperience Platform内で果たす役割がわかります。 Experience PlatformUIで結合ポリシーの使用を開始するには、『[結合ポリシーUIガイド](ui-guide.md)』を参照してください。 APIを使用して結合ポリシーを操作するには、『[結合ポリシーAPIエンドポイントガイド](../api/merge-policies.md)』を参照してください。