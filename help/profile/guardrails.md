---
keywords: Experience Platform、プロファイル、リアルタイム顧客プロファイル、トラブルシューティング、ガードレール、ガイドライン、制限、エンティティ、プライマリエンティティ、ディメンションエンティティ、ディメンションエンティティ
title: リアルタイム顧客プロファイルデータのガードレール
solution: Experience Platform
product: experience platform
type: Documentation
description: Adobe Experience Platformには、リアルタイム顧客プロファイルでサポートできないデータモデルの作成を回避するための一連のガードレールが用意されています。 このドキュメントでは、プロファイルデータをモデリングする際に留意すべきベストプラクティスと制約について説明します。
exl-id: 33ff0db2-6a75-4097-a9c6-c8b7a9d8b78c
source-git-commit: 441c2978b90a4703874787b3ed8b94c4a7779aa8
workflow-type: tm+mt
source-wordcount: '1666'
ht-degree: 6%

---

# [!DNL Real-time Customer Profile]データのガードレール

[!DNL Real-time Customer Profile] は、行動インサイトと顧客属性に基づいてパーソナライズされたクロスチャネルエクスペリエンスを提供するための個々のプロファイルを提供します。このターゲティングを達成するために、[!DNL Profile]およびAdobe Experience Platform内のセグメント化エンジンは、非正規化されたハイブリッドデータモデルを使用し、顧客プロファイルの開発に新しいアプローチを提供します。 このハイブリッドデータモデルを使用すると、収集されるデータが正しくモデル化されることが重要です。 プロファイルデータを保持する[!DNL Profile]データストアはリレーショナルストアではありませんが、[!DNL Profile]では、シンプルで直感的な方法でセグメントを作成するために、小さなディメンションエンティティとの統合を許可します。 この統合は、マルチエンティティセグメント化と呼ばれます。

Adobe Experience Platformには、[!DNL Real-time Customer Profile]でサポートできないデータモデルを作成するのを防ぐための一連のガードレールが用意されています。 このドキュメントでは、プロファイルデータをセグメント化に使用する際の、これらのガードレールとベストプラクティスと制約について説明します。

>[!NOTE]
>
>このドキュメントで概要を説明しているガードレールと制限は、常に改善されています。 定期的に更新を確認してください。

## 概要

[!DNL Real-time Customer Profile]で使用するデータモデルを構築する前に、次のExperience Platformサービスに関するドキュメントをお読みになることをお勧めします。 データモデルとこのドキュメントで概要を説明するガードレールを使用するには、[!DNL Real-time Customer Profile]エンティティの管理に関連する様々なExperience Platformサービスについて理解しておく必要があります。

* [[!DNL Real-time Customer Profile]](home.md)：複数のソースからの集計データに基づいて、統合されたリアルタイムの顧客プロファイルを提供します。
* [Adobe Experience Platform Identity Service](../identity-service/home.md):に取り込まれる際に異なるデータソースのIDを関連付けることで、「顧客の単一ビュー」の作成をサポートしま [!DNL Platform]す。
* [[!DNL Experience Data Model (XDM)]](../xdm/home.md):Platformが顧客体験データを整理する際に使用する標準化されたフレームワーク。
   * [スキーマ構成の基本](../xdm/schema/composition.md):スキーマとデータモデリングのExperience Platformの紹介。
* [Adobe Experience Platform セグメント化サービス](../segmentation/home.md)：[!DNL Platform] 内のセグメントエンジンは、顧客の行動と属性に基づいて、顧客プロファイルからオーディエンスセグメントを作成するのに使用されます。
   * [マルチエンティティセグメント化](../segmentation/multi-entity-segmentation.md):ディメンションエンティティとプロファイルデータを統合するセグメントの作成に関するガイドです。

## エンティティタイプ

[!DNL Profile]ストアデータモデルは、次の2つのコアエンティティタイプで構成されます。

* **プライマリエンティティ：** プライマリエンティティ（プロファイルエンティティ）は、データを結合して個人の「真の単一ソース」を形成します。この統合データは、「和集合ビュー」と呼ばれるものを使用して表されます。和集合表示は、同じクラスを実装するすべてのスキーマのフィールドを1つの和集合スキーマに集計します。 [!DNL Real-time Customer Profile]の和集合スキーマは、すべてのプロファイル属性と行動イベントのコンテナとして機能する、非正規化ハイブリッドデータモデルです。

   時間に依存しない属性（「レコードデータ」とも呼ばれます）は[!DNL XDM Individual Profile]を使用してモデル化され、時系列データ（「イベントデータ」とも呼ばれます）は[!DNL XDM ExperienceEvent]を使用してモデル化されます。 レコードと時系列データがAdobe Experience Platformで取り込まれると、[!DNL Real-time Customer Profile]がトリガーして、使用可能になっているデータの取り込みを開始します。 取り込まれるインタラクションや詳細が多いほど、個人プロファイルは強力になります。

   ![](images/guardrails/profile-entity.png)

* **Dimensionエンティティ：** 店舗、製品、プロパティなど、個人以外のものを記述するXDMクラスを組織で定義することもできます。これらの非[!DNL XDM Individual Profile]スキーマは「ディメンションエンティティ」と呼ばれ、時系列データを含みません。 Dimensionエンティティは、複数エンティティのセグメント定義を支援および簡素化するルックアップデータを提供します。セグメント化エンジンが、最適な処理（高速ポイントルックアップ）のためにデータセット全体をメモリに読み込めるだけの小さささである必要があります。

   ![](images/guardrails/profile-and-dimension-entities.png)

## プロファイルフラグメント

このドキュメントでは、「プロファイルフラグメント」を参照するガードレールが複数あります。 リアルタイム顧客プロファイルは、複数のプロファイルフラグメントで構成されます。 各フラグメントは、プライマリIDであるデータセットのIDのデータを表します。 つまり、フラグメントには、XDM ExperienceEventデータセットにプライマリIDとイベントデータ（時系列）が含まれる場合や、プライマリIDとXDM個別プロファイルデータセットのレコードデータ（時間に依存しない属性）で構成される場合があります。

## 制限タイプ

データモデルを定義する場合は、適切なパフォーマンスを確保し、システムエラーを回避するために、提供されたガードレール内に留まることをお勧めします。

このドキュメントで提供されるガードレールには、次の2つの制限タイプが含まれます。

* **ソフトリミット：** ソフトリミットは、最適なシステムパフォーマンスを得るために推奨される最大値を提供します。システムを壊したりエラーメッセージを受け取ったりせずにソフトリミットを超えることは可能ですが、ソフトリミットを超えるとパフォーマンスが低下します。 全体的なパフォーマンスの低下を避けるために、ソフトリミット内に収めることをお勧めします。

* **ハードリミット：** ハードリミットは、システムの絶対最大値を提供します。ハードリミットを超えると、故障やエラーが発生し、システムが期待どおりに機能しなくなります。

## データモデルガードレール

[!DNL Real-time Customer Profile]で使用するデータモデルを作成する際は、次のガードレールに従うことをお勧めします。

### プライマリエンティティガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| [!DNL Profile]和集合スキーマへの投稿を推奨するデータセットの数 | 20 | ソフト | **最大20個の有効なデ [!DNL Profile]ータセットを使用することをお勧めします。** 別のデータセットをに対して有効にす [!DNL Profile]るには、まず既存のデータセットを削除または無効にする必要があります。 |
| 推奨される複数エンティティの関係の数 | 5 | ソフト | **プライマリエンティティとディメンションエンティティの間に定義できる複数エンティティの関係は、最大で5つにすることをお勧めします。** 既存の関係が削除または無効になるまで、追加の関係マッピングは行われません。 |
| 複数エンティティの関係で使用されるIDフィールドの最大JSON深さ | 4 | ソフト | **複数エンティティの関係で使用するIDフィールドのJSONの深さの上限は4です。** つまり、ネストの厳密なスキーマでは、4レベルを超える深さでネストされたフィールドを、関係のIDフィールドとして使用しないでください。 |
| プロファイルフラグメント内の配列基数 | &lt;=500 | ソフト | **プロファイルフラグメント内の最適な配列基数（時間に依存しないデータ）は、次のとおりです。  &lt;>** |
| ExperienceEventの配列基数 | &lt;=10 | ソフト | **ExperienceEvent（時系列データ）の最適な配列基数は次のとおりです。  &lt;>** |

### Dimensionエンティティガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| 非[!DNL XDM Individual Profile]エンティティに対して時系列データは許可されていません | 0 | ハード | **時系列データは、プロファイルサービスの非エンティティに[!DNL XDM Individual Profile] 対しては使用できません。** 時系列データセットが非IDに関連付けられている場合、[!DNL XDM Individual Profile] に対してデータセットを有効にしないでくだ [!DNL Profile]さい。 |
| ネストされた関係なし | 0 | ソフト | **2つの非スキーマ間に関係を作成しないでく[!DNL XDM Individual Profile] ださい。** 和集合スキーマに含まれないスキーマに対しては、関係を作成する機能はお勧め [!DNL Profile] しません。 |
| プライマリIDフィールドの最大JSON深度 | 4 | ソフト | **プライマリIDフィールドに推奨されるJSONの深さは4です。** つまり、ネストの厳密なスキーマでは、4レベルを超える深さにネストされているフィールドをプライマリIDとして選択しないでください。ネストされた4番目のレベルにあるフィールドをプライマリIDとして使用できます。 |

## データサイズガードレール

次のガードレールは、データサイズを参照し、データを意図したとおりに取り込み、保存およびクエリできるようにすることをお勧めします。

>[!NOTE]
>
>データサイズは、取り込み時にJSONで非圧縮データとして測定されます。

### プライマリエンティティガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| ExperienceEventの最大サイズ | 10 KB | ハード | **イベントの最大サイズは10 KBです。** 取り込みは続行されますが、10 KBを超えるイベントは削除されます。 |
| プロファイルレコードの最大サイズ | 100 KB | ハード | **プロファイルレコードの最大サイズは100 KBです。** 取り込みは続行されますが、100 KBを超えるプロファイルレコードは削除されます。 |
| プロファイルフラグメントの最大サイズ | 50 MB | ハード | **プロファイルフラグメントの最大サイズは50 MBです。** 50 MBを超えるプロファイルフラグメントで、セグメント化、エク [スポ](#profile-fragments) ート、検索が失敗する場合があります。 |
| 最大プロファイルストレージサイズ | 50 MB | ソフト | **保存されるプロファイルの最大サイズは50 MBです。** 50 MBを超えるプ [ロファ](#profile-fragments) イルに新しいプロファイルフラグメントを追加すると、システムのパフォーマンスに影響します。 |
| 1日に取り込まれたプロファイルまたはExperienceEventバッチの数 | 90 | ソフト | **1日に取り込まれるプロファイルバッチまたはExperienceEventバッチの最大数は90です。** つまり、1日に取り込まれるプロファイルバッチとExperienceEventバッチの合計数の合計が90を超えることはできません。追加のバッチを取り込むと、システムのパフォーマンスに影響します。 |

### Dimensionエンティティガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| すべてのディメンションエンティティの最大合計サイズ | 5 GB | ソフト | **すべてのディメンションエンティティに対して推奨される合計サイズの上限は5 GBです。** 大きなディメンションエンティティを取り込むと、システムのパフォーマンスが低下します。例えば、10 GBの製品カタログをディメンションエンティティとして読み込むことはお勧めしません。 |
| ディメンションエンティティスキーマごとのデータセット | 5 | ソフト | **各ディメンションエンティティスキーマに関連付けるデータセットは、最大で5つにすることをお勧めします。** 例えば、「products」のスキーマを作成し、5つの貢献データセットを追加する場合、productsスキーマに結び付ける6番目のデータセットを作成しないでください。 |
| 1日に取り込まれた分析コードエンティティバッチの数 | エンティティあたり4 | ソフト | **1日に取り込まれるディメンションエンティティバッチの最大数は、エンティティごとに4です。** 例えば、製品カタログの更新を1日に最大4回取り込むことができます。同じエンティティに対して追加のディメンションエンティティバッチを取り込むと、システムのパフォーマンスに影響します。 |

## セグメント化ガードレール

この節で説明するガードレールは、Experience Platform内で組織が作成できるセグメントの数と特性、および宛先へのセグメントのマッピングとアクティブ化を参照してください。

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| サンドボックスごとのセグメントの最大数 | 1万 | ソフト | **組織が作成できるセグメントの最大数は、サンドボックスあたり10,000個です。** 個々のサンドボックスに10,000個未満のセグメントがある限り、1つの組織は合計で10,000個を超えるセグメントを持つことができます。追加のセグメントを作成しようとすると、システムのパフォーマンスが低下します。 |
| サンドボックスあたりのストリーミングセグメントの最大数 | 500 | ソフト | **組織が作成できるストリーミングセグメントの最大数は、サンドボックスあたり500です。** 個々のサンドボックスに500個未満のストリーミングセグメントがある限り、1つの組織は合計で500個を超えるストリーミングセグメントを持つことができます。追加のストリーミングセグメントを作成しようとすると、システムのパフォーマンスが低下します。 |
| サンドボックスごとのバッチセグメントの最大数 | 1万 | ソフト | **組織が作成できるバッチセグメントの最大数は、サンドボックスあたり10,000個です。** 個々のサンドボックスに10,000個未満のバッチセグメントがある限り、組織は合計で10,000個を超えるバッチセグメントを持つことができます。追加のバッチセグメントを作成しようとすると、システムのパフォーマンスが低下します。 |
