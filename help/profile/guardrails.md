---
keywords: Experience Platform、プロファイル、リアルタイム顧客プロファイル、トラブルシューティング、ガードレール、ガイドライン、制限、エンティティ、プライマリエンティティ、ディメンションエンティティ、
title: リアルタイム顧客プロファイルデータのガードレール
solution: Experience Platform
product: experience platform
type: Documentation
description: Adobe Experience Platformには、リアルタイム顧客プロファイルでサポートできないデータモデルの作成を回避するのに役立つ、一連のガードレールが用意されています。 このドキュメントでは、プロファイルデータをモデリングする際に念頭に置くべきベストプラクティスと制約について説明します。
exl-id: 33ff0db2-6a75-4097-a9c6-c8b7a9d8b78c
source-git-commit: c351ee91367082cc5fbfc89da50aa2db5e415ea8
workflow-type: tm+mt
source-wordcount: '1962'
ht-degree: 5%

---

# [!DNL Real-time Customer Profile] データのガードレール

[!DNL Real-time Customer Profile] は、行動インサイトと顧客属性に基づいてパーソナライズされたクロスチャネルエクスペリエンスを提供する個々のプロファイルを提供します。このターゲティングを達成するために、[!DNL Profile] およびAdobe Experience Platform内のセグメント化エンジンは、非正規化されたハイブリッドデータモデルを使用し、顧客プロファイルの開発に新しいアプローチを提供します。 このハイブリッドデータモデルを使用すると、収集されるデータが正しくモデル化されることが重要です。 プロファイルデータを保持する [!DNL Profile] データストアはリレーショナルストアではありませんが、[!DNL Profile] では、シンプルで直感的な方法でセグメントを作成するために、小さなディメンションエンティティとの統合を許可します。 この統合は、マルチエンティティセグメント化と呼ばれます。

Adobe Experience Platformには、[!DNL Real-time Customer Profile] でサポートできないデータモデルを作成するのを防ぐための一連のガードレールが用意されています。 このドキュメントでは、セグメント化にプロファイルデータを使用する際の、これらのガードレールとベストプラクティスと制約について説明します。

>[!NOTE]
>
>このドキュメントで概要を説明したガードレールと制限は、常に改善されています。 定期的に更新を確認してください。

## はじめに

[!DNL Real-time Customer Profile] で使用するデータモデルを構築する前に、次のExperience Platformサービスのドキュメントを読むことをお勧めします。 データモデルとこのドキュメントで概要を説明するガードレールを使用するには、[!DNL Real-time Customer Profile] エンティティの管理に関連する様々なExperience Platformサービスについて理解しておく必要があります。

* [[!DNL Real-time Customer Profile]](home.md)：複数のソースからの集計データに基づいて、統合されたリアルタイムの顧客プロファイルを提供します。
* [Adobe Experience Platform Identity Service](../identity-service/home.md):に取り込まれる際に異なるデータソースの ID を関連付けることで、「顧客の単一ビュー」の作成をサポートしま [!DNL Platform]す。
* [[!DNL Experience Data Model (XDM)]](../xdm/home.md):Platform が顧客体験データを整理する際に使用する標準化されたフレームワーク。
   * [スキーマ構成の基本](../xdm/schema/composition.md):スキーマとデータモデリングの概要をExperience Platformに示します。
* [Adobe Experience Platform セグメント化サービス](../segmentation/home.md)：[!DNL Platform] 内のセグメントエンジンは、顧客の行動と属性に基づいて、顧客プロファイルからオーディエンスセグメントを作成するのに使用されます。
   * [マルチエンティティのセグメント化](../segmentation/multi-entity-segmentation.md):ディメンションエンティティとプロファイルデータを統合するセグメントの作成に関するガイドです。

## エンティティタイプ

[!DNL Profile] ストアデータモデルは、次の 2 つのコアエンティティタイプで構成されます。

* **プライマリエンティティ：** プライマリエンティティ（プロファイルエンティティ）は、データを結合して、個人の「真実の単一ソース」を形成します。この統合データは、「和集合ビュー」と呼ばれるものを使用して表されます。和集合表示は、同じクラスを実装するすべてのスキーマのフィールドを 1 つの和集合スキーマに集計します。 [!DNL Real-time Customer Profile] の和集合スキーマは、すべてのプロファイル属性と行動イベントのコンテナとして機能する、非正規化されたハイブリッドデータモデルです。

   時間に依存しない属性（「レコードデータ」とも呼ばれる）は [!DNL XDM Individual Profile] を使用してモデル化され、時系列データ（「イベントデータ」とも呼ばれる）は [!DNL XDM ExperienceEvent] を使用してモデル化されます。 レコードと時系列データがAdobe Experience Platformで取り込まれると、[!DNL Real-time Customer Profile] がトリガーして、使用可能なデータの取り込みを開始します。 取り込まれるインタラクションや詳細が多いほど、個人プロファイルは強力になります。

   ![](images/guardrails/profile-entity.png)

* **Dimensionエンティティ：** 組織では、店舗、製品、プロパティなど、個人以外のものを記述する XDM クラスを定義することもできます。これらの非 [!DNL XDM Individual Profile] スキーマは「ディメンションエンティティ」と呼ばれ、時系列データは含まれません。 Dimensionエンティティは、複数エンティティのセグメント定義を支援および簡素化するルックアップデータを提供します。セグメント化エンジンが、最適な処理（高速ポイントルックアップ）のためにデータセット全体をメモリに読み込めるだけの小ささである必要があります。

   ![](images/guardrails/profile-and-dimension-entities.png)

## 制限タイプ

データモデルを定義する場合は、適切なパフォーマンスを確保し、システムエラーを回避するために、提供されたガードレール内にとどまることをお勧めします。

このドキュメントで提供されるガードレールには、次の 2 つの制限タイプが含まれます。

* **ソフトリミット：** ソフトリミットは、最適なシステムパフォーマンスを得るために推奨される最大値を提供します。システムを壊したりエラーメッセージを受け取ったりせずにソフトリミットを超えることは可能ですが、ソフトリミットを超えるとパフォーマンスが低下します。 全体的なパフォーマンスの低下を避けるため、ソフトリミット内に収めることをお勧めします。

* **ハードリミット：** ハードリミットは、システムの絶対最大値を提供します。ハードリミットを超えると、故障やエラーが発生し、システムが期待どおりに機能しなくなります。

## プロファイルフラグメント

このドキュメントでは、「プロファイルフラグメント」を参照するガードレールがいくつかあります。 Experience Platformでは、複数のプロファイルフラグメントが結合されて、リアルタイム顧客プロファイルが形成されます。 各フラグメントは、一意のプライマリ ID と、特定のデータセット内のその ID に対応するレコードまたはイベントデータを表します。 プロファイルフラグメントについて詳しくは、「[ プロファイルの概要 ](home.md#profile-fragments-vs-merged-profiles)」を参照してください。

## データモデルガードレール

[!DNL Real-time Customer Profile] で使用するデータモデルを作成する際は、次のガードレールに従うことをお勧めします。

### プライマリエンティティのガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| プロファイル対応データセットの数 | 20 | ソフト | **最大 20 個のデータセットが和集合スキーマに貢 [!DNL Profile] 献します。** 別のデータセットを有効にす [!DNL Profile]るには、まず既存のデータセットを削除または無効にする必要があります。データセットの上限は 20 個で、他のAdobeソリューション (Adobe Analyticsなど ) のデータセットが含まれます。 |
| プロファイルに対して有効になっているAdobe Analyticsレポートスイートデータセットの数 | 1 | ソフト | **プロファイルに対して有効にする Analytics レポートスイートデータセットは最大 1 つです。** プロファイルに対して複数の Analytics レポートスイートデータセットを有効にしようとすると、データの品質に意図しない結果が生じる可能性があります。詳しくは、このドキュメントの付録の「[Adobe Analyticsデータセット ](#aa-datasets)」の節を参照してください。 |
| 推奨される複数エンティティの関係の数 | 5 | ソフト | **プライマリエンティティとディメンションエンティティの間に定義できる複数エンティティの関係は、最大で 5 つまでにすることをお勧めします。** 既存の関係が削除または無効になるまで、追加の関係マッピングは行われません。 |
| 複数エンティティの関係で使用される ID フィールドの最大 JSON 深さ | 4 | ソフト | **複数エンティティの関係で使用する ID フィールドの JSON の深さの最大値は 4 です。** つまり、高度にネストされたスキーマでは、4 レベルを超える深さでネストされたフィールドは、関係の ID フィールドとして使用しないでください。 |
| プロファイルフラグメントの配列基数 | &lt;=500 | ソフト | **プロファイルフラグメント内の最適な配列の基数（時間に依存しないデータ）は、  &lt;>** |
| ExperienceEvent の配列基数 | &lt;=10 | ソフト | **ExperienceEvent（時系列データ）の最適な配列基数は、  &lt;>** |
| 個々のプロファイル ID グラフの ID 数の制限 | 50 | ハード | **個々のプロファイルの ID グラフの ID の最大数は 50 です。** ID が 50 を超えるプロファイルは、セグメント化、書き出し、検索から除外されます。 |

### Dimensionエンティティのガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| 非 [!DNL XDM Individual Profile] エンティティに対して時系列データは許可されていません | 0 | ハード | **時系列データは、プロファイルサービスの非エンティ[!DNL XDM Individual Profile] ティに対しては使用できません。** 時系列データセットが非 ID に関連付けられている場合、[!DNL XDM Individual Profile] に対してデータセットを有効にしないでくだ [!DNL Profile]さい。 |
| 入れ子になった関係はない | 0 | ソフト | **2 つの非スキーマ間に関係を作成しないでく[!DNL XDM Individual Profile] ださい。** 和集合スキーマに含まれていないスキーマに対しては、関係を作成する機能はお勧め [!DNL Profile] しません。 |
| プライマリ ID フィールドの最大 JSON 深さ | 4 | ソフト | **プライマリ ID フィールドに推奨される JSON の深さは 4 です。** つまり、高度にネストされたスキーマでは、フィールドが 4 レベルを超える深さにネストされている場合、そのフィールドをプライマリ ID として選択しないでください。ネストされた第 4 レベルのフィールドは、プライマリ ID として使用できます。 |

## データサイズガードレール

次のガードレールは、データサイズを参照し、データを意図したとおりに取り込み、保存およびクエリできることを確認することをお勧めします。

>[!NOTE]
>
>データサイズは、取り込み時に JSON で非圧縮データとして測定されます。

### プライマリエンティティのガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| ExperienceEvent の最大サイズ | 10 KB | ハード | **イベントの最大サイズは 10 KB です。** 取り込みは続行されますが、10 KB を超えるイベントはすべて削除されます。 |
| 最大プロファイルレコードサイズ | 100 KB | ハード | **プロファイルレコードの最大サイズは 100 KB です。** 取り込みは続行されますが、100 KB を超えるプロファイルレコードは削除されます。 |
| プロファイルフラグメントの最大サイズ | 50 MB | ハード | **1 つのプロファイルフラグメントの最大サイズは 50 MB です。** 50 MB を超えるすべてのプロファイルフラグメントで、セグメント化、エク [スポ](#profile-fragments) ート、検索が失敗する場合があります。 |
| 最大プロファイルストレージサイズ | 50 MB | ソフト | **保存されるプロファイルの最大サイズは 50 MB です。** 50 MB を超えるプ [ロファ](#profile-fragments) イルに新しいプロファイルフラグメントを追加すると、システムのパフォーマンスに影響します。例えば、プロファイルに 50 MB の単一のフラグメントを含めたり、複数のデータセットにまたがって複数のフラグメントを含めたり、合計サイズが 50 MB の合計フラグメントを含めたりできます。 50 MB を超える単一のフラグメントを持つプロファイル、または合計サイズが 50 MB を超える複数のフラグメントを格納しようとすると、システムのパフォーマンスに影響します。 |
| 1 日に取り込まれたプロファイルまたは ExperienceEvent バッチの数 | 90 | ソフト | **1 日に取り込まれるプロファイルまたは ExperienceEvent バッチの最大数は 90 です。** つまり、1 日に取り込まれるプロファイルバッチと ExperienceEvent バッチの合計数の合計は 90 を超えることはできません。追加のバッチを取り込むと、システムのパフォーマンスに影響します。 |

### Dimensionエンティティのガードレール

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| すべてのディメンションエンティティの最大合計サイズ | 5 GB | ソフト | **すべてのディメンションエンティティに対して推奨される合計サイズの最大値は 5 GB です。** 大きなディメンションエンティティを取り込むと、システムのパフォーマンスが低下します。例えば、10 GB の製品カタログをディメンションエンティティとして読み込むことはお勧めしません。 |
| ディメンションエンティティスキーマごとのデータセット | 5 | ソフト | **各ディメンションエンティティスキーマに関連付けるデータセットは、最大で 5 つにすることをお勧めします。** 例えば、「products」のスキーマを作成し、5 つの貢献データセットを追加する場合、products スキーマに結び付けた 6 番目のデータセットを作成しないでください。 |
| 1 日に取り込まれた分析コードエンティティバッチの数 | エンティティあたり 4 | ソフト | **1 日に取り込まれる分析コードエンティティバッチの最大数は、エンティティあたり 4 です。** 例えば、製品カタログの更新を 1 日に最大 4 回取り込むことができます。同じエンティティに対して追加のディメンションエンティティバッチを取り込むと、システムのパフォーマンスに影響します。 |

## セグメント化ガードレール

この節で概要を説明するガードレールは、Experience Platform内で作成できるセグメントの数と特性、および宛先へのセグメントのマッピングとアクティブ化を参照してください。

| Guardrail | 制限 | 制限タイプ | 説明 |
| --- | --- | --- | --- |
| サンドボックスあたりのセグメントの最大数 | 1 万 | ソフト | **組織が作成できるセグメントの最大数は、サンドボックスあたり 10,000 個です。** 各サンドボックスに 10,000 個未満のセグメントがある限り、1 つの組織は合計で 10,000 個を超えるセグメントを持つことができます。追加のセグメントを作成しようとすると、システムのパフォーマンスが低下します。 |
| サンドボックスあたりのストリーミングセグメントの最大数 | 500 | ソフト | **組織が作成できるストリーミングセグメントの最大数は、サンドボックスあたり 500 です。** 個々のサンドボックスに 500 未満のストリーミングセグメントがある限り、1 つの組織は合計で 500 を超えるストリーミングセグメントを持つことができます。追加のストリーミングセグメントを作成しようとすると、システムのパフォーマンスが低下します。 |
| サンドボックスあたりのバッチセグメントの最大数 | 1 万 | ソフト | **組織が作成できるバッチセグメントの最大数は、サンドボックスあたり 10,000 個です。** 個々のサンドボックスに 10,000 個未満のバッチセグメントがある限り、組織は合計で 10,000 個を超えるバッチセグメントを持つことができます。追加のバッチセグメントを作成しようとすると、システムのパフォーマンスが低下します。 |

## 付録

この節では、個々のガードレールの追加の詳細を示します。

### Platform でのAdobe Analyticsレポートスイートデータセット {#aa-datasets}

プロファイルに対して最大 1 つのAdobe Analyticsレポートスイートデータセットを有効にする必要があります。 これはソフトリミットで、プロファイルに対して複数の Analytics データセットを有効にできますが、データに意図しない結果が生じる可能性があるので、お勧めしません。 これは、Experience Platformのデータのセマンティック構造を提供し、データ解釈の一貫性を確保する Experience Data Model(XDM) スキーマと、Adobe Analyticsの eVar とコンバージョン変数のカスタマイズ可能な特性との違いによるものです。

例えば、Adobe Analyticsでは、1 つの組織に複数のレポートスイートがある場合があります。 レポートスイート A がeVar4 を「内部検索用語」、レポートスイート B がeVar4 を「参照ドメイン」と指定した場合、これらの値は共にプロファイルの同じフィールドに取り込まれ、混乱やデータ品質の低下を招きます。
