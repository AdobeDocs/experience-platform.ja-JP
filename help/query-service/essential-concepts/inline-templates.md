---
title: インラインテンプレート
description: インラインテンプレートを使用した多数のクエリで複数の条件を再利用する方法を説明します。
source-git-commit: f8ec94b4c93e3b36667bdb179ce12c10d20fa30f
workflow-type: tm+mt
source-wordcount: '477'
ht-degree: 1%

---

# インラインテンプレート

インラインテンプレートを使用すると、複数の条件を多数のクエリで再利用できます。 条件をテンプレートに保存し、複数のクエリで再利用できます。 再利用可能な SQL テンプレートを使用すると、開発作業が軽減され、クエリ間で長い文をコピーする際にエラーが発生するリスクも軽減されます。 インラインテンプレートを使用すると、1 か所で変更を加え、その変更をこのテンプレートを参照する任意のクエリに反映させることができます。

このドキュメントでは、クエリエディター内でのインラインテンプレートの使用と制限について説明します。

## 前提条件

インラインテンプレートは、UI とクエリサービス API の両方でサポートされています。 このガイドに進む前に、次の方法に関するドキュメントをお読みください。 [API を使用してクエリテンプレートを作成する](../api/query-templates.md#create-a-query-template) または [クエリエディター](../ui/user-guide.md#query-authoring).

## インラインテンプレート構文 {#syntax}

保存したクエリは、テンプレートと呼ばれます。 テンプレートがステートメント内で別のテンプレートを参照する場合、このテンプレートはインラインテンプレートと呼ばれます。 インラインテンプレートは、ハッシュ記号 (#) の後にテンプレート名を付けることで、SQL に示されます。 この構文の例を次に示します。 `#YOUR_TEMPLATE_NAME`.

## ユースケース {#use-case}

次の SQL テンプレートは、インラインテンプレートのユーティリティを示しています。例は、「最大売上高」を超えて購入し、2023 年 6 月以前に注文した任意の地域の米国のお客様をカウントするものです。 インラインテンプレートの利点は、子テンプレート（この場合は最大売上高と注文日）を簡単に編集でき、親テンプレートを変更する必要がないことです。

**例**

```sql
#parent_template : SELECT count(*) FROM customer WHERE region=NA AND country=US AND revenue > #revenue_max
#revenue_max: SELECT max(revenue) FROM revenue_table WHERE order_date > '01-06-2023'
```

クエリを実行すると、クエリサービスは、ハッシュ記号から始まるテンプレート名を、指定されたテンプレートの SQL ステートメントで置き換えます。

>[!NOTE]
>
>クエリテンプレートは、他のインラインテンプレートを任意の数だけ呼び出すことができます。 1 つのクエリから呼び出すことができるインラインテンプレートの数に制限はありません。 また、テンプレートは、他のインラインテンプレート内にネストできます。

テンプレートを使用して、1 つまたは複数の条件を保存できます。 単独で完全なクエリである必要はありません。 テンプレートに有効なクエリが含まれている場合は、ハッシュ記号が付いたテンプレート名を呼び出すだけで、クエリを実行できます。 例えば、 `SELECT * FROM JUNE_2023_LOYALTY_MEMBERS;` という名前のテンプレート `JUNE_2023_LOYALTY_MEMBERS`、コマンド  `#JUNE_2023_LOYALTY_MEMBERS;` は、テンプレート内に含まれる有効なクエリを実行します。

>
>
>Adobe Experience Platform UI 内では、パラメーター化されたクエリ形式のインラインテンプレートは親レベルでのみサポートされます。 つまり、パラメーター化されたクエリは、元のテンプレートで使用された場合にのみ機能します。 子テンプレートは、静的テンプレートである必要があり、動的パラメーターを持つことはできません。

## 次の手順

このドキュメントを読み終えたら、SQL 内の他のテンプレートを、クエリエディターまたはクエリサービス API を使用して参照する方法がわかります。

また、 [匿名ブロックガイド](./anonymous-block.md)：では、順に実行される 1 つ以上の SQL 文を連結して、開発のオーバーヘッドを最小限に抑える方法を説明します。
