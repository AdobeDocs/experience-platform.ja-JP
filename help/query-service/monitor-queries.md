---
title: クエリの監視
description: クエリサービス UI を使用してクエリを監視する方法について説明します。
exl-id: 4640afdd-b012-4768-8586-32f1b8232879
source-git-commit: a9887535b12b8c4aeb39bb5a6646da88db4f0308
workflow-type: tm+mt
source-wordcount: '1033'
ht-degree: 1%

---

# クエリの監視

Adobe Experience Platformでは、UI を使用して、すべてのクエリジョブのステータスをより明確に表示できます。 送信者 [!UICONTROL 予定クエリ] 「 」タブでは、ステータス、スケジュールの詳細、失敗した場合のエラーメッセージ/コードなど、クエリの実行に関する重要な情報を確認できます。 UI を使用して、クエリのステータスに基づくクエリのアラートを購読することもできます。 [!UICONTROL 予定クエリ] タブをクリックします。

## [!UICONTROL 予定クエリ]

この [!UICONTROL 予定クエリ] 「 」タブには、実行されたクエリとスケジュールされたクエリの概要が表示されます。 ワークスペースには、実行がスケジュールされた、または少なくとも 1 回実行されたすべての CTAS および ITAS クエリが含まれています。 スケジュールされたすべてのクエリの実行の詳細、および失敗したクエリのエラーコードとメッセージが見つかります。

次に移動するには： [!UICONTROL 予定クエリ] タブ、選択 **[!UICONTROL クエリ]** 左側のナビゲーションバーから、 **[!UICONTROL 予定クエリ]**

![クエリワークスペースの「スケジュールされたクエリ」タブ](./images/monitor-queries/scheduled-queries.png)

次の表に、使用可能な各列を示します。

>[!NOTE]
>
>アラートの購読アイコンは、無題の列の各行に含まれています。 詳しくは、 [アラート購読](#alert-subscription) 」の節を参照してください。

| 列 | 説明 |
|---|---|
| 名前 | 名前フィールドは、テンプレート名か、SQL クエリの最初の数文字のどちらかです。 クエリエディターで UI を使用して作成したクエリは、開始時にと名前が付けられます。 API を使用してクエリが作成された場合、クエリの名前は、クエリの作成に使用される最初の SQL のスニペットになります。 |
| テンプレート | クエリのテンプレート名。 テンプレート名を選択してクエリエディターに移動します。 クエリテンプレートは、利便性のため、クエリエディターに表示されます。 テンプレート名がない場合、行はハイフンでマークされ、クエリを表示するためにクエリエディターにリダイレクトすることはできません。 |
| SQL | SQL クエリのスニペット。 |
| 実行頻度 | これは、クエリを実行するように設定されたケイデンスです。 使用できる値は次のとおりです。 `Run once` および `Scheduled`. クエリは、実行頻度に従ってフィルタリングできます。 |
| 作成者 | クエリを作成したユーザーの名前。 |
| 作成 | クエリが作成されたときのタイムスタンプ（UTC 形式）。 |
| 前回の実行のタイムスタンプ | クエリが実行された際の最新のタイムスタンプ。 この列では、現在のスケジュールに従ってクエリが実行されたかどうかがハイライトされます。 |
| 前回の実行ステータス | 最新のクエリ実行のステータス。 次の 3 つのステータス値があります。 `successful` `failed` または `in progress`. |

>[!TIP]
>
>クエリエディターに移動すると、 **[!UICONTROL クエリ]** に戻る [!UICONTROL テンプレート] タブをクリックします。

### スケジュールクエリのテーブル設定のカスタマイズ

列は [!UICONTROL 予定クエリ] 」タブをクリックして、必要に応じて設定します。 設定アイコン (![設定アイコン。](./images/monitor-queries/settings-icon.png)) をクリックして、 [!UICONTROL テーブルをカスタマイズ] 設定ダイアログを開き、使用可能な列を編集します。

![「テーブル設定のカスタマイズ」アイコン。](./images/monitor-queries/customze-table-settings-icon.png)

関連するチェックボックスを切り替えて、テーブル列を削除または追加します。 次に、 **[!UICONTROL 適用]** をクリックして選択を確定します。

>[!NOTE]
>
>UI を使用して作成されたクエリは、作成プロセスの一環として名前付きテンプレートになります。 テンプレート名は、テンプレート列に表示されます。 API を使用してクエリが作成された場合、テンプレート列は空白になります。

![[ テーブル設定をカスタマイズ ] ダイアログボックス。](./images/monitor-queries/customize-table-dialog.png)

### アラートの配信を登録 {#alert-subscription}

アラートを購読するには、 [!UICONTROL 予定クエリ] タブをクリックします。 アラート通知アイコン (![アラートアイコン。](./images/monitor-queries/alerts-icon.png)) をクリックし、 [!UICONTROL アラート] ダイアログ。 この [!UICONTROL アラート] ダイアログは、UI 通知と電子メールアラートの両方を購読します。 アラートは、クエリのステータスに基づいています。 次の 3 つのオプションを使用できます。 `start`, `success`、および `failure`. 該当するボックスをオンにし、「 」を選択します。 **[!UICONTROL 保存]** 購読する

<!-- This dialog will be updated before release. THe image below will need to be updated inline with these changes. -->

![アラート購読ダイアログ。](./images/monitor-queries/alert-subscription-dialog.png)

<!-- Link to alert subscriptions doc when available -->

### クエリをフィルター

実行頻度に基づいてクエリをフィルタリングできます。 次の [!UICONTROL 予定クエリ] 」タブで、フィルターアイコン (![フィルターアイコン](./images/monitor-queries/filter-icon.png)) をクリックして、フィルターサイドバーを開きます。

![フィルターアイコンが強調表示された「スケジュール済みクエリ」タブ](./images/monitor-queries/filter-queries.png)

次のいずれかを選択します。 **[!UICONTROL 予定]** または **[!UICONTROL 1 回実行]** 頻度フィルターチェックボックスを実行して、クエリのリストをフィルターします。

>[!NOTE]
>
>実行されたが、スケジュールされていないクエリは、 [!UICONTROL 1 回実行].

![フィルターのサイドバーがハイライト表示された「スケジュール済みクエリ」タブ。](./images/monitor-queries/filter-sidebar.png)

フィルター条件を有効にしたら、「 **[!UICONTROL フィルターを非表示]** をクリックして、フィルターパネルを閉じます。

## クエリ実行スケジュールの詳細

クエリ名を選択して、スケジュールの詳細ページに移動します。 このビューには、スケジュール済みクエリの一部として実行されたすべての実行のリストが表示されます。 提供される情報には、開始時間と終了時間、ステータス、使用するデータセットが含まれます。

![スケジュールの詳細ページ。](./images/monitor-queries/schedule-details.png)

この情報は 5 列のテーブルで提供されます。 各行はクエリの実行を示します。

| 列名 | 説明 |
|---|---|
| クエリ実行 ID | 毎日の実行に対するクエリ実行 ID。 |
| クエリ実行の開始 | クエリが実行されたときのタイムスタンプ。 これは UTC 形式です。 |
| クエリの実行が完了しました | クエリが完了したときのタイムスタンプ。 これは UTC 形式です。 |
| ステータス | 最新のクエリ実行のステータス。 次の 3 つのステータス値があります。 `successful` `failed` または `in progress`. |
| データセット | 実行に関係するデータセット。 |

スケジュールされるクエリの詳細は、 [!UICONTROL プロパティ] パネル。 このパネルには、初期クエリ ID、クライアントタイプ、テンプレート名、クエリ SQL、スケジュールのケイデンスが含まれます。

![プロパティパネルがハイライト表示されたスケジュールの詳細ページ。](./images/monitor-queries/properties-panel.png)

### 実行の詳細

クエリ実行 ID を選択して実行の詳細ページに移動し、クエリ情報を表示します。

![実行 ID がハイライト表示されたスケジュールの詳細画面](./images/monitor-queries/navigate-to-run-details.png)

このビューには、このスケジュール済みクエリの個々の実行に関する情報と、実行ステータスの詳細な分類が表示されます。 また、このページには、クエリが失敗した原因となったエラーの詳細とクライアント情報も含まれます。

![実行の詳細画面と「概要」セクションがハイライト表示されています。](./images/monitor-queries/query-run-details.png)

クエリステータスセクションに、クエリが失敗した場合のエラーコードとエラーメッセージが表示されます。

![エラーセクションがハイライト表示された実行の詳細画面](./images/monitor-queries/failed-query.png)

このビューからクエリ SQL をクリップボードにコピーできます。 SQL スニペットの右上にあるコピーアイコンを選択して、クエリをコピーします。 コードがコピーされたことを示すポップアップメッセージが表示されます。

![SQL コピーアイコンがハイライトされた実行詳細画面](./images/monitor-queries/copy-sql.png)

選択 **[!UICONTROL クエリ]** スケジュールの詳細画面に戻るには、または **[!UICONTROL 予定クエリ]** に戻る [!UICONTROL 予定クエリ] タブをクリックします。

![クエリがハイライトされた実行の詳細画面](./images/monitor-queries/return-navigation.png)
