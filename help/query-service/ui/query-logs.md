---
title: クエリログ
description: クエリログは、クエリが実行されるたびに自動的に生成され、UI から使用してトラブルシューティングに役立ちます。 このドキュメントでは、UI のクエリサービスログ セクションの使用方法と操作方法について説明します。
exl-id: 929e9fba-a9ba-4bf9-a363-ca8657a84f75
source-git-commit: 41c069ef1c0a19f34631e77afd7a80b8967c5060
workflow-type: tm+mt
source-wordcount: '1012'
ht-degree: 3%

---

# クエリログ

>[!IMPORTANT]
>
>特定のクエリログ機能は、現在、限定リリースになっており、すべてのお客様が使用できるわけではありません。 編集アイコンを使用しない場合、UI の表示が若干異なる場合があります。 また、クエリ名を選択するプロセスで、[!UICONTROL  クエリログの詳細 ] ビューではなくクエリエディターに移動する場合もあります。

Adobe Experience Platformは、API と UI の両方を通じて発生したすべてのクエリイベントのログを保持します。 この情報は、クエリサービス UI の「[!UICONTROL  ログ ]」タブで確認できます。

ログファイルは、クエリイベントによって自動的に生成され、使用された SQL、クエリのステータス、所要時間、前回の実行時間などの情報が含まれます。 クエリログデータは、非効率的なクエリや問題のあるクエリのトラブルシューティングに役立つ強力なツールとして使用できます。 より包括的なログ情報は、監査ログ機能の一部として保持されており、[ 監査ログのドキュメント ](../../landing/governance-privacy-security/audit-logs/overview.md) に記載されています。

## クエリログを確認 {#check-query-logs}

クエリログを確認するには、「[!UICONTROL  クエリ ]」を選択してクエリサービスワークスペースに移動し、使用可能なオプションから「[!UICONTROL  ログ ]」を選択します。

>[!NOTE]
>
>システムクエリとダッシュボードクエリは、どちらもデフォルトで除外されます。 設定に基づいて表示されるログを絞り込む方法については、[ フィルター ](#filter-logs) の節を参照してください。

![ クエリとログがハイライト表示された Platform UI。](../images/ui/query-log/logs.png)

## カスタマイズと検索 {#customize-and-search}

クエリサービスログは、カスタマイズ可能なテーブル形式で表示されます。 テーブルの列をカスタマイズするには、「設定」アイコン（![A 設定アイコン](../images/ui/query-log/settings-icon.png)）を選択します。 [!UICONTROL  テーブルをカスタマイズ ] ダイアログが表示され、各列の選択を解除できます。

また、検索フィールドにテンプレート名を入力して、特定のクエリテンプレートに関するログを検索することもできます。

![ 検索バーと列テーブルの管理ドロップダウンがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/customize-logs.png)

[ 各ログテーブル列の説明 ](./overview.md#log) は、クエリサービスの概要の「ログ」セクションにあります。

## ログデータの検出

各行は、クエリテンプレートに関連付けられたクエリ実行のログデータを表します。 テーブルから任意の行を選択して、その実行のログデータを右側のサイドバーに入力します。

![ 行が選択され、右側のサイドバーのログデータがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/log-details.png)

ログの詳細パネルでは、様々なアクションを実行できます。 クエリを CTAS として実行できます。これにより新しい出力データセットを作成したり、実行で使用された完全な SQL クエリを確認またはコピーしたり、クエリを削除したりできます。

>[!NOTE]
>
>「[!UICONTROL CTAS として実行 ] するオプションは、SELECT クエリでのみ使用できます。

![ 行が選択されたクエリログワークスペース、「CTAS として実行」、「クエリを削除」および「SQL をコピー」アイコンがハイライト表示されます。](../images/ui/query-log/edit-output-dataset.png)

>[!IMPORTANT]
>
>特定のクエリログ機能は、現在、限定リリースになっており、すべてのお客様が使用できるわけではありません。

また、「[!UICONTROL  名前 ]」列からクエリテンプレート名を選択して、「[!UICONTROL  クエリログの詳細 ]」ビューに直接移動することもできます。

>[!NOTE]
>
>API を使用してクエリが作成され、初期化時にテンプレート名が指定されなかった場合、代わりに SQL クエリの最初の数十文字が表示されます。

![ クエリログの詳細表示 ](../images/ui/query-log/query-log-details.png)

## ログを編集 {#edit-logs}

各行のテンプレート名または SQL スニペットの横には、鉛筆アイコン（![ 鉛筆アイコン。](../images/ui/query-log/edit-icon.png)）を選択します。これを使用して、クエリエディターに移動できます。 次に、エディターで編集できるようにクエリが事前設定されます。

![ 鉛筆アイコンがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/edit-query.png)

## ログをフィルター {#filter-logs}

様々な設定に基づいて、クエリログのリストをフィルタリングできます。 フィルターアイコン（![ フィルターアイコンを選択します。](../images/ui/query-log/filter-icon.png)）をクリックし、左側のパネルで一連のフィルターオプションを開きます。

![ フィルターアイコンがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/log-filter.png)

使用可能なフィルターのリストが表示されます。

![ フィルターオプションが表示されハイライト表示されたクエリログワークスペース。](../images/ui/query-log/log-filter-settings.png)

次の表に、各フィルターの説明を示します。

| フィルター | 説明 |
| ------ | ----------- |
| [!UICONTROL  ダッシュボードクエリを除外 ] | このチェックボックスはデフォルトで有効になっており、インサイトの生成に使用されるクエリで生成されたログは除外されます。 これらのクエリはシステムで生成され、監視、管理、トラブルシューティングに必要な、ユーザーが生成したログの記録を隠します。 システム生成ログを表示するには、このチェックボックスをオフにします。 |
| [!UICONTROL  システムクエリを除外 ] | このチェックボックスはデフォルトで有効になっており、システムで生成されたログは除外されます。 システム生成クエリには、多くの場合、ユーザーの監視、管理、トラブルシューティングの目的には関係しない可能性のあるバックグラウンドタスクやメンテナンス操作が含まれます。 システム生成ログを調べる必要がある場合は、このチェックボックスをオフにして、ログ表示に含めます。 |
| [!UICONTROL  開始日 ] | 特定の期間中に作成されたクエリのログをフィルタリングするには、「[!UICONTROL  開始日 ]」セクションで [!UICONTROL  開始日 ] と [!UICONTROL  終了日 ] を設定します。 |
| [!UICONTROL  完了日 ] | 特定の期間に完了したクエリについてログをフィルタリングするには、「[!UICONTROL  完了日 ] セクションで [!UICONTROL  開始日 ] と [!UICONTROL  終了日 ] の日付を設定します。 |
| [!UICONTROL ステータス] | クエリの [!UICONTROL  ステータス ] に基づいてログをフィルタリングするには、適切なラジオボタンを選択します。 使用可能なオプションには、[!UICONTROL  送信済み ]、[!UICONTROL  処理中 ]、[!UICONTROL  成功 ]、[!UICONTROL  失敗 ] などがあります。 ログは、一度に 1 つのステータス条件に基づいてのみフィルタリングできます。 |
| [!UICONTROL クライアント] | 使用するクエリクライアントに基づいてログをフィルタリングするには、許可された値 `API`、`Adobe Query Service UI`、`QsAccel` のいずれかをフリーテキストフィールドに入力します。 |
| [!UICONTROL  マイクエリ ] | [!UICONTROL  マイクエリ ] 切替スイッチを使用して、ログをフィルタリングし、実行したクエリを確認します。 |
| [!UICONTROL  クエリログ ID] | クエリの一意のログ ID に基づいてフィルタリングするには、ログ ID をフリーテキストフィールドに入力します。 この情報は、[!UICONTROL  ログの詳細 ] にあります。 |

適用されたフィルターは、フィルターされたログ結果の上に表示されます。

![ 適用されたフィルターのリストがハイライト表示されたクエリワークスペースの「ログ」タブ。](../images/ui/query-log/applied-log-filters.png)

## 次の手順

このドキュメントでは、クエリログがクエリサービス UI でどのようにアクセスおよび使用されるかについて、より深く理解しました。

クエリサービスの機能について詳しくは、[UI の概要](./overview.md)または [Query Service API ガイド](../api/getting-started.md)を参照してください。

クエリサービスを使用してスケジュールされたクエリ実行の表示を改善する方法については、[ クエリの監視ドキュメント ](./monitor-queries.md) を参照してください。
