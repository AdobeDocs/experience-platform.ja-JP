---
title: クエリログ
description: クエリログは、クエリが実行されるたびに自動的に生成され、UI から使用してトラブルシューティングに役立ちます。 このドキュメントでは、UI のクエリサービスログ セクションの使用方法と操作方法について説明します。
exl-id: 929e9fba-a9ba-4bf9-a363-ca8657a84f75
source-git-commit: fded2f25f76e396cd49702431fa40e8e4521ebf8
workflow-type: tm+mt
source-wordcount: '949'
ht-degree: 3%

---

# クエリログ

Adobe Experience Platformは、API と UI の両方を通じて発生したすべてのクエリイベントのログを保持します。 この情報は、クエリサービス UI の「[!UICONTROL &#x200B; ログ &#x200B;]」タブで確認できます。

ログファイルは、クエリイベントによって自動的に生成され、使用された SQL、クエリのステータス、所要時間、前回の実行時間などの情報が含まれます。 クエリログデータは、非効率的なクエリや問題のあるクエリのトラブルシューティングに役立つ強力なツールとして使用できます。 より包括的なログ情報は、監査ログ機能の一部として保持されており、[&#x200B; 監査ログのドキュメント &#x200B;](../../landing/governance-privacy-security/audit-logs/overview.md) に記載されています。

## クエリログを確認 {#check-query-logs}

クエリログを確認するには、「[!UICONTROL &#x200B; クエリ &#x200B;]」を選択してクエリサービスワークスペースに移動し、使用可能なオプションから「[!UICONTROL &#x200B; ログ &#x200B;]」を選択します。

>[!NOTE]
>
>システムクエリとダッシュボードクエリは、どちらもデフォルトで除外されます。 設定に基づいて表示されるログを絞り込む方法については、[&#x200B; フィルター &#x200B;](#filter-logs) の節を参照してください。

![&#x200B; クエリとログがハイライト表示されたExperience Platform UI。](../images/ui/query-log/logs.png)

## カスタマイズと検索 {#customize-and-search}

クエリサービスログは、カスタマイズ可能なテーブル形式で表示されます。 テーブルの列をカスタマイズするには、「設定」アイコン（![A 設定アイコン](/help/images/icons/column-settings.png)）を選択します。 [!UICONTROL &#x200B; テーブルをカスタマイズ &#x200B;] ダイアログが表示され、各列の選択を解除できます。

また、検索フィールドにテンプレート名を入力して、特定のクエリテンプレートに関するログを検索することもできます。

![&#x200B; 検索バーと列テーブルの管理ドロップダウンがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/customize-logs.png)

[&#x200B; 各ログテーブル列の説明 &#x200B;](./overview.md#log) は、クエリサービスの概要の「ログ」セクションにあります。

## ログデータの検出

各行は、クエリテンプレートに関連付けられたクエリ実行のログデータを表します。 テーブルから任意の行を選択して、その実行のログデータを右側のサイドバーに入力します。

![&#x200B; 行が選択され、右側のサイドバーのログデータがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/log-details.png)

ログの詳細パネルでは、様々なアクションを実行できます。 クエリを CTAS として実行できます。これにより新しい出力データセットを作成したり、実行で使用された完全な SQL クエリを確認またはコピーしたり、クエリを削除したりできます。

>[!NOTE]
>
>「[!UICONTROL CTAS として実行 &#x200B;] するオプションは、SELECT クエリでのみ使用できます。

![&#x200B; 行が選択されたクエリログワークスペース、「CTAS として実行」、「クエリを削除」および「SQL をコピー」アイコンがハイライト表示されます。](../images/ui/query-log/edit-output-dataset.png)

また、「[!UICONTROL &#x200B; 名前 &#x200B;]」列からクエリテンプレート名を選択して、「[!UICONTROL &#x200B; クエリログの詳細 &#x200B;]」ビューに直接移動することもできます。

>[!NOTE]
>
>API を使用してクエリが作成され、初期化時にテンプレート名が指定されなかった場合、代わりに SQL クエリの最初の数十文字が表示されます。

![&#x200B; クエリログの詳細表示 &#x200B;](../images/ui/query-log/query-log-details.png)

## ログを編集 {#edit-logs}

各行のテンプレート名または SQL スニペットの横には、鉛筆アイコン（![&#x200B; 鉛筆アイコン。](/help/images/icons/edit.png)）を選択します。これを使用して、クエリエディターに移動できます。 次に、エディターで編集できるようにクエリが事前設定されます。

![&#x200B; 鉛筆アイコンがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/edit-query.png)

## ログをフィルター {#filter-logs}

様々な設定に基づいて、クエリログのリストをフィルタリングできます。 フィルターアイコン（![&#x200B; フィルターアイコンを選択します。](/help/images/icons/filter.png)）をクリックし、左側のパネルで一連のフィルターオプションを開きます。

![&#x200B; フィルターアイコンがハイライト表示されたクエリログワークスペース。](../images/ui/query-log/log-filter.png)

使用可能なフィルターのリストが表示されます。

![&#x200B; フィルターオプションが表示されハイライト表示されたクエリログワークスペース。](../images/ui/query-log/log-filter-settings.png)

次の表に、各フィルターの説明を示します。

| フィルター | 説明 |
| ------ | ----------- |
| [!UICONTROL &#x200B; ダッシュボードクエリを除外 &#x200B;] | このチェックボックスはデフォルトで有効になっており、インサイトの生成に使用されるクエリで生成されたログは除外されます。 これらのクエリはシステムで生成され、監視、管理、トラブルシューティングに必要な、ユーザーが生成したログの記録を隠します。 システム生成ログを表示するには、このチェックボックスをオフにします。 |
| [!UICONTROL &#x200B; システムクエリを除外 &#x200B;] | このチェックボックスはデフォルトで有効になっており、システムで生成されたログは除外されます。 システム生成クエリには、多くの場合、ユーザーの監視、管理、トラブルシューティングの目的には関係しない可能性のあるバックグラウンドタスクやメンテナンス操作が含まれます。 システム生成ログを調べる必要がある場合は、このチェックボックスをオフにして、ログ表示に含めます。 |
| [!UICONTROL &#x200B; 開始日 &#x200B;] | 特定の期間中に作成されたクエリのログをフィルタリングするには、「[!UICONTROL &#x200B; 開始日 &#x200B;]」セクションで [!UICONTROL &#x200B; 開始日 &#x200B;] と [!UICONTROL &#x200B; 終了日 &#x200B;] を設定します。 |
| [!UICONTROL &#x200B; 完了日 &#x200B;] | 特定の期間に完了したクエリについてログをフィルタリングするには、「[!UICONTROL &#x200B; 完了日 &#x200B;] セクションで [!UICONTROL &#x200B; 開始日 &#x200B;] と [!UICONTROL &#x200B; 終了日 &#x200B;] の日付を設定します。 |
| [!UICONTROL ステータス] | クエリの [!UICONTROL &#x200B; ステータス &#x200B;] に基づいてログをフィルタリングするには、適切なラジオボタンを選択します。 使用可能なオプションには、[!UICONTROL &#x200B; 送信済み &#x200B;]、[!UICONTROL &#x200B; 処理中 &#x200B;]、[!UICONTROL &#x200B; 成功 &#x200B;]、[!UICONTROL &#x200B; 失敗 &#x200B;] などがあります。 ログは、一度に 1 つのステータス条件に基づいてのみフィルタリングできます。 |
| [!UICONTROL クライアント] | 使用するクエリクライアントに基づいてログをフィルタリングするには、許可された値 `API`、`Adobe Query Service UI`、`QsAccel` のいずれかをフリーテキストフィールドに入力します。 |
| [!UICONTROL &#x200B; マイクエリ &#x200B;] | [!UICONTROL &#x200B; マイクエリ &#x200B;] 切替スイッチを使用して、ログをフィルタリングし、実行したクエリを確認します。 |
| [!UICONTROL &#x200B; クエリログ ID] | クエリの一意のログ ID に基づいてフィルタリングするには、ログ ID をフリーテキストフィールドに入力します。 この情報は、[!UICONTROL &#x200B; ログの詳細 &#x200B;] にあります。 |

適用されたフィルターは、フィルターされたログ結果の上に表示されます。

![&#x200B; 適用されたフィルターのリストがハイライト表示されたクエリワークスペースの「ログ」タブ。](../images/ui/query-log/applied-log-filters.png)

## 次の手順

このドキュメントでは、クエリログがクエリサービス UI でどのようにアクセスおよび使用されるかについて、より深く理解しました。

クエリサービスの機能について詳しくは、[UI の概要](./overview.md)または [Query Service API ガイド](../api/getting-started.md)を参照してください。

クエリサービスを使用してスケジュールされたクエリ実行の表示を改善する方法については、[&#x200B; クエリの監視ドキュメント &#x200B;](./monitor-queries.md) を参照してください。
