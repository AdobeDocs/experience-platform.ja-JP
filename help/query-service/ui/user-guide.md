---
keywords: Experience Platform；ホーム；人気の高いトピック；クエリエディター；クエリエディター；クエリサービス；クエリサービス；
solution: Experience Platform
title: クエリエディター UI ガイド
topic-legacy: query editor
description: クエリエディターは、Adobe Experience Platformクエリサービスが提供するインタラクティブなツールで、Experience Platformのユーザーインターフェイス内で顧客体験データのクエリの書き込み、検証、実行をおこなうことができます。 クエリエディターでは、分析およびデータ調査のためのクエリを開発できます。また、開発目的でインタラクティブクエリを実行できるほか、非インタラクティブクエリを実行して Experience Platform のデータセットに入力することもできます。
exl-id: d7732244-0372-467d-84e2-5308f42c5d51
source-git-commit: 283c6ba323a327b0c525343a96a45a2412baa67b
workflow-type: tm+mt
source-wordcount: '2081'
ht-degree: 20%

---

# [!DNL Query Editor] UI ガイド

[!DNL Query Editor] は、Adobe Experience Platformが提供するインタラクティブなツールです [!DNL Query Service]：内で顧客体験データのクエリを記述、検証および実行できます。 [!DNL Experience Platform] ユーザーインターフェイス。 [!DNL Query Editor] では、分析およびデータ調査用のクエリの開発をサポートし、開発用のインタラクティブクエリと、非インタラクティブクエリを実行してデータセットを [!DNL Experience Platform].

の概念と機能に関する詳細 [!DNL Query Service]を参照し、 [クエリサービスの概要](../home.md). クエリサービスのユーザーインターフェイスを [!DNL Platform]を参照し、 [クエリサービス UI の概要](./overview.md).

## はじめに {#getting-started}

[!DNL Query Editor] に接続することで、クエリを柔軟に実行できます。 [!DNL Query Service]、およびクエリは、この接続がアクティブな間にのみ実行されます。

### 接続先 [!DNL Query Service] {#connecting-to-query-service}

[!DNL Query Editor] 初期化と接続に数秒かかります [!DNL Query Service] をクリックします。 次に示すように、コンソールは、接続されたタイミングを示します。 エディターがクエリサービスに接続される前にクエリを実行しようとすると、接続が完了するまで実行が待機されます。

![初回接続時のクエリエディターのコンソール出力。](../images/ui/query-editor/connect.png)

### クエリの実行元 [!DNL Query Editor] {#run-a-query}

実行元のクエリ [!DNL Query Editor] をインタラクティブに実行します。 つまり、ブラウザーを閉じたり、別の場所に移動したりすると、クエリはキャンセルされます。また、クエリ出力からデータセットを生成するために実行するクエリも同様です。

## を使用したクエリオーサリング [!DNL Query Editor] {#query-authoring}

使用 [!DNL Query Editor]を使用すると、顧客体験データのクエリを記述、実行および保存できます。 実行または保存されたすべてのクエリ [!DNL Query Editor] が、 [!DNL Query Service].

### [!DNL Query Editor] へのアクセス {#accessing-query-editor}

内 [!DNL Experience Platform] UI、「 」を選択します。 **[!UICONTROL クエリ]** 左側のナビゲーションメニューで、 [!DNL Query Service] ワークスペース。 次に、 **[!UICONTROL クエリを作成]** をクリックして、クエリの記述を開始します。 このリンクは、 [!DNL Query Service] ワークスペース。

![「クエリ」ワークスペースの概要タブで、「クエリを作成」がハイライトされています。](../images/ui/query-editor/create-query.png)

### クエリの記述 {#writing-queries}

[!UICONTROL クエリエディターは、クエリをできるだけ簡単に記述できるように構成されています。]次のスクリーンショットは、SQL 入力フィールドと **再生** ハイライト表示されました。

![SQL 入力フィールドと「再生」がハイライト表示されたクエリエディター。](../images/ui/query-editor/editor.png)

開発時間を最小限に抑えるために、返される行を制限してクエリを開発することをお勧めします。たとえば、`SELECT fields FROM table WHERE conditions LIMIT number_of_rows` のように設定します。クエリが目的どおりの出力を生成することを確認したら、制限を解除して、`CREATE TABLE tablename AS SELECT` と設定してクエリを実行し、データセットを生成します。

### の記述ツール [!DNL Query Editor] {#writing-tools}

- **構文の自動ハイライト：** SQL の読み取りと構成が容易になります。

![クエリエディター内の SQL ステートメントで、構文の色の強調表示を示します。](../images/ui/query-editor/syntax-highlight.png)

- **SQL キーワードのオートコンプリート：** クエリの入力を開始し、矢印キーを使用して目的の語句に移動して、 **入力**.

![SQL の数文字と、クエリエディターのオプションを提供する自動完了ドロップダウンメニュー。](../images/ui/query-editor/syntax-auto.png)

- **テーブルとフィールドのオートコンプリート**：`SELECT` 元のテーブル名の入力を開始し、矢印キーを使用して目的の表に移動して、**Enter** キーを押します。テーブルを選択すると、オートコンプリートによってそのテーブルのフィールドが認識されます。

![ドロップダウンテーブル名の候補が表示されるクエリエディター入力。](../images/ui/query-editor/tables-auto.png)

### オートコンプリート UI 設定切り替え {#auto-complete}

この [!DNL Query Editor] は、クエリの記述時に、SQL のキーワードの候補と、テーブルまたは列の詳細を自動的に示します。 オートコンプリート機能はデフォルトで有効になっており、いつでも [!UICONTROL 構文のオートコンプリート] クエリエディターの右上に切り替えます。

自動完了の構成設定はユーザーごとに行われ、そのユーザーの連続したログインで記憶されます。

![構文のオートコンプリート切り替えがハイライトされたクエリエディター。](../images/ui/query-editor/auto-complete-toggle.png)

この機能を無効にすると、複数のメタデータコマンドが処理されなくなり、クエリの編集時に作成者の速度に役立つレコメンデーションが提供されます。

トグルを使用してオートコンプリート機能を有効にすると、短い一時停止の後、テーブル名や列名の推奨候補や SQL キーワードを使用できるようになります。 クエリエディターの下のコンソールの成功メッセージは、この機能がアクティブであることを示します。

オートコンプリート機能を無効にした場合、この機能を有効にするにはページを更新する必要があります。 を無効にすると、3 つのオプションを含む確認ダイアログが表示されます [!UICONTROL 構文のオートコンプリート] 切り替え：

- [!UICONTROL キャンセル]
- [!UICONTROL 変更を保存して更新]
- [!UICONTROL 変更を保存せずに更新]

>[!IMPORTANT]
>
>この機能を無効にする際にクエリを記述または編集する場合、ページを更新する前にクエリに対する変更を保存する必要があります。保存しないと、すべての進行状況が失われます。

![オートコンプリート機能を無効にするための確認ダイアログ。](../images/ui/query-editor/confirmation-dialog.png)

オートコンプリート機能を無効にするには、適切なオプションを選択します。

### エラーの検出 {#error-detection}

[!DNL Query Editor] 一般的な SQL 検証と特定の実行検証を提供し、クエリの記述時にが自動的に検証されます。 以下の画像のように、クエリの下に赤い下線が表示される場合は、クエリ内にエラーがあります。

![SQL を赤で下線付きで表示するクエリエディター入力は、エラーを示します。](../images/ui/query-editor/syntax-error-highlight.png)

エラーが検出された場合、SQL コードの上にカーソルを置くと、特定のエラーメッセージが表示されます。

![エラーメッセージを含むダイアログ。](../images/ui/query-editor/linting-error.png)

### クエリの詳細 {#query-details}

次の場所から保存済みのテンプレートを選択します。 [!UICONTROL テンプレート] 」タブに移動して、クエリエディターで表示します。 クエリの詳細パネルには、選択したクエリを管理するための詳細情報とツールが表示されます。

![クエリの詳細パネルがハイライト表示されたクエリエディター。](../images/ui/query-editor/query-details.png)

このパネルを使用すると、UI から直接出力データセットを生成し、表示されたクエリを削除または名前を付け、クエリにスケジュールを追加できます。

このパネルには、クエリの最終変更日時や最終変更者（該当する場合）などの有効なメタデータも表示されます。データセットを生成するには、「 **[!UICONTROL データセットを出力]**. **[!UICONTROL データセットを出力]**&#x200B;ダイアログが表示されます。名前と説明を入力し、「 」を選択します。 **[!UICONTROL クエリを実行]**. 新しいデータセットが **[!UICONTROL データセット]** タブ [!DNL Query Service] のユーザーインターフェイス [!DNL Platform].

### スケジュール済みクエリ {#scheduled-queries}

>[!IMPORTANT]
>
>次に、クエリエディターを使用する際の、スケジュール済みクエリの制限事項を示します。 これらは、 [!DNL Query Service] API:<br/>既に作成、保存、実行されたクエリにのみスケジュールを追加できます。<br/>あなた **できません** パラメータ化クエリにスケジュールを追加します。<br/>スケジュールクエリ **できません** には、匿名ブロックが含まれています。

スケジュールは、クエリエディターで設定します。 ただし、既にテンプレートとして保存されているクエリのみスケジュールできます。 クエリにスケジュールを追加するには、 [!UICONTROL テンプレート] タブまたは [!UICONTROL 予定クエリ] タブをクリックして、クエリエディターに移動します。

API を使用してスケジュールを追加する方法については、 [スケジュール済みクエリエンドポイントガイド](../api/scheduled-queries.md).

保存したクエリにクエリエディターからアクセスすると、 [!UICONTROL スケジュール] タブがクエリ名の下に表示されます。 選択 **[!UICONTROL スケジュール]**.

![「スケジュール」タブがハイライトされたクエリエディター。](../images/ui/query-editor/schedules-tab.png)

スケジュールワークスペースが表示されます。 選択 **[!UICONTROL スケジュールを追加]** スケジュールを作成します。

![「スケジュールを追加」がハイライト表示された「クエリエディタースケジュール」ワークスペース。](../images/ui/query-editor/add-schedule.png)

スケジュールの詳細ページが表示されます。 このページでは、スケジュール済みクエリの頻度、開始日と終了日、スケジュール済みクエリが実行される曜日、およびクエリのエクスポート先のデータセットを選択できます。

![スケジュールの詳細パネルがハイライト表示されます。](../images/ui/query-editor/schedule-details.png)

次のオプションを選択できます。 **[!UICONTROL 頻度]**:

- **[!UICONTROL 毎時]**:スケジュール済みクエリは、選択した日付期間に対して 1 時間ごとに実行されます。
- **[!UICONTROL 毎日]**:スケジュール済みクエリは、選択した日時と期間に X 日ごとに実行されます。 選択した時間は **UTC**&#x200B;ローカルタイムゾーンではなく、
- **[!UICONTROL 毎週]**:選択したクエリは、選択した曜日、時間、および期間に実行されます。 選択した時間は **UTC**&#x200B;ローカルタイムゾーンではなく、
- **[!UICONTROL 毎月]**:選択したクエリは、毎月、選択した日、時刻、および期間に実行されます。 選択した時間は **UTC**&#x200B;ローカルタイムゾーンではなく、
- **[!UICONTROL 毎年]**:選択したクエリは、毎年、選択した日、月、時間および期間に実行されます。 選択した時間は **UTC**&#x200B;ローカルタイムゾーンではなく、

データセットの場合は、既存のデータセットを使用するか、新しいデータセットを作成するかのどちらかを選択できます。

>[!IMPORTANT]
>
> 既存のデータセットを使用するか、新しいデータセットを作成するので、次の操作をおこないます **not** 次のいずれかを含める必要があります。 `INSERT INTO` または `CREATE TABLE AS SELECT` データセットは既に設定されているので、をクエリの一部として追加します。 次のいずれかを含む `INSERT INTO` または `CREATE TABLE AS SELECT` を設定すると、エラーが発生します。

これらの詳細をすべて確認したら、「 」を選択します。 **[!UICONTROL 保存]** スケジュールを作成します。 「スケジュール」ワークスペースに戻り、新しく作成したスケジュールの詳細（スケジュール ID、スケジュール自体、スケジュールの出力データセットなど）が表示されます。 スケジュール ID を使用して、スケジュール済みクエリ自体の実行に関する詳細を検索できます。 詳しくは、 [スケジュールされたクエリ実行エンドポイントガイド](../api/runs-scheduled-queries.md).

![新しく作成されたスケジュールがハイライト表示されたスケジュールワークスペース。](../images/ui/query-editor/schedules-workspace.png)

#### スケジュールを削除または無効にする {#delete-schedule}

スケジュールワークスペースからスケジュールを削除または無効にできます。 クエリテンプレートは、 [!UICONTROL テンプレート] タブまたは [!UICONTROL 予定クエリ] タブをクリックしてクエリエディターに移動し、「 」を選択します。 **[!UICONTROL スケジュール]** スケジュールワークスペースにアクセスするには

使用可能なスケジュールの行からスケジュールを選択します。 切り替えを使用して、スケジュール済みクエリを無効または有効にできます。

>[!IMPORTANT]
>
>クエリのスケジュールを削除する前に、スケジュールを無効にする必要があります。

選択 **[!UICONTROL スケジュールの削除]** 無効なスケジュールを削除します。

![「スケジュールを無効にする」と「スケジュールを削除」がハイライトされたスケジュールワークスペース。](../images/ui/query-editor/delete-schedule.png)

### クエリの保存 {#saving-queries}

この [!DNL Query Editor] には、クエリを保存し、後で操作できる保存関数が用意されています。 クエリを保存するには、「 **[!UICONTROL 保存]** ～の右上隅に [!DNL Query Editor]. クエリを保存する前に、**[!UICONTROL クエリの詳細]**&#x200B;パネルを使用してクエリに名前を付ける必要があります。

>[!NOTE]
>
>クエリエディターを使用してで名前付けおよび保存したクエリは、クエリダッシュボード内でテンプレートとして使用できます [!UICONTROL テンプレート] タブをクリックします。 詳しくは、 [テンプレートドキュメント](./query-templates.md) を参照してください。

### 以前のクエリを検索する方法 {#previous-queries}

から実行されたすべてのクエリ [!DNL Query Editor] は「ログ」テーブルにキャプチャされます。 「**[!UICONTROL ログ]**」タブの検索機能を使用して、クエリの実行を検索できます。保存されたクエリは、 **[!UICONTROL テンプレート]** タブをクリックします。

クエリがスケジュールされた場合、 [!UICONTROL 予定クエリ] 「 」タブでは、UI によるこれらのクエリジョブの可視性が向上しました。 詳しくは、 [クエリ監視ドキュメント](../monitor-queries.md) を参照してください。

>[!NOTE]
>
>実行されなかったクエリは「ログ」に保存されません。クエリをで使用できるようにするには [!DNL Query Service]、で実行または保存する必要があります [!DNL Query Editor].

## クエリエディターを使用してクエリを実行する {#executing-queries}

でクエリを実行するには [!DNL Query Editor]を使用すると、エディターに SQL を入力するか、 **[!UICONTROL ログ]** または **[!UICONTROL テンプレート]** 「 」タブで「 」を選択します。 **再生**. クエリ実行のステータスは下の「**[!UICONTROL コンソール]**」タブに表示され、出力データは「**[!UICONTROL 結果]**」タブに表示されます。

### コンソール {#console}

コンソールには、 [!DNL Query Service]. コンソールには、次への接続ステータスが表示されます。 [!DNL Query Service]、実行中のクエリ操作、およびこれらのクエリによって生じるエラーメッセージ。

![クエリエディターコンソールの「コンソール」タブ](../images/ui/query-editor/console.png)

>[!NOTE]
>
>コンソールには、クエリの実行時に発生したエラーのみが表示されます。クエリを実行する前に、クエリ検証エラーは表示されません。

### クエリの結果 {#query-results}

クエリが完了すると、結果が **[!UICONTROL 結果]** タブ（横） **[!UICONTROL コンソール]** タブをクリックします。 このビューには、クエリの出力が表形式で出力され、最大 100 行まで表示されます。このビューを使用すると、クエリが目的どおりの出力を生成することを確認できます。クエリでデータセットを生成するには、返される行の制限を解除し、`CREATE TABLE tablename AS SELECT` と設定してクエリを実行します。詳しくは、 [データセットの生成チュートリアル](./create-datasets.md) を参照してください。 [!DNL Query Editor].

![クエリエディターコンソールの「結果」タブに、クエリ実行の結果が表示されます。](../images/ui/query-editor/query-results.png)

## 次を使用してクエリを実行 [!DNL Query Service] チュートリアルビデオ {#query-tutorial-video}

次のビデオでは、Adobe Experience Platformインターフェイスおよび PSQL クライアントでクエリを実行する方法を示します。 また、XDM オブジェクト内で個々のプロパティを使用し、Adobe定義関数を使用し、CREATE TABLE AS SELECT(CTAS) を使用する方法も示されます。

>[!VIDEO](https://video.tv.adobe.com/v/29796?quality=12&learn=on)

## 次の手順

これで、で使用できる機能がわかりました。 [!DNL Query Editor] アプリケーションを操作する方法については、 [!DNL Platform]. でのデータセットに対して SQL クエリを実行する方法の詳細 [!DNL Data Lake]( [クエリの実行](../best-practices/writing-queries.md).
