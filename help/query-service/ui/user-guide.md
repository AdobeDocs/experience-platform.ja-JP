---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: Adobe Experience Platformクエリサービスクエリエディタガイド
topic: query editor
translation-type: tm+mt
source-git-commit: cc101b1a439408861961c6fcd0899ca7c48bfa04
workflow-type: tm+mt
source-wordcount: '1106'
ht-degree: 1%

---


# クエリエディターユーザーガイド

クエリエディターは、Adobe Experience Platformクエリサービスが提供するインタラクティブなツールです。Experience Platformユーザーインターフェイス内で顧客体験データのクエリを作成、検証、実行できます。 クエリエディタは、分析およびデータ調査のためのクエリの開発をサポートし、開発目的でインタラクティブクエリを実行するほか、非インタラクティブクエリを実行してExperience Platformのデータセットを設定できます。

クエリサービスの概念と機能について詳しくは、 [クエリサービスの概要を参照してください][query-service-overview]。 Platform上でクエリサービスのユーザーインターフェイスを操作する方法について詳しくは、 [クエリサービスのUIの概要を参照してください][query-service-ui]。

## はじめに

クエリエディターは、クエリサービスに接続することで、クエリを柔軟に実行できます。クエリは、この接続がアクティブな間にのみ実行されます。

### クエリサービスへの接続

クエリエディターを開くと、クエリサービスの初期化と接続に数秒かかります。 次に示すように、コンソールは接続された時点を示します。 エディタが接続する前にクエリを実行しようとすると、接続が完了するまで実行が遅れます。

![画像](../images/queries/query-editor-overview/initializing-connection.png)

### クエリをクエリエディタから実行する方法

クエリエディターで実行されたクエリは、対話形式で実行されます。 これは、ブラウザーを閉じた場合や別の場所に移動した場合に、クエリがキャンセルされることを意味します。 これは、クエリ出力からデータセットを生成するクエリにも当てはまります。

## クエリエディターを使用したクエリオーサリング

クエリエディターを使用して、顧客体験データのクエリを作成、実行および保存できます。 クエリエディターで実行、または保存されたすべてのクエリは、クエリサービスにアクセスできる組織内のすべてのユーザーが使用できます。

### クエリエディタへのアクセス

Experience PlatformUIで、左側のナビゲーションメニューの **クエリ** をクリックして、クエリサービスワークスペースを開きます。 次に、画面の右上にある「 **クエリを作成** 」をクリックして、クエリを記述します。 このリンクは、クエリサービスワークスペースの任意のページから利用できます。

![画像](../images/queries/query-editor-overview/create-query.png)

### クエリの作成

クエリエディターは、書き込みクエリをできるだけ簡単にするように構成されています。 下のスクリーンショットは、 **** 再生ボタンとSQLエントリフィールドがハイライト表示された状態で、UIにエディターがどのように表示されるかを示しています。

![画像](../images/queries/query-editor-overview/editor.png)

開発に要する時間を最小限に抑えるには、返される行に対する制限を持つクエリを開発することをお勧めします。 例：`SELECT fields FROM table WHERE conditions LIMIT number_of_rows`。クエリが期待される出力を生成することを確認したら、制限を解除し、クエリを実行して出力のデータセット `CREATE TABLE tablename AS SELECT` を生成します。

### クエリエディターでのツールの作成

- **自動構文のハイライト表示：** SQLの読み取りと整理を容易にします。

![画像](../images/queries/query-editor-overview/syntax-highlight.png)

- **SQLキーワードオートコンプリート：** 開始がクエリを入力し、矢印キーを使用して目的のキーワードに移動し、 **Enterキーを押します**。

![画像](../images/queries/query-editor-overview/syntax-auto.png)

- **テーブルとフィールドのオートコンプリート：** 目的のテーブル名を入力した開始が `SELECT` 、矢印キーを使用して目的のテーブルに移動し、 **Enterキーを押します**。 テーブルを選択すると、オートコンプリートでそのテーブル内のフィールドが認識されます。

![画像](../images/queries/query-editor-overview/tables-auto.png)

### エラー検出

クエリ・エディタは、クエリの書き込み時に自動的に検証を行い、汎用SQL検証と固有の実行検証を提供します。 クエリの下に赤い下線が引かれている場合（下の画像を参照）は、クエリ内のエラーを表します。

![画像](../images/queries/query-editor-overview/syntax-error-highlight.png)

エラーが検出された場合は、SQLコードの上にカーソルを置くと、特定のエラーメッセージを表示できます。

![画像](../images/queries/query-editor-overview/linting-error.png)

### クエリの詳細

クエリエディターでクエリを表示している間、 *クエリの詳細* パネルには、選択したクエリを管理するためのツールが表示されます。

![画像](../images/queries/query-editor-overview/query-details.png)

このパネルでは、UIから直接出力データセットを生成したり、表示されたクエリを削除または名前を付けたり、SQLコードを表示したり、 *SQLクエリ* タブに簡単にコピーできる形式で表示したりできます。 このパネルには、クエリが最後に変更されたときや、該当する場合は誰が変更したかなど、有用なメタデータも表示されます。 データセットを生成するには、「 **出力データセット**」をクリックします。 [ *出力データセット* ]ダイアログが表示されます。 名前と説明を入力し、「クエリを **実行**」をクリックします。 新しいデータセットは、Platformのクエリサービスユーザーインターフェイスの「 *データセット* 」タブに表示されます。

### クエリの保存

クエリエディタには、クエリを保存して後で操作できる保存機能が用意されています。 クエリを保存するには、クエリエディタの右上隅にある **保存** (Save)をクリックします。 クエリを保存する前に、 *クエリの詳細* パネルを使用してクエリに名前を指定する必要があります。

### 以前のクエリの検索方法

クエリエディターから実行されるすべてのクエリは、ログテーブルに取り込まれます。 「 *ログ* 」タブの検索機能を使用して、クエリ実行を検索できます。 保存したクエリは、「 *参照* 」タブに表示されます。

詳しくは、 [クエリサービスのUIの概要][query-service-ui] （英語）を参照してください。

>[!NOTE]
>
>実行されないクエリは、ログに保存されません。 クエリをクエリサービスで使用するには、クエリエディターで実行または保存する必要があります。

## クエリエディターを使用したクエリの実行

クエリエディターでクエリを実行するには、エディターでSQLを入力するか、「 *ログ* 」または「 *参照* 」タブから前のクエリを読み込み、「 **再生**」をクリックします。 クエリ実行のステータスは、下の *「コンソール* 」タブに表示され、出力データは「 *結果* 」タブに表示されます。

### コンソール

コンソールは、クエリサービスのステータスと操作に関する情報を提供します。 コンソールには、クエリサービスへの接続状態、実行中のクエリ操作、およびこれらのクエリによって生じたエラーメッセージが表示されます。

![画像](../images/queries/query-editor-overview/console.png)

>[!NOTE]
>
>コンソールには、クエリの実行に起因するエラーのみが表示されます。 クエリの実行前にクエリの検証エラーは表示されません。

### クエリ結果

クエリが完了すると、結果が「 *結果* 」タブの「 *コンソール* 」タブの横に表示されます。 この表示は、クエリの表形式の出力を表示します。最大100行まで表示できます。 この表示を使用すると、クエリが期待どおりの出力を生成しているかどうかを確認できます。 クエリーでデータセットを生成するには、返される行に対する制限を解除し、を使用してクエリを実行し、出力データセット `CREATE TABLE tablename AS SELECT` を生成します。 クエリエディターでクエリ結果からデータセットを生成する方法については、 [「データセットの][query-service-create-datasets] 生成」のチュートリアルを参照してください。

![画像](../images/queries/query-editor-overview/query-results.png)

## クエリサービスのクエリの実行のチュートリアルビデオ

次のビデオでは、Adobe Experience PlatformインターフェイスとPSQLクライアントでクエリを実行する方法を示します。 また、XDMオブジェクト内で個々のプロパティを使用し、Adobe定義の関数を使用し、CREATE TABLE AS SELECT(CTAS)を使用する方法も示します。

>[!VIDEO](https://video.tv.adobe.com/v/29796?quality=12&learn=on)

## 次の手順

これで、クエリエディターで使用できる機能とアプリの操作方法がわかり、開始で独自のクエリを直接Platformで作成できます。 Data Lakeでのデータセットに対するSQLクエリの実行の詳細については、『クエリの [実行に関するガイド][query-service-running-queries]』を参照してください。 AdobeAnalyticsとAdobe Targetデータを使用する場合のSQLクエリの例については、 [サンプルクエリリファレンスを参照してください][query-service-sample-queries]。

[query-service-overview]: ../home.md
[query-service-ui]: overview.md
[query-service-running-queries]: ../creating-queries/creating-queries.md
[query-service-sample-queries]: ../sample-queries/overview.md
[query-service-create-datasets]: ../creating-queries/create-datasets.md
