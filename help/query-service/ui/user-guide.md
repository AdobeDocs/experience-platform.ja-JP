---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: Adobe Experience Platformクエリサービスクエリエディターガイド
topic: query editor
translation-type: tm+mt
source-git-commit: 45da024d45b5eebdfc393ee14890e24aed6021ce

---


# クエリエディターユーザーガイド

クエリエディターは、Adobe Experience Platformクエリサービスが提供するインタラクティブなツールで、Experience Platformユーザーインターフェイス内で顧客エクスペリエンスデータのクエリを作成、検証および実行できます。 クエリエディターは、分析およびデータ調査のためのクエリの開発をサポートし、開発目的でインタラクティブクエリを実行するほか、Experience Platformでデータセットを設定する非インタラクティブクエリを実行できます。

クエリサービスの概念と機能について詳しくは、 [クエリサービスの概要を参照してください][query-service-overview]。 プラットフォーム上でクエリサービスのユーザーインターフェイスを操作する方法について詳しくは、 [クエリサービスのUIの概要を参照してくださ][query-service-ui]い。

## はじめに

クエリエディターは、クエリサービスに接続することでクエリを柔軟に実行でき、クエリはこの接続がアクティブな間のみ実行されます。

### クエリサービスへの接続

クエリエディターを開くと、初期化してクエリサービスに接続するのに数秒かかります。 次に示すように、コンソールは接続された時点を示します。 エディターが接続される前にクエリを実行しようとすると、接続が完了するまで実行が遅れます。

![画像](../images/queries/query-editor-overview/initializing-connection.png)

### クエリエディターからのクエリの実行

クエリエディターからクエリを実行すると、インタラクティブに実行されます。 これは、ブラウザーを閉じたり、別の場所に移動した場合、クエリがキャンセルされることを意味します。 これは、クエリ出力からデータセットを生成するために作成されたクエリにも当てはまります。

## クエリエディターを使用したクエリオーサリング

クエリエディターを使用して、顧客エクスペリエンスデータのクエリを書き込み、実行、保存できます。 クエリエディターで実行または保存されたすべてのクエリは、組織内のユーザーサービスにアクセスできるすべてのクエリで使用できます。

### アクセスクエリエディタ

Experience Platform UIで、左側のナビゲーションメニューの「 **クエリ** 」をクリックして、クエリサービスワークスペースを開きます。 次に、画面の右 **上にある** 「クエリを作成」をクリックして、開始書き込みクエリ このリンクは、クエリサービスワークスペースの任意のページから利用できます。

![画像](../images/queries/query-editor-overview/create-query.png)

### 手書きクエリ

クエリエディターは、書き込みクエリをできるだけ簡単にするように構成されています。 次のスクリーンショットは、UIでのエディターの表示を示し、「再生」ボタンと **SQLエントリ** ・フィールドがハイライト表示されています。

![画像](../images/queries/query-editor-overview/editor.png)

開発時間を最小限に抑えるために、返される行の制限を持つクエリを開発することをお勧めします。 例：`SELECT fields FROM table WHERE conditions LIMIT number_of_rows`。クエリが期待どおりの出力を生成することを確認したら、制限を解除し、クエリを実行して、出 `CREATE TABLE tablename AS SELECT` 力のデータセットを生成します。

### ツールを書き込むクエリエディタ

- **構文の自動ハイライト：** SQLの読み取りと整理を容易にします。

![画像](../images/queries/query-editor-overview/syntax-highlight.png)

- **SQLキーワードのオートコンプリート：** 開始がクエリを入力し、矢印キーを使用して目的のキーワードに移動し、 **Enterキーを押します**。

![画像](../images/queries/query-editor-overview/syntax-auto.png)

- **テーブルとフィールドのオートコンプリート：** 開始が表の名前を入力し `SELECT` 、矢印キーを使用して目的の表に移動し、 **Enterキーを押します**。 テーブルを選択すると、オートコンプリートはテーブル内のフィールドを認識します。

![画像](../images/queries/query-editor-overview/tables-auto.png)

### エラー検出

クエリ・エディタでは、クエリの書き込み時に自動的に検証され、汎用SQL検証と特定の実行検証が提供されます。 （下の画像に示すように）クエリの下に赤い下線が表示される場合は、クエリ内のエラーを表します。

![画像](../images/queries/query-editor-overview/syntax-error-highlight.png)

エラーが検出されたら、SQLコードの上に表示を置くと、特定のエラーメッセージを検出できます。

![画像](../images/queries/query-editor-overview/linting-error.png)

### クエリの詳細

クエリエディターでクエリを表示している間、 *クエリの詳細パネルには* 、選択したクエリを管理するツールが表示されます。

![画像](../images/queries/query-editor-overview/query-details.png)

このパネルでは、UIから直接出力データセットを生成し、表示されたクエリを削除または名前付けし、SQLコードを表示し、「 *SQLクエリ* 」タブで簡単にコピーできる形式で表示できます。 このパネルには、前回のクエリの変更時や、該当する場合は誰が変更したかなど、役に立つメタデータも表示されます。 データセットを生成するには、「出力データセット」 **をクリックしま**&#x200B;す。 出力デー *タセット* (Output Dataset)ダイアログが表示されます。 名前と説明を入力し、「実行クエリ」をク **リックしま**&#x200B;す。 新しいデータセットは、プラットフォームの *クエリ* ・サービス・ユーザー・インターフェイスの「Datasets」タブに表示されます。

### 保存クエリ

クエリエディターには、保存機能が用意されています。この機能を使用すると、クエリを保存し、後で操作することができます。 クエリを保存するには、 **クエリエディタ** の右上隅にある「保存」をクリックします。 クエリを保存する前に、クエリの詳細パネルを使用して名前を指定する *クエリ* 。

### 以前のクエリ

クエリエディターで実行されたすべてのクエリが、ログテーブルに取り込まれます。 「ログ」タブの検索機能を使用して *、* クエリ実行 保存したクエリは「参照」タブに表 *示され* ます。

詳しくは、 [クエリサービスのUIの概要][query-service-ui] （英語）を参照してください。

>[!NOTE] クエリが実行されない場合、ログには保存されません。 クエリをクエリサービスで使用するには、実行するか、またはクエリエディターで保存する必要があります。

## クエリエディターを使用したクエリの実行

クエリエディターでクエリを実行するには、エディターでSQLを入力するか、「ログ」タブまたは「参照」タブから以前の *クエリを読み込み* 、「再 *生」をクリック* します ****。 クエリ実行のステータスは下の「 *Console* 」タブに表示され、出力データは「 *Results* 」タブに表示されます。

### コンソール

コンソールは、クエリサービスの状態と操作に関する情報を提供します。 コンソールには、クエリサービスへの接続状態、実行中のクエリ操作、およびこれらのクエリによるエラーメッセージが表示されます。

![画像](../images/queries/query-editor-overview/console.png)

>[!NOTE] コンソールには、実行によって発生したエラーのみが表示されます。クエリ 実行前のクエリ検証エラーは表示されません。

### クエリ結果

クエリが完了すると、結果が「 *Console* 」タブの横の「Results *」タブに表示され* ます。 この表示は、クエリの表形式の出力を100行まで表示します。 この表示を使用すると、クエリが期待どおりの出力を生成するかを確認できます。 クエリでデータセットを生成するには、返される行の制限を解除し、クエリを実行して出 `CREATE TABLE tablename AS SELECT` 力でデータセットを生成します。 クエリエディタ [ーでデータセットを生成する方法については][query-service-create-datasets] 、「データセットの生成」のチュートリアルを参照してください。

![画像](../images/queries/query-editor-overview/query-results.png)

## 次の手順

これで、クエリエディターで使用できる機能とアプリケーションのナビゲーション方法がわかり、独自のクエリを開始で直接Platformで作成できます。 Data Lakeでのデータセットに対するSQLクエリの実行について詳しくは、実行中のデータセットに関するガイドを参照 [してくださ][query-service-running-queries]い。 Adobe AnalyticsおよびAdobeターゲットデータを使用するSQLクエリのサンプルについては、サンプルのクエリリファレ [ンスを参照してくださ][query-service-sample-queries]い。

[query-service-overview]: ../home.md
[query-service-ui]: overview.md
[query-service-running-queries]: ../creating-queries/creating-queries.md
[query-service-sample-queries]: ../sample-queries/overview.md
[query-service-create-datasets]: ../creating-queries/create-datasets.md
