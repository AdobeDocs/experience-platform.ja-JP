---
title: クエリスケジュール
description: スケジュールされたクエリの実行、クエリのスケジュールの削除または無効化を自動化し、Adobe Experience Platform UI で使用可能なスケジュールオプションを利用する方法について説明します。
exl-id: 984d5ddd-16e8-4a86-80e4-40f51f37a975
source-git-commit: 75ef9c58aa7c5f1cc628d1f13b6c5f56b362458a
workflow-type: tm+mt
source-wordcount: '886'
ht-degree: 53%

---

# クエリスケジュール

クエリスケジュールを作成することで、クエリの実行を自動化できます。 スケジュールされたクエリは、カスタムケイデンスで実行され、頻度、日時に基づいてデータを管理します。 必要に応じて、結果の出力データセットを選択することもできます。 テンプレートとして保存されたクエリは、クエリエディターでスケジュールできます。

>[!IMPORTANT]
>
>既に作成、保存、実行されたクエリにのみスケジュールを追加できます。

スケジュールされたクエリは、 [!UICONTROL スケジュールクエリ] タブをクリックします。 そのワークスペースから、UI を使用して、スケジュールされたすべてのクエリジョブのステータスを監視できます。 の [!UICONTROL スケジュールクエリ] タブでは、クエリの実行に関する重要な情報を確認し、アラートを購読できます。 使用可能な情報には、ステータス、スケジュールの詳細、実行が失敗した場合のエラーメッセージ/コードなどが含まれます。 詳しくは、 [スケジュールクエリドキュメントの監視](./monitor-queries.md) を参照してください。

## クエリスケジュールの作成 {#create-schedule}

クエリにスケジュールを追加するには、「[!UICONTROL テンプレート]」タブまたは「[!UICONTROL スケジュールされたクエリ]」タブからクエリテンプレートを選択して、クエリエディターに移動します。

API を使用してスケジュールを追加する方法について詳しくは、[スケジュールされたクエリのエンドポイントガイド](../api/scheduled-queries.md)を参照してください。

保存したクエリにクエリエディターからアクセスすると、「[!UICONTROL スケジュール]」タブがクエリ名の下に表示されます。「**[!UICONTROL スケジュール]**」を選択します。

![「スケジュール」タブがハイライトされたクエリエディター。](../images/ui/query-schedules/schedules-tab.png)

スケジュールワークスペースが表示されます。「**[!UICONTROL スケジュールを追加]**」を選択して、スケジュールを作成します。

![「スケジュールを追加」がハイライト表示されたクエリエディタースケジュールのワークスペース。](../images/ui/query-schedules/add-schedule.png)

スケジュールの詳細ページが表示されます。このページでは、スケジュールされたクエリの頻度、開始日と終了日、スケジュールされたクエリが実行される曜日およびクエリのエクスポート先のデータセットを選択できます。

![ハイライト表示されたスケジュールの詳細パネル。](../images/ui/query-schedules/schedule-details.png)

**[!UICONTROL 頻度]**&#x200B;では、次のオプションが選択できます。

- **[!UICONTROL 毎時]**：スケジュールされたクエリは、1 時間ごとに、選択した期間で実行されます。
- **[!UICONTROL 毎日]**：スケジュールされたクエリは、 X 日ごとに、選択した時間、期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。
- **[!UICONTROL 毎週]**：選択したクエリは、選択した曜日、時間および期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。
- **[!UICONTROL 毎月]**：選択したクエリは、毎月、選択した日、時間および期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。
- **[!UICONTROL 毎年]**：選択したクエリは、毎年、選択した日、月、時間および期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。

出力データセットには、既存のデータセットを使用するか、新しいデータセットを作成するかのどちらかのオプションがあります。

>[!IMPORTANT]
>
> 既存のデータセットを使用または新しいデータセットを作成する際は、データセットは既に設定されているため、`INSERT INTO` または `CREATE TABLE AS SELECT` をクエリの一部として含める必要は&#x200B;**ありません**。`INSERT INTO` または `CREATE TABLE AS SELECT` をスケジュールされたクエリの一部として含めた場合、エラーが発生します。

パラメーター化されたクエリにアクセスできない場合は、 [スケジュールを削除または無効にする](#delete-schedule) 」セクションに入力します。

### スケジュール済みのパラメーター化クエリのパラメーターを設定する {#set-parameters}

>[!IMPORTANT]
>
>パラメータ化されたクエリ UI 機能は、現在、 **限定リリースのみ** およびは、すべての顧客が利用できるわけではありません。

パラメーター化されたクエリのスケジュール済みクエリを作成する場合は、次に、これらのクエリの実行に対してパラメーター値を設定する必要があります。

![スケジュール作成ワークフローの「スケジュールの詳細」セクション（「クエリパラメーター」セクションがハイライトされています）](../images/ui/query-schedules/scheduled-query-parameter.png)

これらの詳細をすべて確認したら、「**[!UICONTROL 保存]**」を選択して、スケジュールを作成します。スケジュールワークスペースに戻ると、新しく作成したスケジュールの詳細（スケジュール ID、スケジュール自体、スケジュールの出力データセットなど）が表示されます。 スケジュール ID を使用して、スケジュールされたクエリ自体の実行に関する詳細を検索できます。詳しくは、[スケジュールされたクエリ実行エンドポイントガイド](../api/runs-scheduled-queries.md)を参照してください。

![新しく作成されたスケジュールがハイライト表示されたスケジュールワークスペース。](../images/ui/query-schedules/schedules-workspace.png)

## スケジュールを削除または無効にする {#delete-schedule}

特定のクエリのスケジュールワークスペースまたは [!UICONTROL 予定クエリ] すべてのスケジュール済みクエリをリストするワークスペース。

次の手順で [!UICONTROL スケジュール] 選択したクエリの「 」タブで、クエリテンプレートの名前を [!UICONTROL テンプレート] タブまたは [!UICONTROL 予定クエリ] タブをクリックします。 これで、そのクエリのクエリエディターに移動します。 クエリエディターで、「 」を選択します。 **[!UICONTROL スケジュール]** スケジュールワークスペースにアクセスするには

使用可能なスケジュールの行からスケジュールを選択します。切替スイッチを使用して、スケジュールされたクエリを無効または有効にできます。

>[!IMPORTANT]
>
>スケジュールを無効にしてから、クエリのスケジュールを削除する必要があります。

「**[!UICONTROL スケジュールを削除]**」を選択して、無効なスケジュールを削除します。

![「スケジュールを無効にする」と「スケジュールを削除」が強調表示されたスケジュールワークスペース。](../images/ui/query-schedules/delete-schedule.png)

または、 [!UICONTROL 予定クエリ] 「 」タブには、スケジュールされた各クエリのインラインアクションのコレクションが表示されます。 使用可能なインラインアクションには、次のものが含まれます [!UICONTROL スケジュールを無効にする] または [!UICONTROL スケジュールを有効にする], [!UICONTROL スケジュールを削除]、および [!UICONTROL 購読] スケジュール済みクエリに関するアラートを送信します。 「スケジュール済みクエリ」タブでスケジュール済みクエリを削除または無効にする方法について詳しくは、 [スケジュール済みクエリガイドを監視](./monitor-queries.md#inline-actions).
