---
title: クエリスケジュール
description: スケジュールされたクエリの実行、クエリのスケジュールの削除または無効化を自動化し、Adobe Experience Platform UI で使用可能なスケジュールオプションを利用する方法について説明します。
source-git-commit: cde7c99291ec34be811ecf3c85d12fad09bcc373
workflow-type: tm+mt
source-wordcount: '748'
ht-degree: 76%

---

# クエリスケジュール

クエリスケジュールを作成することで、クエリの実行を自動化できます。 スケジュールされたクエリは、カスタムケイデンスで実行され、頻度、日時に基づいてデータを管理します。 必要に応じて、結果の出力データセットを選択することもできます。 テンプレートとして保存されたクエリは、クエリエディターでスケジュールできます。

>[!IMPORTANT]
>
>次に、クエリエディターを使用する場合のスケジュールされたクエリの制限事項を示します。[!DNL Query Service] API には適用されません：<br/>既に作成、保存、実行されたクエリにのみスケジュールを追加できます。<br/>パラメーター化クエリにスケジュールを追加することは&#x200B;**できません**。<br/>スケジュールされたクエリに匿名ブロックを含めることは&#x200B;**できません**。

スケジュールされたクエリは、 [!UICONTROL スケジュールクエリ] タブをクリックします。 そのワークスペースから、UI を使用して、スケジュールされたすべてのクエリジョブのステータスを監視できます。 の [!UICONTROL スケジュールクエリ] タブでは、クエリの実行に関する重要な情報を確認し、アラートを購読できます。 使用可能な情報には、ステータス、スケジュールの詳細、実行が失敗した場合のエラーメッセージ/コードなどが含まれます。 詳しくは、 [スケジュールクエリドキュメントの監視](./monitor-queries.md) を参照してください。

## クエリスケジュールの作成 {#create-schedule}

クエリにスケジュールを追加するには、「[!UICONTROL テンプレート]」タブまたは「[!UICONTROL スケジュールされたクエリ]」タブからクエリテンプレートを選択して、クエリエディターに移動します。

API を使用してスケジュールを追加する方法について詳しくは、[スケジュールされたクエリのエンドポイントガイド](../api/scheduled-queries.md)を参照してください。

保存したクエリにクエリエディターからアクセスすると、「[!UICONTROL スケジュール]」タブがクエリ名の下に表示されます。「**[!UICONTROL スケジュール]**」を選択します。

![「スケジュール」タブがハイライトされたクエリエディター。](../images/ui/query-schedules/schedules-tab.png)

スケジュールワークスペースが表示されます。「**[!UICONTROL スケジュールを追加]**」を選択して、スケジュールを作成します。

![「スケジュールを追加」がハイライト表示されたクエリエディタースケジュールのワークスペース。](../images/ui/query-schedules/add-schedule.png)

スケジュールの詳細ページが表示されます。このページでは、スケジュールされたクエリの頻度、開始日と終了日、スケジュールされたクエリが実行される曜日およびクエリのエクスポート先のデータセットを選択できます。

![ハイライト表示されたスケジュールの詳細パネル。](../images/ui/query-schedules/schedule-details.png)

**[!UICONTROL 頻度]**&#x200B;では、次のオプションが選択できます。

- **[!UICONTROL 毎時]**：スケジュールされたクエリは、1 時間ごとに、選択した期間で実行されます。
- **[!UICONTROL 毎日]**：スケジュールされたクエリは、 X 日ごとに、選択した時間、期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。
- **[!UICONTROL 毎週]**：選択したクエリは、選択した曜日、時間および期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。
- **[!UICONTROL 毎月]**：選択したクエリは、毎月、選択した日、時間および期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。
- **[!UICONTROL 毎年]**：選択したクエリは、毎年、選択した日、月、時間および期間に実行されます。選択した時間は、ローカルタイムゾーンではなく、**UTC**&#x200B;であることに注意してください。

出力データセットには、既存のデータセットを使用するか、新しいデータセットを作成するかのどちらかのオプションがあります。

>[!IMPORTANT]
>
> 既存のデータセットを使用または新しいデータセットを作成する際は、データセットは既に設定されているため、`INSERT INTO` または `CREATE TABLE AS SELECT` をクエリの一部として含める必要は&#x200B;**ありません**。`INSERT INTO` または `CREATE TABLE AS SELECT` をスケジュールされたクエリの一部として含めた場合、エラーが発生します。

これらの詳細をすべて確認したら、「**[!UICONTROL 保存]**」を選択して、スケジュールを作成します。スケジュールワークスペースに戻ると、新しく作成したスケジュールの詳細（スケジュール ID、スケジュール自体、スケジュールの出力データセットなど）が表示されます。 スケジュール ID を使用して、スケジュールされたクエリ自体の実行に関する詳細を検索できます。詳しくは、[スケジュールされたクエリ実行エンドポイントガイド](../api/runs-scheduled-queries.md)を参照してください。

![新しく作成されたスケジュールがハイライト表示されたスケジュールワークスペース。](../images/ui/query-schedules/schedules-workspace.png)

## スケジュールを削除または無効にする {#delete-schedule}

スケジュールワークスペースからスケジュールを削除または無効にできます。「[!UICONTROL テンプレート]」タブまたは「[!UICONTROL スケジュールされたクエリ]」タブからクエリテンプレートを選択してクエリエディターに移動し、「**[!UICONTROL スケジュール]**」を選択してスケジュールワークスペースにアクセスする必要があります。

使用可能なスケジュールの行からスケジュールを選択します。切替スイッチを使用して、スケジュールされたクエリを無効または有効にできます。

>[!IMPORTANT]
>
>スケジュールを無効にしてから、クエリのスケジュールを削除する必要があります。

「**[!UICONTROL スケジュールを削除]**」を選択して、無効なスケジュールを削除します。

![「スケジュールを無効にする」と「スケジュールを削除」が強調表示されたスケジュールワークスペース。](../images/ui/query-schedules/delete-schedule.png)


