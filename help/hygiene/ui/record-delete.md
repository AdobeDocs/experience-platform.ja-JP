---
title: レコード削除リクエスト（UI ワークフロー）
description: Adobe Experience Platform UI でレコードを削除する方法を説明します。
exl-id: 5303905a-9005-483e-9980-f23b3b11b1d9
source-git-commit: a25187339a930f7feab4a1e0059bc9ac09f1a707
workflow-type: tm+mt
source-wordcount: '2420'
ht-degree: 15%

---

# レコード削除リクエスト（UI ワークフロー） {#record-delete}

[[!UICONTROL  データライフサイクル ] ワークスペース ](./overview.md) を使用して、プライマリ ID に基づいてAdobe Experience Platform内のレコードを削除します。 これらのレコードは、個々のコンシューマーまたは ID グラフに含まれるその他のエンティティに関連付けることができます。

>[!IMPORTANT]
>
>レコードの削除は、データクレンジング、匿名データの削除、またはデータの最小化のために使用されます。 これらは、EU 一般データ保護規則（GDPR）などのプライバシー規制に関するデータサブジェクト権利リクエスト（コンプライアンス）に対して使用するためのものでは&#x200B;**ありません**。コンプライアンスに関するユースケースについて詳しくは、[Adobe Experience Platform Privacy Service](../../privacy-service/home.md) を参照してください。

## 前提条件 {#prerequisites}

レコードを削除するには、Experience Platformの ID フィールドがどのように機能するかについての実践的な理解が必要です。 特に、削除元の（1 つまたは複数の）データセットに応じて、レコードを削除するエンティティの ID 名前空間値を把握する必要があります。

Experience Platformの ID について詳しくは、次のドキュメントを参照してください。

* [Adobe Experience Platform ID サービス](../../identity-service/home.md)：デバイスやシステム間で ID をブリッジし、準拠する XDM スキーマで定義された ID フィールドに基づいてデータセットをリンクします。
* [ID 名前空間](../../identity-service/features/namespaces.md)：ID 名前空間は、1 人の人物に関連している可能性のある様々なタイプの ID 情報を定義する、各 ID フィールドに必須のコンポーネントです。
* [ リアルタイム顧客プロファイル ](../../profile/home.md):ID グラフを使用して、ほぼリアルタイムで更新される、複数のソースからの集計データに基づいて統合された消費者プロファイルを提供します。
* [ エクスペリエンスデータモデル（XDM） ](../../xdm/home.md)：スキーマの使用により、Experience Platform データの標準的な定義および構造を提供します。 すべてのExperience Platform データセットは特定の XDM スキーマに準拠しており、スキーマはどのフィールドが ID であるかを定義しています。
* [ID フィールド](../../xdm/ui/fields/identity.md)：XDM スキーマで ID フィールドが定義される方法を説明します。

## リクエストの作成 {#create-request}

プロセスを開始するには、Experience Platform UI の左側のナビゲーションで **[!UICONTROL データライフサイクル]** を選択します。 [!UICONTROL  データライフサイクルリクエスト ] ワークスペースが表示されます。 次に、ワークスペースのメインページから「**[!UICONTROL リクエストを作成]**」を選択します。

![[!UICONTROL  リクエストを作成 ] が選択された [!UICONTROL  データライフサイクルリクエスト ] ワークスペース ](../images/ui/record-delete/create-request-button.png)

リクエスト作成ワークフローが表示されます。 デフォルトでは、「**[!UICONTROL リクエストされたアクション]** セクションで **[!UICONTROL レコードを削除]** オプションが選択されています。 このオプションを選択されたままにします。

>[!IMPORTANT]
> 
>効率を向上させ、データセット操作のコストを削減するために、Delta 形式に移動された組織は、ID サービス、リアルタイム顧客プロファイル、データレイクからデータを削除できます。 このタイプのユーザーは、デルタ移行済みと呼ばれます。 デルタ移行された組織のユーザーは、1 つまたはすべてのデータセットからレコードを削除できます。 次の画像に示すように、デルタ移行を受けていない組織のユーザーが、単一のデータセットまたはすべてのデータセットからレコードを選択的に削除できません。 この場合は、ガイドの [ID の提供 ](#provide-identities) の節に進みます。

![ 「レコードを削除 [!UICONTROL  オプションが選択されハイライト表示され ] リクエスト作成ワークフロー ](../images/ui/record-delete/delete-record.png)

## データセットの選択 {#select-dataset}

次の手順では、単一のデータセットとすべてのデータセットのどちらからレコードを削除するかを決定します。 組織の設定によっては、データセット選択オプションを使用できない場合があります。 このオプションが表示されない場合は、ガイドの [ID の提供 ](#provide-identities) の節に進みます。

「**[!UICONTROL レコードの詳細]**」セクションで、ラジオボタンを選択して、特定のデータセットまたはすべてのデータセットを選択します。

特定のデータセットから削除するには、**[!UICONTROL データセットを選択]** を選択してから、データベースアイコン（![ データベースアイコン ](/help/images/icons/database.png)）を選択します。 表示されるダイアログで、データセットを選択し、「**[!UICONTROL 完了]**」を選択して確定します。

![ データセットが選択され [!UICONTROL  完了 ] がハイライト表示された [!UICONTROL  データセットを選択 ] ダイアログ ](../images/ui/record-delete/select-dataset.png)

すべてのデータセットから削除するには、「**[!UICONTROL すべてのデータセット]**」を選択します。 このオプションを使用すると、操作の範囲が広がり、関連するすべての ID タイプを指定する必要があります。

![ 「[!UICONTROL  すべてのデータセット ] オプションが選択された [!UICONTROL  データセットを選択 ] ダイアログ ](../images/ui/record-delete/all-datasets.png)

>[!WARNING]
>
>**[!UICONTROL すべてのデータセット]** を選択すると、組織内のすべてのデータセットに操作が展開されます。 各データセットは、異なるプライマリ ID タイプを使用する場合があります。 正確な照合を確実に行うために、**すべての必須 ID タイプ** を指定する必要があります。
>
>ID タイプが見つからない場合、削除中に一部のレコードがスキップされる可能性があります。 これにより、処理が遅くなり、**部分的な結果** が生じる可能性があります。

Experience Platformの各データセットでサポートできるプライマリ ID タイプは 1 つだけです。

* **単一データセット** から削除する場合、リクエスト内のすべての ID が **同じタイプ** を使用する必要があります。
* **すべてのデータセット** から削除する場合、データセットが異なるとプライマリ ID が異なる可能性があるので、**複数の ID タイプ** を含めることができます。

## ID を提供 {#provide-identities}

>[!CONTEXTUALHELP]
>id="platform_hygiene_primaryidentity"
>title="ID 名前空間"
>abstract="ID 名前空間は、Experience Platform の消費者のプロファイルにレコードを結び付ける属性です。データセットの ID 名前空間フィールドは、データセットの基になるスキーマによって定義されます。この列には、レコードの ID 名前空間のタイプ（または名前空間）を指定する必要があります（メールアドレスの場合は `email`、Experience Cloud ID の場合は `ecid` など）。詳しくは、データライフサイクル UI ガイドを参照してください。"

>[!CONTEXTUALHELP]
>id="platform_hygiene_identityvalue"
>title="プライマリ ID 値"
>abstract="この列には、レコードの ID 名前空間の値を指定する必要があります（この値は、左側の列で指定した ID タイプに対応している必要があります）。ID 名前空間タイプが `email` の場合、値はレコードのメールアドレスである必要があります。詳しくは、データライフサイクル UI ガイドを参照してください。"

レコードを削除する場合、システムがどのレコードを削除するかを決定できるように、ID 情報を指定する必要があります。 Experience Platformのデータセットの場合、レコードは、データセットのスキーマによって定義された **id 名前空間** フィールドに基づいて削除されます。

Experience Platformのすべての ID フィールドと同様に、ID 名前空間は、**タイプ** （ID 名前空間とも呼ばれる）と **値** の 2 つで構成されます。 ID タイプは、フィールドがどのようにレコードを識別するかについてのコンテキストを提供します（メールアドレスなど）。 値は、そのタイプに対するレコードの特定の ID を表します（例えば、`jdoe@example.com` ID タイプの `email`）。 ID として使用される共通のフィールドには、アカウント情報、デバイス ID および Cookie ID が含まれます。

>[!TIP]
>
>特定のデータセットの ID 名前空間がわからない場合は、Experience Platform UI で見つけることができます。 **[!UICONTROL データセット]**&#x200B;ワークスペースで、リストから問題のデータセットを選択します。データセットの詳細ページの右側のパネルで、データセットのスキーマの名前の上にマウスポインターを置きます。ID 名前空間が、スキーマ名および説明と共に表示されます。
>
>![ データセットが選択されたデータセットダッシュボードに、データセットの詳細パネルからスキーマダイアログが開きます。 データセットのプライマリ ID がハイライト表示されている様子。](../images/ui/record-delete/dataset-primary-identity.png)

レコードを削除する場合、ID を提供するには 2 つのオプションがあります。

* [JSON ファイルのアップロード](#upload-json)
* [プライマリ ID 値を手動で入力](#manual-identity)

### JSON ファイルのアップロード {#upload-json}

JSON ファイルをアップロードするには、ファイルを指定された領域にドラッグ&amp;ドロップするか、「**[!UICONTROL ファイルを選択]**」を選択して、ローカルディレクトリから参照して選択できます。

![JSON ファイルをアップロードするためのファイルを選択してドラッグ&amp;ドロップのインターフェイスがハイライト表示されたリクエスト作成ワークフロー ](../images/ui/record-delete/upload-json.png)

JSON ファイルは、各オブジェクトが ID を表す、オブジェクトの配列としてフォーマットされている必要があります。

```json
[
  {
    "namespaceCode": "email",
    "value": "jdoe@example.com"
  },
  {
    "namespaceCode": "email",
    "value": "san.gray@example.com"
  }
]
```

| プロパティ | 説明 |
| --- | --- |
| `namespaceCode` | ID タイプ。 |
| `value` | タイプで示されるプライマリ ID 値。 |

ファイルがアップロードされると、引き続き[リクエストを送信](#submit)できます。

### ID を手動で入力 {#manual-identity}

ID を手動で入力するには、「**[!UICONTROL ID を追加]**」を選択します。

![ 「[!UICONTROL ID を追加 ] オプションがハイライト表示されたリクエスト作成ワークフロー ](../images/ui/record-delete/add-identity.png)

ID を 1 つずつ入力できるコントロールが表示されます。 **[!UICONTROL ID 名前空間]** で、ドロップダウンメニューを使用して ID タイプを選択します。 「**[!UICONTROL プライマリ ID 値]**」で、レコードの ID 名前空間値を指定します。

![ID フィールドを手動で追加したリクエスト作成ワークフロー ](../images/ui/record-delete/identity-added.png)

さらに ID を追加するには、プラスアイコン（![A プラスアイコン。](/help/images/icons/tree-expand-all.png)）を選択するか、**[!UICONTROL ID を追加]** を選択します。

![ プラスアイコンと ID を追加アイコンがハイライトされたリクエスト作成ワークフロー ](../images/ui/record-delete/more-identities.png)

## 割り当て量と処理タイムライン {#quotas}

レコードの削除リクエストは、組織のライセンス使用権限によって決まる、1 日ごとおよび 1 か月ごとの識別子送信制限の対象です。 これらの制限は、UI ベースの削除リクエストと API ベースの削除リクエストの両方に適用されます。

>[!NOTE]
>
>1 日に最大 **1,000,000 個の識別子を送信できますが** その権限は残りの月別クォータで与えられている場合に限られます。 1 か月の上限が 100 万未満の場合、毎日の送信がその上限を超えることはできません。

### 製品別の月間送信使用権限 {#quota-limits}

次の表に、製品および使用権限レベル別の識別子の送信制限の概要を示します。 各製品の月額上限は、固定の識別子上限またはライセンス取得済みデータボリュームに関連付けられた割合ベースのしきい値の、2 つの値のいずれか小さい方です。

| 製品 | 使用権限の説明 | 月間キャップ （いずれか小さい方） |
|----------|-------------------------|---------------------------------|
| Real-Time CDPまたはAdobe Journey Optimizer | プライバシーとセキュリティシールドまたは Healthcare Shield アドオンなし | 2,000,000 個の識別子（アドレス可能なオーディエンスの 5%） |
| Real-Time CDPまたはAdobe Journey Optimizer | Privacy and Security Shield または Healthcare Shield アドオンを使用 | 15,000,000 個の識別子（アドレス可能なオーディエンスの 10%） |
| Customer Journey Analytics | プライバシーとセキュリティシールドまたは Healthcare Shield アドオンなし | CJAの権利行あたり 2,000,000 の識別子または 1,000 の識別子 |
| Customer Journey Analytics | Privacy and Security Shield または Healthcare Shield アドオンを使用 | CJAの権利行あたり 15,000,000 個の識別子または 2,000 個の識別子 |

>[!NOTE]
>
> ほとんどの組織では、実際のアドレス可能なオーディエンスまたはCJA行の使用権限に基づいて、月間の上限が引き下げられます。

クォータは、毎月 1 日にリセットされます。 未使用の割り当ては引き継がれ **い**。

>[!NOTE]
>
>割り当て量は、組織でライセンスを取得した **送信済み識別子** の月次使用権に基づきます。 これらは、システムガードレールによって適用されるのではなく、監視およびレビューされる可能性があります。
>
>レコード削除は **共有サービス** です。 1 か月の上限には、Real-Time CDP、Adobe Journey Optimizer、Customer Journey Analyticsおよび該当する Shield アドオン全体で最高の使用権限が反映されます。

### 識別子の送信のタイムラインの処理 {#sla-processing-timelines}

送信後、レコードの削除リクエストはキューに入り、使用権限レベルに基づいて処理されます。

| 製品と使用権限の説明 | キューの期間 | 最大処理時間（SLA） |
|------------------------------------------------------------------------------------|---------------------|-------------------------------|
| プライバシーとセキュリティシールドまたは Healthcare Shield アドオンなし | 最長 15 日間 | 30 日 |
| Privacy and Security Shield または Healthcare Shield アドオンを使用 | 通常 24 時間 | 15 日 |

組織でさらに上限が必要な場合は、Adobe担当者に連絡して使用権限のレビューを依頼してください。

>[!TIP]
>
>現在のクォータの使用状況または使用権限層を確認するには、[ クォータのリファレンス ガイド ](../api/quota.md) を参照してください。

## リクエストの送信 {#submit}

リクエストへの ID の追加が完了したら、「**[!UICONTROL 送信]**」を選択する前に&#x200B;**[!UICONTROL リクエスト設定]**&#x200B;でリクエストの名前とオプションの説明を入力します。

>[!TIP]
>
>UI を使用して、1 回のリクエストで最大 10,000 個の ID を送信できます。 より大きなボリューム（リクエストあたり最大 100,000 個の ID）を送信するには、[API メソッド ](../api/workorder.md#create) を使用します。

![ リクエスト設定の [!UICONTROL  名前 ] フィールドと [!UICONTROL  説明 ] フィールドは「[!UICONTROL  送信 ] がハイライト表示されています。](../images/ui/record-delete/submit.png)

ID が削除されると復元できないことを示す [!UICONTROL  リクエストを確認 ] ダイアログが表示されます。 「**[!UICONTROL 送信]**」を選択して、データを削除する ID のリストを確定します。

![[!UICONTROL  リクエストを確認 ] ダイアログ ](../images/ui/record-delete/confirm-request.png)

リクエストが送信されると、作業指示が作成され、「データライフサイクル [!UICONTROL  ワークスペースの ] レコード [!UICONTROL  タブに表示さ ] ます。 ここから、リクエストを処理する作業指示のステータスを監視できます。

>[!NOTE]
>
>レコードの削除が実行されるとどのように処理されるかの詳細については、[ タイムラインと透明性 ](../home.md#record-delete-transparency) の概要に関する節を参照してください。

![ 新しいリクエストがハイライト表示された [!UICONTROL  データライフサイクル ] ワークスペースの「[!UICONTROL  レコード ]」タブ。](../images/ui/record-delete/request-log.png)

## モデルベースのデータセットからのレコードの削除 {#model-based-record-delete}

削除するデータセットがモデルベースのスキーマの場合は、次の考慮事項を確認して、レコードが正しく削除され、Experience Platformとソースシステム間の不一致が原因で再取り込みされないようにします。

### レコードの削除動作

次の表に、取り込み方法と change data capture configuration に応じて、Experience Platformとソースシステム間でレコード削除がどのように動作するかを示します。

| アスペクト | 動作 |
|---------------------|--------------------------------------------------------------------------|
| プラットフォームの削除 | レコードがExperience Platform データセットとデータレイクから削除されます。 |
| Sourceの定着 | レコードは、明示的に削除されない限り、ソースシステムに残ります。 |
| 完全更新の影響 | 完全更新を使用すると、削除されたレコードは、ソースから削除または除外されない限り、再取り込みされる場合があります。 |
| データ取得動作の変更 | `_change_request_type = 'd'` でフラグ付けされたレコードは、取り込み中に削除されます。 フラグが設定されていないレコードは再度取り込まれる場合があります。 |

再取り込みを防ぐには、ソースシステムとExperience Platformの両方で同じ削除方法を適用します。つまり、両方のシステムからレコードを削除するか、削除するレコードの `_change_request_type = 'd'` を含めます。

### データ取得および制御列の変更

Change Data Capture でソースを使用するモデルベースのスキーマでは、削除とアップサートを区別するときに `_change_request_type` コントロール列を使用できます。 取り込み中に、`d` のフラグが設定されたレコードはデータセットから削除され、`u` のフラグが設定されたレコードや列がないレコードはアップサートとして扱われます。 `_change_request_type` 列は取り込み時にのみ読み取られ、ターゲットスキーマに保存されたり、XDM フィールドにマッピングされたりすることはありません。

>[!NOTE]
>
>データライフサイクル UI を使用してレコードを削除しても、ソースシステムには影響しません。 両方の場所からデータを削除するには、Experience Platformとソースの両方でデータを削除します。

### モデルベースのスキーマに対する追加の削除方法

標準のレコード削除ワークフローに加えて、モデルベースのスキーマでは、特定のユースケースに対して追加の方法をサポートします。

* **データセットセーフコピーアプローチ**：実稼動データセットを複製し、実稼動データに変更を適用する前に、制御されたテストまたは紐付けのための削除をコピーに適用します。
* **削除のみのバッチアップロード**：他のデータに影響を与えずに特定のレコードを削除する必要がある場合は、ターゲットハイジーンに対する削除操作のみを含むファイルをアップロードします。

### ハイジーン操作に対する記述子のサポート {#descriptor-support}

モデルベースのスキーマ記述子は、正確なハイジーン操作に不可欠なメタデータを提供します。

* **プライマリキー記述子**: ターゲットの更新または削除でレコードを一意に識別し、正しいレコードが影響を受けることを確認します。
* **バージョン記述子**：削除と更新が正しい時系列順に適用され、順序が正しくない操作が防がれます。
* **タイムスタンプ記述子（時系列スキーマ）**：削除操作を、取り込み時間ではなく、イベントの発生時間に合わせます。

>[!NOTE]
>
>ハイジーンプロセスは、データセットレベルで機能します。 プロファイルが有効なデータセットの場合、リアルタイム顧客プロファイル間の一貫性を維持するために、追加のプロファイルワークフローが必要になる場合があります。

### モデルベースのスキーマ用にスケジュールされた保存

特定の ID ではなくデータ年齢に基づく自動ハイジーンについては、データレイクのスケジュールされた行レベルの保持に対する [ エクスペリエンスイベントデータセット保持（TTL）の管理 ](../../catalog/datasets/experience-event-dataset-retention-ttl-guide.md) を参照してください。

>[!NOTE]
>
>行レベルの有効期限は、時系列の動作を使用するデータセットに対してのみサポートされます。

### モデルベースのレコード削除のベストプラクティス

意図しない再取り込みを避け、システム間でデータの一貫性を維持するには、次のベストプラクティスに従います。

* **削除の調整**：レコードの削除を、変更データ取得設定とソースデータ管理戦略に合わせます。
* **変更データキャプチャフローの監視**:Platform でレコードを削除した後、データフローを監視し、ソースシステムが同じレコードを削除するか、`_change_request_type = 'd'` ータと共に含めることを確認します。
* **ソースのクリーンアップ**：完全な更新の取り込みを使用しているソースや、変更データ取得による削除をサポートしていないソースの場合、再取り込みを避けるためにソースシステムから直接レコードを削除します。

スキーマ要件について詳しくは、「[ モデルベースのスキーマ記述子の要件 ](../../xdm/schema/model-based.md#model-based-schemas)」を参照してください。\
Change Data Capture がソースと連携する方法については、[ ソースでの Change Data Capture の有効化 ](../../sources/tutorials/api/change-data-capture.md#using-change-data-capture-with-model-based-schemas) を参照してください。

## 次の手順

このドキュメントでは、Experience Platform UI でレコードを削除する方法について説明しました。 UI で他のデータライフサイクル管理タスクを実行する方法について詳しくは、[ データライフサイクル UI の概要 ](./overview.md) を参照してください。

Data Hygiene API を使用したレコードの削除方法については、[ 作業指示エンドポイントガイド ](../api/workorder.md) を参照してください。
