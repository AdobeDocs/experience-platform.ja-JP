---
title: ID グラフリンクルールの概要
description: Id サービスでの ID グラフリンクルールについて説明します。
badge: ベータ版
exl-id: 317df52a-d3ae-4c21-bcac-802dceed4e53
source-git-commit: 72773f9ba5de4387c631bd1aa0c4e76b74e5f1dc
workflow-type: tm+mt
source-wordcount: '1173'
ht-degree: 1%

---

# ID グラフリンクルールの概要

>[!AVAILABILITY]
>
>この機能はまだ使用できません。ID グラフリンクルールのベータ版プログラムは、開発用サンドボックスで 7 月に開始される予定です。 パーティシペーションの条件については、Adobeアカウントチームにお問い合わせください。

## 目次 

* [概要](./overview.md)
* [ID 最適化アルゴリズム](./identity-optimization-algorithm.md)
* [サンプルシナリオ](./example-scenarios.md)

Adobe Experience Platform ID サービスとリアルタイム顧客プロファイルを使用すると、データが完全に取り込まれ、結合されたすべてのプロファイルが、CRM ID などの人物識別子を使用して 1 人の個人を表すと簡単に想定できます。 ただし、特定のデータが複数の異なるプロファイルを 1 つのプロファイルに結合しようとする可能性があるシナリオがあります（「グラフ折りたたみ」）。 これらの不要な結合を防ぐために、ID グラフリンクルールを通じて提供される設定を使用し、ユーザーに対して正確なパーソナライゼーションを可能にします。

## グラフの折りたたみが発生する可能性があるシナリオの例

* **共有デバイス**：共有デバイスとは、複数のユーザーが使用するデバイスを指します。 共有デバイスの例としては、タブレット、図書館のコンピューター、キオスクなどがあります。
* **不正なメールおよび電話番号**：不正なメールおよび電話番号は、エンドユーザーが無効な連絡先情報（メールの場合は「test<span>@test.com」、電話番号の場合は「+1-111-111-111-1111」など）を登録したことを示します。
* **エラーまたは不正な ID 値**：エラーまたは不正な ID 値は、CRM ID を結合する可能性のある、一意でない ID 値を参照します。 例えば、IDFA には 36 文字（英数字 32 文字、ハイフン 4 つ）が必要ですが、ID 値が「user_null」の IDFA が取り込まれる場合があります。 同様に、電話番号は数字のみをサポートしますが、ID 値が「指定なし」の電話名前空間が取り込まれる場合があります。

ID グラフリンクルールのユースケースシナリオについて詳しくは、[ シナリオの例 ](./example-scenarios.md) のドキュメントを参照してください。

## ID グラフリンクルール {#identity-graph-linking-rules}

ID グラフリンクルールを使用すると、次のことができます。

* 一意の名前空間を設定することで、各ユーザーに対して単一の ID グラフ/結合プロファイルを作成します。これにより、2 つの異なる人物 ID が 1 つの ID グラフに結合するのを防ぎます。
* 優先度を設定して、オンラインの認証済みイベントをその人物に関連付けます

### 用語 {#terminology}

| 用語 | 説明 |
| --- | --- |
| 一意の名前空間 | 一意の名前空間は、ID グラフのコンテキスト内で異なるように設定された ID 名前空間です。 UI を使用して、一意の名前空間を設定できます。 名前空間が一意と定義されると、グラフには、その名前空間を含む ID を 1 つだけ割り当てることができます。 |
| 名前空間の優先度 | 名前空間の優先度とは、名前空間の相対的な重要度を指します。 名前空間の優先度は、UI を通じて設定できます。 特定の ID グラフ内の名前空間をランク付けできます。 有効にすると、ID 最適化アルゴリズムの入力やエクスペリエンスイベントフラグメントのプライマリ ID の決定など、様々なシナリオで名前の優先度が使用されます。 |
| ID 最適化アルゴリズム | ID 最適化アルゴリズムは、一意の名前空間と名前空間の優先順位を設定することで作成されたガイドラインが、特定の ID グラフで適用されるようにします。 |

### 一意の名前空間 {#unique-namespace}

ID 設定 UI ワークスペースを使用して、一意の名前空間を設定できます。 これにより、は、特定のグラフが、その一意の名前空間を含む ID を 1 つだけ持つ可能性があることを ID 最適化アルゴリズムに通知します。 これにより、同じグラフ内で 2 つの異なる人物識別子が結合されるのを防ぎます。

次のシナリオについて考えてみます。

* スコットはタブレットを使用し、GoogleChromeのブラウザーを開いて nike<span>.com にアクセスし、そこでサインインして新しいバスケットボールの靴を閲覧します。
   * このシナリオでは、バックグラウンドで次の ID がログに記録されます。
      * ブラウザーの使用を表す ECID 名前空間および値
      * 認証済みユーザー（Scott がユーザー名とパスワードの組み合わせでサインイン）を表す CRM ID 名前空間と値。
* その後、息子のピーターは同じタブレットを使用し、Google Chromeも使用して nike<span>.com にアクセスし、そこでサッカー用品を参照するために自分のアカウントでサインインします。
   * このシナリオでは、バックグラウンドで次の ID がログに記録されます。
      * ブラウザーを表すための同じ ECID 名前空間および値。
      * 認証済みユーザーを表す新しい CRM ID 名前空間および値。

CRM ID が一意の名前空間として設定されている場合、ID 最適化アルゴリズムは、CRM ID を結合する代わりに、2 つの異なる ID グラフに分割します。

一意の名前空間を設定しないと、同じ CRM ID 名前空間を持つが、ID 値が異なる 2 つの ID など、不要なグラフ結合が発生する場合があります（このようなシナリオは、多くの場合、同じグラフ内の 2 つの異なる人物エンティティを表します）。

ID 最適化アルゴリズムに通知する一意の名前空間を設定して、特定の ID グラフに取り込まれる ID データに制限を適用する必要があります。

### 名前空間の優先度 {#namespace-priority}

名前空間の優先度とは、名前空間の相対的な重要度を指します。 名前空間の優先順位は UI を通じて設定でき、特定の ID グラフで名前空間をランク付けできます。

名前空間の優先度を使用する 1 つの方法は、リアルタイム顧客プロファイルでエクスペリエンスイベントフラグメントのプライマリ ID （ユーザー行動）を決定することです。 優先度設定が設定されている場合、どのプロファイルフラグメントが保存されるかを決定する際に、Web SDK のプライマリ ID 設定は使用されなくなります。

一意の名前空間と名前空間の優先度は、どちらも ID 設定 UI ワークスペースで設定できます。 ただし、設定の影響は次のように異なります。

| | ID サービス | リアルタイム顧客プロファイル |
| --- | --- | --- |
| 一意の名前空間 | ID サービスでは、ID 最適化アルゴリズムは一意の名前空間を参照し、特定の ID グラフに取り込まれる ID データを決定します。 | 一意の名前空間は、リアルタイム顧客プロファイルには影響しません。 |
| 名前空間の優先度 | ID サービスでは、複数のレイヤーを持つグラフの場合、名前空間の優先度によって適切なリンクが削除されたことが判断されます。 | エクスペリエンスイベントがプロファイルに取り込まれると、優先度が最も高い名前空間がプロファイルフラグメントのプライマリ ID になります。 |

* グラフあたり 50 個の ID の制限に達した場合、名前空間の優先度はグラフの動作に影響しません。
* **名前空間の優先度は数値です** 名前空間の相対的な重要度を示す名前空間に割り当てられます。 これは、名前空間のプロパティです。
* **プライマリ ID は、** に対してプロファイルフラグメントが保存される ID です。 プロファイルフラグメントは、特定のユーザーに関する情報を格納するデータのレコードです。属性（通常は CRM レコードを介して取り込まれる）またはイベント （通常はエクスペリエンスイベントまたはオンラインデータから取り込まれる）です。
* 名前空間の優先度は、エクスペリエンスイベントフラグメントのプライマリ ID を決定します。
   * プロファイルレコードの場合、Experience PlatformUI のスキーマ ワークスペースを使用して、プライマリ ID などの ID フィールドを定義できます。 詳しくは、[UI での ID フィールドの定義 ](../../xdm/ui/fields/identity.md) に関するガイドを参照してください。
* エクスペリエンスイベントに、identityMap で最も名前空間の優先順位が高い 2 つ以上の ID がある場合、そのイベントは「無効なデータ」と見なされるので、取り込みから拒否されます。 例えば、identityMap に `{ECID: 111, CRMID: John, CRMID: Jane}` が含まれている場合、イベントが `CRMID: John` と `CRMID: Jane` の両方に同時に関連付けられていることを意味するので、イベント全体が不正なデータとして拒否されます。

詳しくは、[ 名前空間の優先度 ](./namespace-priority.md) に関するガイドを参照してください。

## 次の手順

ID グラフリンクルールについて詳しくは、次のドキュメントを参照してください。

* [ID 最適化アルゴリズム ](./identity-optimization-algorithm.md)。
* [ 名前空間の優先度 ](./namespace-priority.md)。
* [ID グラフリンクルールを設定するシナリオの例 ](./example-scenarios.md)。
