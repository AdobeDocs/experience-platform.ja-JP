---
title: ID グラフリンクルールの概要
description: ID サービスの ID グラフリンクルールについて説明します。
hide: true
hidefromtoc: true
badge: アルファ版
exl-id: 317df52a-d3ae-4c21-bcac-802dceed4e53
source-git-commit: 308d07cf0c3b4096ca934a9008a13bf425dc30b6
workflow-type: tm+mt
source-wordcount: '916'
ht-degree: 1%

---

# ID グラフリンクルールの概要

>[!IMPORTANT]
>
>ID グラフのリンクルールは、現在Alpha中です。 機能とドキュメントは変更される場合があります。

## 目次 

* [概要](./overview.md)
* [シナリオの例](./example-scenarios.md)
* [ID サービスとリアルタイム顧客プロファイル](identity-and-profile.md)
* [ID リンクロジック](./identity-linking-logic.md)

Adobe Experience Platform ID サービスとリアルタイム顧客プロファイルを使用すると、データが完全に取り込まれ、すべての結合プロファイルが、CRM ID などの個人 ID を通じて 1 人の個人を表していると簡単に想定できます。 ただし、特定のデータが複数の異なるプロファイルを 1 つのプロファイルに結合しようとするシナリオが考えられます（「プロファイルの折りたたみ」）。 これらの不要な結合を防ぐには、ID グラフのリンクルールを通じて提供される設定を使用し、ユーザーに対する正確なパーソナライゼーションを可能にします。

## プロファイルの折りたたみが発生する可能性のあるシナリオの例

* **共有デバイス**：共有デバイスは、複数の個人が使用するデバイスを指します。 共有デバイスの例としては、タブレット、ライブラリコンピューター、キオスクなどがあります。
* **無効なメールと電話番号**：無効な電子メールおよび電話番号は、エンドユーザーが「test」などの無効な連絡先情報を登録していることを意味します<span>電子メールの場合は@test.com、電話番号の場合は&quot;+1-111-111-1111&quot;です。
* **ID 値に誤りがあるか無効です**：誤った ID 値または正しくない ID 値は、CRM ID を結合する可能性のある一意でない ID 値を参照します。 例えば、IDFA の文字には 36 文字（32 文字と 4 つのハイフン）が必要ですが、ID 値が「user_null」の IDFA を取り込むことができるシナリオがあります。 同様に、電話番号は数字のみをサポートしますが、ID 値が「未指定」の電話名前空間が取り込まれる場合があります。

ID グラフのリンクルールの使用例のシナリオの詳細については、 [シナリオの例](./example-scenarios.md).

## ID グラフリンクルールの目的

ID グラフのリンクルールを使用すると、次のことができます。

* 1 つの ID グラフが 1 人の個人のみを表すように、2 つの異なるユーザー ID が 1 つの ID グラフに結合されないように制限を設定します。
   * 設定した制限は、ID 最適化アルゴリズムによって適用されます。
* 認証済みの個人が実行するオンラインイベントを特定のユーザーに関連付けるように、優先度を設定します。

### 制限

名前空間の制限を使用して、特定の名前空間に基づいて、グラフに存在できる ID の最大数を定義できます。 例えば、グラフに CRM ID 名前空間と最大 1 つの ID のみを設定して、同じグラフ内で 2 つの異なる個人 ID を結合できないようにすることができます。

* 制限を設定しない場合、グラフ内の CRM ID 名前空間を持つ 2 つの ID など、望ましくないグラフ結合が発生する可能性があります。
* 制限を設定しない場合、グラフがガードレール内にある限り（50 個の ID/グラフ）、グラフは必要な数の名前空間を追加できます。
* 制限が設定されている場合、ID 最適化アルゴリズムは、制限が確実に適用されるようにします。

### ID 最適化アルゴリズム

ID 最適化アルゴリズムは、制限が適用されることを確認するルールです。 アルゴリズムは、最新のリンクに従い、最も古いリンクを削除して、特定のグラフが定義した制限内に確実に収まるようにします。

匿名イベントと既知の識別子の関連付けに関するアルゴリズムの影響を以下に示します。

* 次の条件を満たす場合、ECID は最後に認証されたユーザーに関連付けられます。
   * CRM ID が ECID（共有デバイス）で結合される場合。
   * 制限が 1 つの CRM ID のみに設定されている場合。

### 優先度

>[!IMPORTANT]
>
>名前空間の優先度は、現在、アルファには使用できません。

名前空間の優先度を使用して、他の名前空間よりも重要な名前空間を定義できます。 名前空間に設定した階層は、プライマリ ID を定義し、プロファイルフラグメントを保存するために使用されます。 優先度設定が設定されている場合、Web SDK のプライマリ ID 設定を使用して、保存するプロファイルフラグメントを決定できなくなります。

* 制限と優先度は独立した設定で、実行します。 **not** お互いに影響し合う：
   * 制限は、ID サービスの ID グラフ設定です。
   * 優先度は、リアルタイム顧客プロファイルのプロファイルフラグメント設定です。
   * 優先度が **not** id グラフシステムのガードレールに影響を与えます。

>[!BEGINSHADEBOX]

**名前空間の優先度の例**

名前空間に次の優先度を設定したとします。

1. CRM ID：ユーザーを表します。
2. IDFA: iPhoneやiPadなどのAppleハードウェアデバイスを表します。
3. GAID:Google Pixel などのGoogleハードウェアデバイスを表します。
4. ECID:Firefox、Safari、Chrome などの Web ブラウザーを表します。
5. AAID:Web ブラウザーを表します。
ECID と AAID が同時に送信される場合、両方の ID は同じ Web ブラウザー（重複）を表します。

次のエクスペリエンスイベントがExperience Platformに取り込まれると、プロファイルフラグメントはより優先度の高い名前空間に対して保存されます。

**認証済みイベント：**

* ID マップに ECID、GAID、CRM ID が含まれる場合、イベント情報は CRM ID（プライマリ ID）に対して保存されます。
   * GAID はGoogleハードウェアデバイス ( 例：Google Pixel)、ECID は Web ブラウザー ( 例：Google Chrome)、CRM ID は認証済みユーザーを表します。
   * ID マップに CRM ID、ECID および AAID が含まれる場合、イベント情報は CRM ID（プライマリ ID）に対して保存されます。

**未認証イベント：**

* ID マップに ECID、IDFA および AAID が含まれている場合、イベント情報は IDFA（プライマリ ID）に対して保存されます。
   * IDFA はAppleハードウェアデバイス (iPhoneなど ) を表し、ECID と AAID は共に Web ブラウザー (Safari) を表します。

>[!ENDSHADEBOX]

## 次の手順

ID グラフのリンクルールの詳細については、次のドキュメントを参照してください。

* [ID グラフのリンクルールの設定例](./example-scenarios.md)
* [ID サービスとリアルタイム顧客プロファイル](identity-and-profile.md)
* [ID リンクロジック](./identity-linking-logic.md)
