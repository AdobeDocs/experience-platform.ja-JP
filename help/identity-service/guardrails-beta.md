---
title: ID サービスの Guardrail（削除ロジックを含む）
description: ID サービスのガードレールについて説明します。
hide: true
hidefromtoc: true
source-git-commit: db8edbbc3ea5d8fcec3de95b9a37387bea493693
workflow-type: tm+mt
source-wordcount: '796'
ht-degree: 9%

---

# のガードレール [!DNL Identity Service] データ（削除ロジックを含む）

このドキュメントでは、の使用とレート制限に関する情報を提供します。 [!DNL Identity Service] id グラフの使用を最適化するのに役立つデータです。 次のガードレールを確認する際は、データが正しくモデル化されていることが前提になっています。データのモデル化方法に関するご質問は、カスタマーサービス担当者にお問い合わせください。

## Destination SDK の

次のExperience Platformサービスは、ID データのモデリングに関係します。

* [ID](home.md)：Platform に取り込まれる際に、異なるデータソースからの ID を結び付けます。
* [[!DNL Real-Time Customer Profile]](../profile/home.md)：複数のソースからのデータを使用して、統合された消費者プロファイルを作成します。

## データモデルの上限

次の表は、静的制限のガードレールと、ID 名前空間で考慮する検証ルールに関するガイダンスを示しています。

### 静的制限

次の表に、ID データに適用される静的制限の概要を示します。

| ガードレール | 上限 | メモ |
| --- | --- | --- |
| グラフ内の ID の数 [!BADGE ベータ版]{type=Informative} | 50 | 50 個のリンクされた ID を持つグラフが更新されると、ID サービスは、「先入れ先出し」メカニズムを適用し、最も古い ID を削除して、最新の ID の領域を作成します。 削除は、ID タイプとタイムスタンプに基づいておこなわれます。 制限は、サンドボックスレベルで適用されます。 詳しくは、 [付録](#appendix) を参照して、ID サービスが制限に達した後に id を削除する方法について確認してください。 |
| XDM レコード内の ID の数 | 20 | 必要な XDM レコードの最小数は 2 です。 |
| カスタム名前空間の数 | なし | 作成できるカスタム名前空間の数に制限はありません。 |
| グラフの数 | なし | 作成できる ID グラフの数に制限はありません。 |
| 名前空間の表示名または ID 記号の文字数 | なし | 名前空間の表示名または ID 記号の文字数に制限はありません。 |

### ID 値の検証

次の表に、ID 値の検証を成功させるために従う必要がある既存のルールの概要を示します。

| 名前空間 | 検証ルール | ルール違反時のシステム動作 |
| --- | --- | --- |
| ECID | <ul><li>ECID の ID 値は 38 文字にする必要があります。</li><li>ECID の ID 値は、数字のみで構成する必要があります。</li></ul> | <ul><li>ECID の ID 値が 38 文字以外の場合、レコードはスキップされます。</li><li>ECID の ID 値に数字以外の文字が含まれている場合、レコードはスキップされます。</li></ul> |
| 非 ECID | ID 値は 1024 文字を超えることはできません。 | ID 値が 1024 文字を超える場合、レコードはスキップされます。 |

### ID 名前空間の取り込み

2023 年 3 月 31 日以降、ID サービスは、新規のお客様向けにAdobe Analytics ID(AAID) の取り込みをブロックします。 この ID は、通常、 [Adobe Analyticsソース](../sources/connectors/adobe-applications/analytics.md) そして [Adobe Audience Managerソース](../sources//connectors/adobe-applications/audience-manager.md) とは冗長です。ECID は同じ Web ブラウザーを表すからです。 このデフォルト設定を変更する場合は、Adobeアカウントチームにお問い合わせください。

## 次の手順

詳しくは、次のドキュメントを参照してください。 [!DNL Identity Service]:

* [[!DNL Identity Service] の概要](home.md)
* [ID グラフビューア](ui/identity-graph-viewer.md)

## 付録 {#appendix}

次の節では、ID サービスのガードレールに関する追加情報を示します。

### [!BADGE ベータ版]{type=Informative} 容量の ID グラフが更新された場合の削除ロジックについて {#deletion-logic}

完全な ID グラフが更新されると、ID サービスは、最新の ID を追加する前に、グラフ内の最も古い ID を削除します。 これは、ID データの正確性と関連性を維持するためです。 この削除プロセスは、次の 2 つの主なルールに従います。

#### ルール#1削除は、名前空間の ID タイプに基づいて優先付けされます

削除の優先順位は次のとおりです。

1. Cookie ID
2. デバイス ID
3. クロスデバイス ID、電子メール、電話

#### ルール#2削除は、ID に保存されたタイムスタンプに基づいておこなわれます

グラフ内でリンクされる各 ID には、対応する独自のタイムスタンプがあります。 完全なグラフが更新されると、ID サービスは最も古いタイムスタンプを持つ ID を削除します。

フルグラフが新しい ID で更新されると、これら 2 つのルールが連携して、削除される古い ID を指定します。 ID サービスは、最初に最も古い Cookie ID を削除し、次に最も古いデバイス ID を削除し、最後に最も古いクロスデバイス ID/電子メール/電話を削除します。

>[!NOTE]
>
>削除するように指定された ID がグラフ内の他の複数の ID にリンクされている場合、その ID を接続するリンクも削除されます。

以下の例では、左側のグラフを新しい ID で更新する前に、ID サービスは、最も古いタイムスタンプを持つ既存の ID を削除する必要があります。 ただし、最も古い ID はデバイス ID なので、ID サービスは、削除の優先順位リストの上位のタイプの名前空間に到達するまで、その ID をスキップします ( この場合は、 `ecid-3`. 削除の優先度の高い最も古い ID が削除されると、グラフは新しいリンクで更新されます。 `ecid-51`.

>[!NOTE]
>
>まれに、タイムスタンプと ID タイプが同じ 2 つの ID がある場合、ID サービスは XID に基づいて ID を並べ替え、削除を実行します。

![最新の ID に対応するために削除される最も古い ID の例](./images/graph-limits-v3.png)