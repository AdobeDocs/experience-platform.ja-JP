---
title: UI を使用した、Snowflake データベースからExperience Platformへのデータのストリーミング
description: Snwoflake データベースからExperience Platformにデータをストリーミングする方法を説明します
exl-id: 49d488f1-90d8-452a-9f3e-02afdcc79b09
source-git-commit: 04a1cecbacdaf0b701d3ef18d03497973a8f3263
workflow-type: tm+mt
source-wordcount: '1648'
ht-degree: 16%

---

# UI を使用した、[!DNL Snowflake] データベースからExperience Platformへのデータのストリーミング

ユーザーインターフェイスを使用して [!DNL Snowflake] データベースからAdobe Experience Platformにデータをストリーミングする方法については、このガイドに従ってください。

## 基本を学ぶ

このチュートリアルは、 Experience Platform の次のコンポーネントを実際に利用および理解しているユーザーを対象としています。

* [[!DNL Experience Data Model (XDM)]  システム](../../../../../xdm/home.md)：[!DNL Experience Platform] が顧客体験データの整理に使用する標準化されたフレームワーク。
   * [スキーマ構成の基本](../../../../../xdm/schema/composition.md)：スキーマ構成の主要な原則やベストプラクティスなど、XDM スキーマの基本的な構成要素について学びます。
   * [スキーマエディターのチュートリアル](../../../../../xdm/tutorials/create-schema-ui.md)：スキーマエディター UI を使用してカスタムスキーマを作成する方法を説明します。
* [[!DNL Real-Time Customer Profile]](../../../../../profile/home.md)：複数のソースからの集計データに基づいて、統合されたリアルタイムの顧客プロファイルを提供します。

### 認証

[!DNL Snowflake] からExperience Platformにストリーミングデータを取り込む前に実行する必要がある手順については、[ ストリーミングデータの前提条件の設定 ](../../../../connectors/databases/snowflake-streaming.md) に関するガイドを参照して  [!DNL Snowflake]  ださい。

## [!DNL Snowflake Streaming] ソースを使用したExperience Platformへ [!DNL Snowflake] データのストリーミング

Experience Platformの UI で、左側のナビゲーションから **[!UICONTROL Sources]** を選択し、[!UICONTROL Sources] ワークスペースにアクセスします。 画面の左側にあるカタログから適切なカテゴリを選択することができます。または、使用する特定のソースを検索オプションを使用して探すこともできます。

*Databases* カテゴリの下の [**[!DNL Snowflake Streaming]**] を選択し、[**[!UICONTROL Add data]**] を選択します。

>[!TIP]
>
>ソースカタログ内に認証済みアカウントを持たないソースには、「**[!UICONTROL 設定]**」オプションが表示されます。 認証済みアカウントが存在すると、このオプションは **[!UICONTROL データを追加]** に変わります。

![Experience Platform UI のソースカタログで、Snowflake ストリーミングソースカードが選択されています。](../../../../images/tutorials/create/snowflake-streaming/catalog.png)

**[!UICONTROL Snowflake ストリーミングアカウントを接続]** ページが表示されます。 このページでは、新しい資格情報または既存の資格情報を使用できます。

>[!BEGINTABS]

>[!TAB  新規アカウントの作成 ]

新しいアカウントを作成するには、「**[!UICONTROL 新しいアカウント]**」を選択し、名前、説明（オプション）、の資格情報を入力します。

終了したら「**[!UICONTROL ソースに接続]**」を選択し、新しい接続が確立されるまでしばらく待ちます。

![ ソースワークフローの新しいアカウント作成インターフェイス ](../../../../images/tutorials/create/snowflake-streaming/new.png)

| 資格情報 | 説明 |
| --- | --- |
| アカウント | [!DNL Snowflake] アカウントの名前。 アカウント名の規則については、[[!DNL Snowflake Streaming]  認証ガイド ](../../../../connectors/databases/snowflake-streaming.md#gather-required-credentials) を参照してください。 |
| ウェアハウス | [!DNL Snowflake] ウェアハウスの名前。 ウェアハウスは、[!DNL Snowflake] でのクエリの実行を管理します。 各 [!DNL Snowflake] ウェアハウスは互いに独立しており、データをExperience Platformに取り込むには、個別にアクセスする必要があります。 |
| データベース | [!DNL Snowflake] データベースの名前。 データベースには、Experience Platformに取り込むデータが含まれています。 |
| スキーマ | （オプション） [!DNL Snowflake] アカウントに関連付けられたデータベーススキーマ。 |
| ユーザー名 | [!DNL Snowflake] アカウントのユーザー名。 |
| パスワード | [!DNL Snowflake] アカウントのパスワード。 |
| 役割 | （オプション）特定の接続についてユーザーに提供できる、カスタムで定義された役割。 指定しない場合、この値はデフォルトで `public` になります。 |

アカウントの作成について詳しくは、[!DNL Snowflake Streaming] の概要の [ 役割の設定 ](../../../../connectors/databases/snowflake-streaming.md#configure-role-settings) の節を参照してください。

>[!TAB  既存のアカウントを使用 ]

既存のアカウントを使用するには、「**[!UICONTROL 既存のアカウント]**」を選択し、既存のアカウントカタログから目的のアカウントを選択します。

「**[!UICONTROL 次へ]**」を選択して次に進みます。

![ ソースカタログの既存のアカウント選択ページ ](../../../../images/tutorials/create/snowflake-streaming/existing.png)

>[!ENDTABS]

## データの選択 {#select-data}

>[!IMPORTANT]
>
>* ストリーミングデータフローを作成するには、ソーステーブルにタイムスタンプ列が存在する必要があります。 タイムスタンプは、Experience Platformがデータを取り込むタイミングと増分データをストリーミングするタイミングを把握するために必要です。 既存の接続のタイムスタンプ列を遡及的に追加し、新しいデータフローを作成できます。
>
>* サンプルソースデータファイルのデータフィールドの大文字と小文字が、識別子の場合の解決に関する [!DNL Snowflake] のガイダンスに従っていることを確認してください。 詳しくは、[[!DNL Snowflake]  識別子の大文字/小文字の区別に関するドキュメント ](https://docs.snowflake.com/en/sql-reference/identifiers-syntax#label-identifier-casing) を参照してください。

[!UICONTROL データを選択]ステップが表示されます。この手順では、Experience Platformに読み込むデータを選択し、タイムスタンプとタイムゾーンを設定し、生データを取り込むためのサンプルソースデータファイルを指定する必要があります。

画面左側のデータベースディレクトリを使用して、Experience Platformに読み込むテーブルを選択します。

![ データベーステーブルが選択された状態の選択データインターフェイス ](../../../../images/tutorials/create/snowflake-streaming/select-table.png)

次に、テーブルのタイムスタンプ列タイプを選択します。 `TIMESTAMP_NTZ` または `TIMESTAMP_LTZ` の 2 種類のタイムスタンプ列を選択できます。 列タイプ `TIMESTAMP_NTZ` を選択する場合は、タイムゾーンも指定する必要があります。 列には null 以外の制約を指定する必要があります。 詳しくは、[ 制限事項とよくある質問 ](../../../../connectors/databases/snowflake-streaming.md#limitations-and-frequently-asked-questions) の節を参照してください。

この手順でバックフィル設定を指定することもできます。 バックフィルは、最初に取り込むデータを決定します。 バックフィルが有効になっている場合、指定されたパス内の現在のすべてのファイルが、最初にスケジュールされた取り込み時に取り込まれます。 そうでない場合は、最初の取り込みの実行から開始時刻の間に読み込まれたファイルのみが取り込まれます。 開始時間より前に読み込まれたファイルは取り込まれません。

**[!UICONTROL バックフィル]** 切替スイッチを選択して、バックフィルを有効にします。

![ タイムスタンプ、タイムゾーン、バックフィルの設定手順 ](../../../../images/tutorials/create/snowflake-streaming/timezone.png)

最後に、「**[!UICONTROL ファイルを選択]** を選択して、サンプルソースデータをアップロードし、後の手順で元のデータをエクスペリエンスデータモデル（XDM）にマッピングするために使用するマッピングセットを作成するのに役立ちます。

終了したら、「**[!UICONTROL 次へ]** を選択して続行します。

![ ソースサンプルデータのプレビュー。](../../../../images/tutorials/create/snowflake-streaming/preview.png)

## データセットとデータフローの詳細の指定 {#provide-dataset-and-dataflow-details}

次に、データセットとデータフローに関する情報を指定する必要があります。

### データセットの詳細 {#dataset-details}

データセットは、スキーマ（列）とフィールド（行）で構成されるデータコレクション（通常はテーブル）を格納し管理するための構造です。Experience Platformに正常に取り込まれたデータは、データレイク内にデータセットとして保持されます。 この手順では、新しいデータセットを作成するか、既存のデータセットを使用します。

>[!BEGINTABS]

>[!TAB  新しいデータセットを使用する ]

新しいデータセットを使用するには、「**[!UICONTROL 新しいデータセット]**」を選択し、データセットの名前とオプションの説明を入力します。 また、データセットが準拠するエクスペリエンスデータモデル（XDM）スキーマを選択する必要があります。

![ 新しいデータセット選択インターフェイス ](../../../../images/tutorials/create/snowflake-streaming/new-dataset.png)

| 新しいデータセットの詳細 | 説明 |
| --- | --- |
| 出力データセット名 | 新規データセットの名前。 |
| 説明 | （任意）新しいデータセットの簡単な概要です。 |
| スキーマ | 組織に存在するスキーマのドロップダウンリスト。 ソース設定プロセスの前に、独自のスキーマを作成することもできます。 詳しくは、[UI での XDM スキーマの作成 ](../../../../../xdm/tutorials/create-schema-ui.md) に関するガイドを参照してください。 |

>[!TAB 既存のデータセットを使用する]

既存のデータセットがある場合は、「**[!UICONTROL 既存のデータセット]**」を選択し、「**[!UICONTROL 詳細検索]**」オプションを使用すると、組織内のすべてのデータセットのウィンドウが表示されます。これには、リアルタイム顧客プロファイルへの取り込みが有効になっているかどうかなど、それぞれの詳細が含まれます。

![ 既存のデータセット選択インターフェイス ](../../../../images/tutorials/create/snowflake-streaming/existing-dataset.png)

>[!ENDTABS]

+++プロファイル取り込み、エラー診断、部分取り込みを有効にする手順を選択します。

データセットがリアルタイム顧客プロファイルに対して有効になっている場合、この手順の間に **[!UICONTROL プロファイルデータセット]** を切り替えて、プロファイル取り込み用のデータを有効にすることができます。 また、この手順を使用して、**[!UICONTROL エラー診断]** および **[!UICONTROL 部分取り込み]** を有効にすることもできます。

* **[!UICONTROL エラー診断]**: **[!UICONTROL エラー診断]** を選択して、データセットアクティビティとデータフローステータスを監視する際に後で参照できるエラー診断を生成するようにソースに指示します。
* **[!UICONTROL 部分取り込み]**：部分バッチ取り込みは、設定可能な特定のしきい値まで、エラーを含んだデータを取り込む機能です。 この機能を使用すると、正確なデータをすべてExperience Platformに正常に取り込みながら、不正なデータがすべて無効な理由に関する情報と共に個別にバッチ処理されます。

+++

### データフローの詳細 {#dataflow-details}

データセットを設定したら、名前、説明（オプション）、アラート設定など、データフローの詳細を指定する必要があります。

![ データフローの詳細設定手順。](../../../../images/tutorials/create/snowflake-streaming/dataflow-details.png)

| データフロー設定 | 説明 |
| --- | --- |
| データフロー名 | データフローの名前。  デフォルトでは、読み込まれるファイルの名前が使用されます。 |
| 説明 | （任意）データフローの簡単な説明です。 |
| アラート | Experience Platformでは、ユーザーが登録できるイベントベースのアラートを作成できます。 これらのオプションをトリガーするには、実行中のデータフローが必要です。 詳しくは、[ アラートの概要 ](../../alerts.md) を参照してください <ul><li>**ソースデータフロー実行開始**：データフロー実行が開始したときに通知を受け取るには、このアラートを選択します。</li><li>**ソースデータフロー実行成功**：データフローがエラーなく終了した場合に通知を受け取るには、このアラートを選択します。</li><li>**ソースデータフロー実行の失敗**：データフローの実行がエラーで終了した場合に通知を受け取るには、このアラートを選択します。</li></ul> |

終了したら、「**[!UICONTROL 次へ]** を選択して続行します。

## XDM スキーマへのフィールドのマッピング {#mapping}

「[!UICONTROL マッピング]」手順が表示されます。マッピングインターフェイスを使用して、ソースデータをExperience Platformに取り込む前に、そのデータを適切なスキーマフィールドにマッピングし、「**[!UICONTROL 次へ]**」を選択します。 マッピングインターフェイスの使用方法に関するガイドについては、[ データ準備 UI ガイド ](../../../../../data-prep/ui/mapping.md) を参照してください。

![ ソースワークフローのマッピングインターフェイス ](../../../../images/tutorials/create/snowflake-streaming/mapping.png)

## データフローのレビュー {#review}

データフロー作成プロセスの最後の手順は、データフローを実行する前に確認することです。 **[!UICONTROL レビュー]** ステップを使用すると、新しいデータフローを実行する前に詳細をレビューできます。 詳細は、次のカテゴリにグループ化されます。

* **接続**：ソースのタイプ、選択したソースファイルの関連パスおよびそのソースファイル内の列の数を表示します。
* **データセットの割り当てとフィールドのマッピング**：ソースデータがどのデータセットに取り込まれるかを、そのデータセットが準拠するスキーマを含めて表示します。

データフローをレビューしたら、「**[!UICONTROL 終了]**」を選択し、データフローが作成されるまでしばらく待ちます。

![ ソースワークフローのレビュー手順 ](../../../../images/tutorials/create/snowflake-streaming/review.png)

## 次の手順

このチュートリアルでは、[!DNL Snowflake] データのストリーミングデータフローを正常に作成しました。 その他のリソースについては、以下のドキュメントを参照してください。

### データフローの監視

データフローを作成したら、そのデータフローを通じて取り込まれるデータを監視し、取り込み率、成功、エラーに関する情報を表示できます。 ストリーミングデータフローの監視方法について詳しくは、[UI でのストリーミングデータフローの監視 ](../../monitor-streaming.md) に関するチュートリアルを参照してください。

### データフローの更新

データフローのスケジュール、マッピング、一般情報の設定を更新するには、[UI でのソースデータフローの更新 ](../../update-dataflows.md) に関するチュートリアルを参照してください。

### データフローの削除

不要になったデータフローや誤って作成されたデータフローは、**[!UICONTROL データフロー]**&#x200B;ワークスペース内にある&#x200B;**[!UICONTROL 削除]**&#x200B;機能で削除できます。データフローの削除方法について詳しくは、[UI でのデータフローの削除 ](../../delete.md) のチュートリアルを参照してください。
