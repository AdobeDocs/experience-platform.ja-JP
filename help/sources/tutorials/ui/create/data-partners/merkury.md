---
title: UI での Merkury エンタープライズ ID 解決Source接続とデータフローの作成
description: Adobe Experience Platform UI を使用して、Merkury エンタープライズ ID 解決ソース接続を作成する方法を説明します。
exl-id: 2af48c18-76f9-4615-8e76-8f030a312a8f
source-git-commit: e402a58f51de49b26f9d279cebf551ec11e4698f
workflow-type: tm+mt
source-wordcount: '2128'
ht-degree: 28%

---

# UI での [!DNL Merkury Enterprise Identity Resolution] ソース接続とデータフローの作成

このチュートリアルでは、Adobe Experience Platform ユーザーインターフェイスを使用して [!DNL Merkury Enterprise Identity Resolution] ソース接続とデータフローを作成する手順を説明します。

## 基本を学ぶ

このチュートリアルは、 Experience Platform の次のコンポーネントを実際に利用および理解しているユーザーを対象としています。

* [[!DNL Experience Data Model (XDM)] システム](../../../../../xdm/home.md)：Experience Platform が顧客体験データの整理に使用する標準化されたフレームワーク。
   * [スキーマ構成の基本](../../../../../xdm/schema/composition.md)：スキーマ構成の主要な原則やベストプラクティスなど、XDM スキーマの基本的な構成要素について学びます。
   * [スキーマエディターのチュートリアル](../../../../../xdm/tutorials/create-schema-ui.md)：スキーマエディター UI を使用してカスタムスキーマを作成する方法を説明します。
* [[!DNL Real-Time Customer Profile]](../../../../../profile/home.md)：複数のソースからの集計データに基づいて、統合されたリアルタイムの顧客プロファイルを提供します。

### 必要な資格情報の収集

Experience Platform上のバケットにアクセスするには、次の資格情報に対して有効な値を指定する必要があります。

| 資格情報 | 説明 |
| --- | --- |
| アクセスキー | バケットのアクセスキー ID。 この値は [!DNL Merkury] チームから取得できます。 |
| 秘密鍵 | バケットの秘密鍵 ID。 この値は [!DNL Merkury] チームから取得できます。 |
| バケット名 | これは、ファイルが共有される Merkury バケットです。 この値は [!DNL Merkury] チームから取得できます。 |

[!DNL Merkury] の設定およびその他の前提条件について詳しくは、[[!DNL Merkury]  ソースの概要 &#x200B;](../../../../connectors/data-partners/merkury.md) を参照してください。

## Merkury アカウントを接続

Experience Platform UI の左側のナビゲーションバーで「**[!UICONTROL ソース]**」を選択し、「[!UICONTROL &#x200B; ソース &#x200B;] ワークスペースにアクセスします。 [!UICONTROL カタログ]画面には、アカウントを作成できる様々なソースが表示されます。

画面の左側にあるカタログから適切なカテゴリを選択することができます。または、使用する特定のソースを検索オプションを使用して探すこともできます。

**[!UICONTROL データパートナー]** カテゴリで、「**[!UICONTROL Merkury]**」を選択し、次に「**[!UICONTROL 設定]**」を選択します。

![Merkury ソースが選択されているソースカタログ &#x200B;](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/catalog.png)

**[!UICONTROL Merkury に接続]** ページが表示されます。 このページでは、新しい資格情報または既存の資格情報を使用できます。

### 新しいアカウントを作成

新しい資格情報を使用している場合は、「**[!UICONTROL 新しいアカウント]**」を選択します。 表示される入力フォームで、名前、説明（オプション）、[!DNL Merkury] 資格情報を入力します。 終了したら「**[!UICONTROL ソースに接続]**」を選択し、新しい接続が確立されるまでしばらく待ちます。

![Merkury の新しいアカウントインターフェイス。](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/new-account.png)

### 既存のアカウントを使用

既存のアカウントを使用するには、「**[!UICONTROL 既存のアカウント]**」を選択して、使用したい [!DNL Merkury] アカウントを選択します。 「**[!UICONTROL 次へ]**」を選択して次に進みます。

![Merkury の既存のアカウントインターフェイス。](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/existing-account.png)

>[!BEGINSHADEBOX]

**サポートされているファイル形式**

[!DNL Merkury] ソースを使用して、次のファイル形式を取り込むことができます。

* 区切り文字区切り値（DSV）：任意の単一文字の値を、DSV 形式のデータファイルの区切り文字として使用できます。
* [!DNL JavaScript Object Notation] （JSON）: JSON 形式のデータファイルは XDM に準拠している必要があります。
* [!DNL Apache Parquet]: Parquet 形式のデータファイルは XDM に準拠している必要があります。
* 圧縮ファイル：JSON および区切り文字付きファイルは、`bzip2`、`gzip`、`deflate`、`zipDeflate`、`tarGzip` および `tar` のように圧縮できます。

>[!ENDSHADEBOX]

## データの追加

[!DNL Merkury] アカウントを作成すると、**[!UICONTROL データを追加]** 手順が表示され、[!DNL Merkury] ファイル階層を調べ、Experience Platformに取り込むフォルダーまたは特定のファイルを選択するためのインターフェイスが表示されます。

* インターフェイスの左側はディレクトリブラウザーで、[!DNL Merkury] のファイル階層が表示されています。
* インターフェイスの右側の部分では、互換性のあるフォルダーまたはファイルから最大 100 行のデータをプレビューできます。

![&#x200B; 取り込むデータを選択できるソースワークフローのファイルおよびフォルダーディレクトリ。](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/add-data.png)

ルートフォルダーを選択して、フォルダー階層にアクセスします。 ここから 1 つのフォルダーを選択して、フォルダー内のすべてのファイルを再帰的に取り込むことができます。 フォルダー全体を取り込む場合、そのフォルダー内のすべてのファイルでデータ形式とスキーマが同じであることを確認する必要があります。

フォルダーを選択すると、右側のインターフェイスが更新され、選択したフォルダー内の最初のファイルの内容と構造のプレビューが表示されます。

![&#x200B; 取り込み用に選択されたデータとファイルのプレビューインターフェイス。](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/selected-data.png)


この手順の間に、続行する前にデータに対していくつかの設定を行うことができます。 まず、**[!UICONTROL データ形式]** を選択し、表示されるドロップダウンパネルでファイルに適したデータ形式を選択します。

次の表に、サポートされるファイルタイプに適したデータ形式を示します。

| ファイルタイプ | データ形式 |
| --- | --- |
| CSV | [!UICONTROL &#x200B; 区切り &#x200B;] |
| JSON | [!UICONTROL JSON] |
| PARQUET | [!UICONTROL XDM Parquet] |

### 列区切り記号を選択

+++区切り文字の設定方法の手順を表示する場合に選択します

データ形式を設定した後、区切り文字付きファイルを取り込む際に列の区切り文字を設定できます。 **[!UICONTROL 区切り文字]** オプションを選択してから、ドロップダウンメニューから区切り文字を選択します。 メニューには、コンマ（`,`）、タブ（`\t`）、パイプ（`|`）など、区切り文字に最も頻繁に使用されるオプションが表示されます。

カスタムの区切り文字を使用する場合は、「**[!UICONTROL カスタム]**」を選択し、ポップアップ入力バーに任意の 1 文字の区切り文字を入力します。

+++

### 圧縮ファイルの取り込み

+++ 圧縮ファイルの取り込み手順を表示する場合に選択します

圧縮タイプを指定して、圧縮された JSON ファイルや区切り文字付きのファイルを取り込むこともできます。

[!UICONTROL &#x200B; データを選択 &#x200B;] 手順で、取り込む圧縮ファイルを選択し、適切なファイルタイプと XDM に準拠しているかどうかを選択します。 次に、**[!UICONTROL 圧縮タイプ]** を選択し、ソースデータに適した圧縮ファイルタイプを選択します。

特定のファイルをExperience Platformに取り込むには、フォルダーを選択してから、取り込むファイルを選択します。 この手順では、ファイル名の横にあるプレビューアイコンを使用して、特定のフォルダー内の他のファイルのファイル内容をプレビューすることもできます。

終了したら、「**[!UICONTROL 次へ]**」を選択します。

+++

## データフローの詳細を入力

[!UICONTROL データフロー詳細]ページでは、既存のデータセットと新しいデータセットのどちらを使用するかを選択できます。このプロセスの間に、データがプロファイルに取り込まれるように設定し、[!UICONTROL &#x200B; エラー診断 &#x200B;]、[!UICONTROL &#x200B; 部分取り込み &#x200B;]、[!UICONTROL &#x200B; アラート &#x200B;] などの設定を有効にすることもできます。

### 既存のデータセットを使用する

データを既存のデータセットに取り込むには、**[!UICONTROL 既存のデータセット]**&#x200B;を選択します。「[!UICONTROL 詳細検索]」オプションを使用するか、ドロップダウンメニューで既存のデータセットのリストをスクロールすると、既存のデータセットを取得できます。データセットを選択したら、データフローの名前と説明を入力します。

![&#x200B; 既存のデータセットインターフェイス。](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/existing-dataset.png)

### 新しいデータセットの使用

データを新しいデータセットに取り込むには、「**[!UICONTROL 新しいデータセット]**」を選択して、出力データセット名とオプションの説明を入力します。次に、「[!UICONTROL 詳細検索]」オプションを使用するか、ドロップダウンメニューで既存のスキーマのリストをスクロールして、マッピングするスキーマを選択します。スキーマを選択したら、データフローの名前と説明を指定します。

![&#x200B; 新しいデータセットインターフェイス &#x200B;](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/new-dataset.png)

### プロファイルおよびエラー診断の有効化

+++選択して、エラー診断とプロファイル取り込みを有効にする手順を表示します

次に、**[!UICONTROL プロファイルデータセット]** 切り替えスイッチを選択して、リアルタイム顧客プロファイルのデータセットを有効にします。 これにより、エンティティの属性と動作の全体像を把握できます。すべてのプロファイル対応データセットのデータはプロファイルに含まれ、変更はデータフローを保存するときに適用されます。

[!UICONTROL エラー診断]は、データフローで発生するエラーレコードに対して、詳細なエラーメッセージ生成を有効にします。[!UICONTROL 部分取り込み]では、手動で定義した特定のしきい値に到達するまで、エラーを含むデータを取り込むことができます。詳しくは、[バッチ取り込みの概要](../../../../../ingestion/batch-ingestion/partial.md)を参照してください。

+++

### アラートの有効化

+++アラートを有効にする手順を表示する場合に選択します

アラートを有効にすると、データフローのステータスに関する通知を受け取ることができます。リストからアラートを選択して、データフローのステータスに関する通知を受け取るよう登録します。アラートについて詳しくは、[UI を使用したソースアラートの購読](../../alerts.md)についてのガイドを参照してください。

データフローへの詳細の入力を終えたら「**[!UICONTROL 次へ]** 」を選択します。

+++

## XDM スキーマへのデータフィールドのマッピング

[!UICONTROL マッピング]手順が表示され、ソーススキーマのソースフィールドを、ターゲットスキーマの適切なターゲット XDM フィールドにマッピングするためのインターフェイスが提供されます。

Experience Platformは、選択したターゲットスキーマまたはデータセットに基づいて、自動マッピングされたフィールドに対してインテリジェントなレコメンデーションを提供します。 マッピングルールは、ユースケースに合わせて手動で調整できます。 必要に応じて、フィールドを直接マッピングするか、データ準備機能を使用してソースデータを変換して計算値を導き出すかを選択できます。マッパーインターフェイスと計算フィールドの使用に関する包括的な手順については、[&#x200B; データ準備 UI ガイド &#x200B;](../../../../../data-prep/ui/mapping.md) を参照してください。

ソースデータが正常にマッピングされたら、「**[!UICONTROL 次へ]**」を選択します。

![&#x200B; マッピングインターフェイス &#x200B;](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/mapping.png)

## 取り込み実行のスケジュール

[!UICONTROL &#x200B; スケジュール &#x200B;] 手順が表示され、設定されたマッピングを使用して選択したソースデータを自動的に取り込むための取り込みスケジュールを設定できます。 デフォルトでは、スケジュールは `Once` に設定されています。 取り込み頻度を調整するには、「**[!UICONTROL 頻度]** を選択し、ドロップダウンメニューからオプションを選択します。

>[!TIP]
>
>1 回限りの取り込み中は、インターバルとバックフィルは表示されません。

![&#x200B; スケジュールインターフェイス &#x200B;](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/schedule.png)

取り込み頻度を `Minute`、`Hour`、`Day`、`Week` のいずれかに設定した場合は、取り込みごとに設定された時間枠を確立する間隔を設定する必要があります。 例えば、取り込み頻度を `Day` に設定し、間隔を `15` に設定すると、データフローは 15 日ごとにデータを取り込むようにスケジュールされます。

この手順の間に、**バックフィル** を有効にし、データの増分取り込みの列を定義することもできます。 バックフィルは履歴データの取り込みに使用しますが、増分取り込みのために定義した列を使用すると、新しいデータを既存のデータと区別することができます。

スケジュール設定について詳しくは、次の表を参照してください。

| スケジュール設定 | 説明 |
| --- | --- |
| 頻度 | 頻度を設定して、データフローの実行頻度を示します。 頻度は次のように設定できます。 <ul><li>**1 回**：頻度を `once` に設定して、1 回限りの取り込みを作成します。 1 回限りの取り込みデータフローを作成する場合、間隔とバックフィルの設定は使用できません。 デフォルトでは、スケジュールの頻度は 1 回に設定されています。</li><li>**分**：頻度を `minute` に設定して、1 分ごとにデータを取り込むようにデータフローをスケジュールします。</li><li>**時間**：頻度を `hour` に設定して、1 時間ごとにデータを取り込むようにデータフローをスケジュールします。</li><li>**日**：頻度を `day` に設定して、1 日にデータを取り込むようにデータフローをスケジュールします。</li><li>**週**：頻度を `week` に設定して、データフローが週ごとにデータを取り込むようにスケジュールします。</li></ul> |
| 間隔 | 頻度を選択したら、間隔設定を指定して、各取り込み間の時間枠を確立できます。 例えば、頻度を日に設定し、間隔を 15 に設定すると、データフローは 15 日ごとに実行されます。 間隔をゼロに設定することはできません。 各頻度で許容される最小のインターバル値は次のとおりです。<ul><li>**1 回**：なし</li><li>**分**: 15</li><li>**時間**: 1</li><li>**日**: 1</li><li>**週**: 1</li></ul> |
| 開始時間 | 見込み実行のタイムスタンプ（UTC タイムゾーンで表示）。 |
| バックフィル | バックフィルは、最初に取り込むデータを決定します。 バックフィルが有効になっている場合、指定されたパス内の現在のすべてのファイルが、最初にスケジュールされた取り込み時に取り込まれます。 バックフィルが無効になっている場合は、最初の取り込みの実行から開始時刻の間に読み込まれたファイルのみが取り込まれます。 開始時間より前に読み込まれたファイルは取り込まれません。 |

>[!NOTE]
>
>バッチ取り込みの場合、その後のデータフローでは、ソースから取り込まれるファイルが&#x200B;**最終変更日**&#x200B;のタイムスタンプに基づいて選択されます。つまり、バッチデータフローでは、新しいファイルまたは最後のフローの実行以降に変更されたファイルをソースから選択します。 さらに、スケジュールされたフロー実行時間より前にクラウドストレージアカウントに完全にアップロードされていないファイルは取り込み用に取得されない可能性があるので、ファイルのアップロードとスケジュールされたフロー実行の間に十分な時間があることを確認する必要があります。

取り込みスケジュールの設定が完了したら、「**[!UICONTROL 次へ]**」を選択します。

## データフローのレビュー

**[!UICONTROL レビュー]**&#x200B;手順が表示され、新しいデータフローを作成する前に確認できます。詳細は、次のカテゴリに分類されます。

* **[!UICONTROL 接続]**：ソースのタイプ、選択したソースファイルの関連パスおよびそのソースファイル内の列の数を表示します。
* **[!UICONTROL データセットの割り当てとフィールドのマッピング]**：ソースデータがどのデータセットに取り込まれるかを、そのデータセットが準拠するスキーマを含めて表示します。
* **[!UICONTROL スケジュール]**：取り込みスケジュールのアクティブな期間、頻度、間隔を表示します。

データフローをレビューしたら、「**[!UICONTROL 終了]**」をクリックし、データフローが作成されるまでしばらく待ちます。

![&#x200B; レビューページ &#x200B;](../../../../images/tutorials/create/merkury-enterprise-identity-resolution-assets/review.png)

## 次の手順

このチュートリアルでは、[!DNL Merkury] ソースからExperience Platformにバッチデータを取り込むデータフローを正常に作成しました。 その他のリソースについては、以下に概要を説明するドキュメントを参照してください。

### データフローの監視

データフローを作成したら、そのデータフローを通じて取り込まれるデータを監視し、取り込み率、成功、エラーに関する情報を表示できます。 データフローのモニタリング方法について詳しくは、[UI でのアカウントとデータフローのモニタリング &#x200B;](../../monitor.md) のチュートリアルを参照してください。

### データフローの更新

データフローのスケジュール、マッピング、一般情報の設定を更新するには、[UI でのソースデータフローの更新 &#x200B;](../../update-dataflows.md) に関するチュートリアルを参照してください。

### データフローの削除

不要になったデータフローや誤って作成されたデータフローは、**[!UICONTROL データフロー]**&#x200B;ワークスペース内にある&#x200B;**[!UICONTROL 削除]**&#x200B;機能で削除できます。データフローの削除方法について詳しくは、[UI でのデータフローの削除 &#x200B;](../../delete.md) のチュートリアルを参照してください。
