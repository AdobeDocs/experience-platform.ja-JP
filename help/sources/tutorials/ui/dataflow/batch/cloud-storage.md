---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: UIでのクラウドストレージバッチコネクタのデータフローの設定
topic: overview
translation-type: tm+mt
source-git-commit: d3c725c4760acb3857a67d0d30b24732c963a030
workflow-type: tm+mt
source-wordcount: '1184'
ht-degree: 1%

---


# UIでのクラウドストレージバッチコネクタのデータフローの設定

データフローとは、ソースからデータセットにデータを取得し、取り込むスケジュール済みのタスク [!DNL Platform] です。 このチュートリアルでは、クラウドストレージベースのコネクタを使用して新しいデータフローを設定する手順を説明します。

## はじめに

このチュートリアルでは、次のAdobe Experience Platformのコンポーネントについて十分に理解している必要があります。

* [Experience Data Model(XDM)System](../../../../../xdm/home.md): 顧客体験データを [!DNL Experience Platform] 整理するための標準化されたフレームワーク。
   * [スキーマ構成の基本](../../../../../xdm/schema/composition.md): XDMスキーマの基本構成要素について説明します。この基本構成要素には、スキーマ構成の主な原則とベストプラクティスが含まれます。
   * [スキーマエディタのチュートリアル](../../../../../xdm/tutorials/create-schema-ui.md): スキーマエディターのUIを使用してカスタムスキーマを作成する方法を説明します。
* [リアルタイム顧客プロファイル](../../../../../profile/home.md): 複数のソースからの集計データに基づいて、統合されたリアルタイムの消費者プロファイルを提供します。

また、このチュートリアルでは、クラウドストレージコネクタを既に作成済みである必要があります。 UIで異なるクラウドストレージコネクタを作成するためのチュートリアルのリストは、 [ソースコネクタの概要](../../../../home.md)。

### サポートされているファイル形式

[!DNL Experience Platform] は、外部ストレージから取り込む次のファイル形式をサポートしています。

* 区切り文字区切り値(DSV): DSV形式のデータ・ファイルのサポートは、現在、コンマ区切り値に制限されています。 DSV形式のファイル内のフィールド・ヘッダーの値は、英数字とアンダースコアのみで構成する必要があります。 一般的なDSVファイルは、今後サポートされる予定です。
* [!DNL JavaScript Object Notation] (JSON): JSON形式のデータファイルは、XDMに準拠している必要があります。
* [!DNL Apache Parquet]: パーケット形式のデータファイルは、XDMに準拠している必要があります。

## データの選択

クラウドストレージコネクタを作成すると、 *[!UICONTROL データの選択]* 手順が表示され、クラウドストレージ階層を調べるためのインタラクティブインターフェイスが提供されます。

* インターフェイスの左半分はディレクトリブラウザーで、サーバーのファイルとディレクトリが表示されます。
* インターフェイスの右半分を使用すると、互換性のあるファイルから最大100行のデータをプレビューできます。

一覧のフォルダーをクリックすると、フォルダー階層を深いフォルダーに移動できます。 互換性のあるファイルまたはフォルダを選択すると、[ **[!UICONTROL データ形式の選択]** ]ドロップダウンが表示され、プレビューウィンドウにデータを表示する形式を選択できます。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/select-data.png)

プレビューーウィンドウが設定されたら、「 **[!UICONTROL 次へ]** 」をクリックして、選択したフォルダー内のすべてのファイルをアップロードできます。 特定のファイルにアップロードする場合は、「 **[!UICONTROL 次へ]**」をクリックする前に、リストからそのファイルを選択します。

>[!NOTE] サポートされるファイル形式は、CSV、JSON、Parketです。 JSONファイルとParketファイルは、XDMに準拠している必要があります。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/select-data-next.png)

## データフィールドのXDMスキーマへのマッピング

「 *[!UICONTROL マッピング]* 」の手順が表示され、ソースデータをデータセットにマッピングするインタラクティブなインターフェイスが提供され [!DNL Platform] ます。 JSONまたはParket形式のソースファイルはXDMに準拠している必要があり、手動でマッピングを設定する必要はありません。 逆に、CSVファイルでは、マッピングを明示的に設定する必要がありますが、マッピングするソースデータフィールドを選択できます。

取り込む受信データのデータセットを選択します。 既存のデータセットを使用することも、新しいデータセットを作成することもできます。

**既存のデータセットの使用**

既存のデータセットにデータを取り込むには、「 **[!UICONTROL Use existing dataset]**」を選択し、データセットアイコンをクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/use-existing-data.png)

[ _データセットの選択_ ]ダイアログが表示されます。 使用するデータセットを見つけて選択し、「 **[!UICONTROL 続行]**」をクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/select-existing-data.png)

**新しいデータセットの使用**

データを新しいデータセットに取り込むには、「 **[!UICONTROL 新しいデータセットを]** 作成」を選択し、表示されるフィールドにデータセットの名前と説明を入力します。 次に、スキーマアイコンをクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/use-new-schema.png)

[ _スキーマの_ 選択]ダイアログが表示されます。 新しいデータセットに適用するスキーマを選択し、「 **[!UICONTROL 完了]**」をクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/select-schema.png)

必要に応じて、フィールドを直接マップするか、マッパー関数を使用してソースデータを変換し、計算値や計算値を抽出することができます。 データマッピングおよびマッパーの機能について詳しくは、CSVデータのXDMスキーマフィールドへの [マッピングに関するチュートリアルを参照してください](../../../../../ingestion/tutorials/map-a-csv-file.md)。

ソースデータがマッピングされたら、「 **[!UICONTROL 次へ]**」をクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/mapping.png)

## インジェストのスケジュール設定

[ *[!UICONTROL スケジュール]* ]ステップが表示され、設定済みのマッピングを使用して選択したソースデータを自動的に取り込むように取り込みスケジュールを設定できます。 次の表に、スケジュール設定用の様々な設定可能フィールドの概要を示します。

| フィールド | 説明 |
| --- | --- |
| 頻度 | 選択可能な頻度には、分、時間、日、週があります。 |
| 間隔 | 選択した頻度の間隔を設定する整数。 |
| 開始時間 | 最初の取り込みが行われるUTCタイムスタンプ。 |
| 埋め戻し | 最初に取り込まれるデータを決定するboolean値です。 [ *[!UICONTROL バックフィル]* ]を有効にすると、指定したパスにある現在のファイルは、最初にスケジュールされた取り込み中にすべて取り込まれます。 [ *[!UICONTROL バックフィル]* ]を無効にすると *[!UICONTROL 、最初の取り込み実行から]* 開始時間の間に読み込まれたファイルだけが取り込まれます。 *[!UICONTROL 開始時間より前に読み込まれたファイルは取り込まれません]* 。 |

データフローは、スケジュールに基づいてデータを自動的に取り込むように設計されています。 このワークフローで1回だけ取り込む場合は、 **[!UICONTROL 頻度]** 「日」を設定し、 ****&#x200B;間隔に非常に大きな数値（例：10000）を適用することで、これを行うことができます。

スケジュールの値を指定し、「 **次へ**」をクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/scheduling.png)

## データフローに名前を付ける

「 *[!UICONTROL 名前フロー]* 」ステップが表示され、新しいデータフローに名前を付け、簡単に説明を付けることができます。

データフローの値を指定し、「 **[!UICONTROL 次へ]**」をクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/name-your-dataflow.png)

### データフローの確認

「 *[!UICONTROL レビュー]* 」ステップが表示され、新しいデータフローを作成前に確認できます。 詳細は次のカテゴリに分類されます。

* *[!UICONTROL ソースの詳細]*: ソースの種類、選択したソースファイルの関連パス、およびそのソースファイル内の列数が表示されます。
* *[!UICONTROL Targetの詳細]*: ソースデータが取り込まれるデータセット(データセットに従うスキーマなど)を示します。
* *[!UICONTROL スケジュールの詳細]*: 取り込みスケジュールの有効期間、頻度、間隔を表示します。

データフローをレビューしたら、 **[!UICONTROL 「Finish]** 」をクリックし、データフローを作成するまでの時間を設定します。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/review.png)

## データフローの監視

クラウドストレージのデータフローが作成されたら、データを通じて取り込まれるデータを監視できます。 データセットの監視の詳細については、「ストリーミングデータフローの [監視に関するチュートリアル](../../../../../ingestion/quality/monitor-data-flows.md)」を参照してください。

## 次の手順

このチュートリアルに従うと、外部のクラウドストレージからデータを取り込むためのデータフローが正しく作成され、データセットの監視に関する洞察が得られます。 受信データは、やなどのダウンストリーム [!DNL Platform] サービスで使用でき [!DNL Real-time Customer Profile] るようになり [!DNL Data Science Workspace]ました。 詳しくは、次のドキュメントを参照してください。

* [リアルタイム顧客プロファイルの概要](../../../../../profile/home.md)
* [Data Science Workspaceの概要](../../../../../data-science-workspace/home.md)

## 付録

以下の節では、ソースコネクタを使用する場合の追加情報について説明します。

### データフローの無効化

データフローが作成されると、そのデータはすぐにアクティブになり、指定されたスケジュールに従ってデータを取り込みます。 アクティブなデータフローは、次の手順に従っていつでも無効にできます。

「 *[!UICONTROL ソース]* 」ワークスペース内で、「 **[!UICONTROL 参照]** 」タブをクリックします。 次に、無効にするアクティブなデータフローに関連付けられているアカウントの名前をクリックします。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/browse.png)

「 *[!UICONTROL ソースアクティビティ]* 」ページが表示されます。 リストからアクティブなデータフローを選択し、画面の右側に *[!UICONTROL 「Properties]* 」列を開きます。この列には「 **[!UICONTROL Enabled]** 」トグル・ボタンが含まれています。 切り替えボタンをクリックして、データフローを無効にします。 同じ切り替えを使用して、データフローを無効にした後で再び有効にできます。

![](../../../../images/tutorials/dataflow/cloud-storage/batch/disable-source.png)

### 母集団の受信データを有効にし [!DNL Profile] ます

ソースコネクタから受信するデータは、データの富化と埋め込みに使用でき [!DNL Real-time Customer Profile] ます。 実際の顧客 [!DNL Profile] データの入力に関する詳細は、 [プロファイルの人口に関するチュートリアルを参照してください](../../profile.md)。
