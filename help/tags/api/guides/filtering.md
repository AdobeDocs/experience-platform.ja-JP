---
title: Reactor APIでの応答のフィルタリング
description: Reactor APIでリソースをリストする際に結果をフィルタリングする方法を説明します。
source-git-commit: 6a1728bd995137a7cd6dc79313762ae6e665d416
workflow-type: tm+mt
source-wordcount: '556'
ht-degree: 2%

---

# Reactor APIでの応答のフィルタリング

Reactor APIでリスト(GET)エンドポイントを使用する場合、返される結果をレコードのサブセットに制限する必要が生じる場合があります。 これを実現するために、APIリストエンドポイントの多くは、特定の属性でフィルタリングする機能をサポートしています。 代わりに、APIに対して構造化クエリを実行する場合は、[検索](./search.md)のガイドを参照してください。

## フィルター構文

次の例では、GETリクエストのフィルターの実装方法を説明します。

**API 形式**

特定のリストエンドポイントに対する応答をフィルターするには、リクエストパスに`filter`クエリパラメーターを指定する必要があります。

>[!NOTE]
>
>以下のテンプレートでは、読みやすくするために角括弧(`[]`)とスペース文字を使用しています。 実際には、 [RFC 3986](https://tools.ietf.org/html/rfc3986)で説明されているように、これらの文字はURIエンコードする必要があります。 適切にエンコードされたリクエストパスの例をこのガイドで後述します。
>
>フィルターの構造が正しくない場合、フィルターは適用されず、結果セット全体が返されます。

```http
GET {ENDPOINT}?filter[{ATTRIBUTE_NAME}]={OPERATOR} {VALUE}
```

| プロパティ | 説明 |
| --- | --- |
| `{ENDPOINT}` | フィルタパラメータをサポートするReactor APIのリストエンドポイント。 |
| `{ATTRIBUTE_NAME}` | 結果をフィルターするための特定の属性の名前。 フィルターの際に、サポートする属性はエンドポイントごとに異なることに注意してください。 使用可能なフィルタリング属性のリストについては、使用しているエンドポイントのリファレンスガイドを参照してください。 |
| `{OPERATOR}` | 指定された`{VALUE}`に対する結果の評価方法を決定する演算子。 サポートされる演算子については、付録の[節](#supported-operators)を参照してください。 |
| `{VALUE}` | 返された結果を比較する値。 `EQ`演算子を使用して等価を比較する場合、応答に含めるには、大文字と小文字を区別した完全一致の値を指定する必要があります。 |

{style=&quot;table-layout:auto&quot;}

**リクエスト**

次のリクエスト例では、ライブラリの`state`属性が`published`と等しい必要があるフィルターを適用して、公開済みライブラリのリストを取得します。

URIエンコードの前のリクエストパスでのこのフィルターの構文は、次のようになります。

`https://reactor.adobe.io/properties/PR906238a59bbf4262bcedba248f483600/libraries?filter[state]=EQ published`

パスパラメーターとクエリパラメーターがURIエンコードされると、次のようなAPIリクエストで使用できます。

```shell
curl -X GET \
  https://reactor.adobe.io/properties/PR906238a59bbf4262bcedba248f483600/libraries?filter%5Bstate%5D=EQ%20published \
  -H 'Authorization: Bearer {ACCESS_TOKEN}' \
  -H 'x-api-key: {API_KEY}' \
  -H 'x-gw-ims-org-id: {IMS_ORG}'
```

## 複数の値のフィルター {#multiple-values}

1つの属性に対して複数の値でフィルタリングするには、値をコンマ区切りリストとして指定します。

```http
GET {ENDPOINT}?filter[{ATTRIBUTE_NAME}]={OPERATOR} {VALUE_1},{VALUE_2}
```

## 複数のフィルターの使用

複数の属性に対してフィルターを適用するには、各属性に`filter`パラメーターを指定します。 パラメーターはアンパサンド(`&`)で区切る必要があります。

```http
GET {ENDPOINT}?filter[{ATTRIBUTE_NAME_1}]={OPERATOR} {VALUE}&filter[{ATTRIBUTE_NAME_2}]={OPERATOR} {VALUE}
```

>[!NOTE]
>
>同じリクエストに対して複数のフィルターで同じ属性を指定した場合、その属性に対して最後に指定したフィルターのみが適用されます。

## 付録

次の節では、Reactor APIでフィルタを使用する方法について説明します。

### サポートされるフィルター演算子 {#operators}

次の表に、フィルターパラメーターでサポートされる演算子の値を示します。 フィルターの条件となる属性に応じて、文字列属性に「less than」や「greater than」演算子を使用するなど、使用可能なすべてのフィルター演算子が適用されるわけではないことに注意してください。

| 演算子 | 説明 |
| --- | --- |
| `EQ` | 属性は指定された値と等しい必要があります。 |
| `NOT` | 属性が指定した値と等しくない。 |
| `LT` | 属性は指定した値より小さい値にする必要があります。 |
| `GT` | 属性は指定された値より大きくする必要があります。 |
| `BETWEEN` | 属性は、指定した値の範囲内である必要があります。 この演算子を使用する場合は、2つの値](#multiple-values)を指定して、目的の範囲の最小値と最大値を示す必要があります。[ |
| `CONTAINS` | 属性には、文字列属性内の一連の文字など、指定された値が含まれている必要があります。 |
