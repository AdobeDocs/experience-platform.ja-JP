---
keywords: Experience Platform；ホーム；人気の高いトピック；ストリーミング；ストリーミング取り込み；トラブルシューティング；ストリーミング取り込みのトラブルシューティング；ストリーミング取り込みの faq;faq;
solution: Experience Platform
title: ストリーミング取得トラブルシューティングガイド
description: このドキュメントでは、Adobe Experience Platform でのストリーミングの取り込みに関するよくある質問に対する回答を示します。
exl-id: 5d5deccf-25b8-44c9-ae27-9a4713ced274
source-git-commit: e802932dea38ebbca8de012a4d285eab691231be
workflow-type: tm+mt
source-wordcount: '1025'
ht-degree: 65%

---

# ストリーミング取り込みのトラブルシューティングガイド

このドキュメントでは、Adobe Experience Platform でのストリーミングの取り込みに関するよくある質問に対する回答を示します。他の [!DNL Platform] すべての [!DNL Platform] API（を参照） [Experience Platformトラブルシューティングガイド](../../landing/troubleshooting.md).

Adobe Experience Platform [!DNL Data Ingestion] は、にデータを取り込むために使用できる RESTful API を提供します。 [!DNL Experience Platform]. 取り込んだデータは、個々の顧客プロファイルをほぼリアルタイムで更新するために使用され、パーソナライズされた関連性の高いエクスペリエンスを複数のチャネルで配信できます。サービスと様々な 取り込み方法の詳細については、[データ取り込みの概要](../home.md)を参照してください。ストリーミング取り込み APIの使用方法に関する手順については、[ストリーミング取り込みの概要](../streaming-ingestion/overview.md)を参照してください。

## FAQ

次に、ストリーミング取り込みに関するよくある質問に対する回答の一覧を示します。

### 送信するペイロードが正しくフォーマットされていることを確認する方法を教えてください。

[!DNL Data Ingestion] 活用 [!DNL Experience Data Model] (XDM) スキーマ：受信データの形式を検証します。 事前に定義された XDM データの構造に準拠しないデータを送信すると、スキーマの取り込みに失敗します。XDM の詳細と、その XDM の [!DNL Experience Platform]を参照し、 [XDM システムの概要](../../xdm/home.md).

ストリーミング取り込みでは、同期および非同期の 2 つの検証モードがサポートされます。それぞれの検証方法では、失敗したデータの処理方法が異なります。

開発プロセスでは、**同期検証**&#x200B;を使用する必要があります。検証に失敗したレコードは削除され、失敗理由を示すエラーメッセージが返されます（例：&quot;Invalid XDM Message Format&quot;）。

実稼動環境では、**非同期検証**&#x200B;を使用する必要があります。検証に合格しない形式のデータは、 [!DNL Data Lake] 失敗したバッチファイルとして。後で取得して、詳細な分析をおこなうことができます。

同期検証と非同期検証について詳しくは、[ストリーミング検証の概要](../quality/streaming-validation.md)を参照してください。検証に失敗したバッチを表示する手順については、[失敗したバッチの取得](../quality/retrieve-failed-batches.md)に関するガイドを参照してください。

### リクエストペイロードをに送信する前に検証することはできますか。 [!DNL Platform]?

リクエストペイロードは、次に送信された後にのみ評価できます： [!DNL Platform]. 同期検証を実行すると、有効なペイロードは生成された JSON オブジェクト、無効なペイロードはエラーメッセージを返します。非同期検証中に、サービスは不正なデータを検出し、に送信します。 [!DNL Data Lake] ここで、後で分析用に取得できます。 詳しくは、[ストリーミング検証の概要](../quality/streaming-validation.md)を参照してください。

### サポートされていないエッジで同期検証がリクエストされた場合はどうなりますか？

リクエストされた場所で同期検証がサポートされていない場合、501 エラー応答が返されます。同期検証について詳しくは、[ストリーミング検証の概要](../quality/streaming-validation.md)を参照してください。

### データが信頼できるソースからのみ収集されていることを確認する方法を教えてください。

[!DNL Experience Platform] は、セキュリティで保護されたデータ収集をサポートします。 認証済みのデータ収集が有効な場合、クライアントは JSON Web トークン（JWT）と IMS 組織 ID をリクエストヘッダーとして送信する必要があります。に認証済みデータを送信する方法の詳細 [!DNL Platform]詳しくは、 [認証済みデータ収集](../tutorials/create-authenticated-streaming-connection.md).

### データをにストリーミングする際の遅延とは [!DNL Real-Time Customer Profile]?

ストリーミングイベントは、通常、 [!DNL Real-Time Customer Profile] 60 秒未満で 実際の待機時間は、データ量、メッセージサイズ、帯域幅の制限によって異なる場合があります。

### 同じ API リクエストに複数のメッセージを含めることはできますか？

1 つのリクエストペイロード内で複数のメッセージをグループ化し、それらを [!DNL Platform]. 正しく使用した場合、1 つのリクエスト内で複数のメッセージをグループ化すると、データ操作をうまく最適化できます。詳細については、[複数のメッセージを 1 件のリクエストで送信する方法](../tutorials/streaming-multiple-messages.md)のチュートリアルを参照してください。

### 自分が送信するデータが受信されたかどうかを確認する方法を教えてください。

に送信されるすべてのデータ [!DNL Platform] （成功またはその他の場合）は、データセットに保持される前にバッチファイルとして保存されます。 バッチの処理ステータスは、送信先のデータセット内に表示されます。

[Experience Platform ユーザーインターフェイス](https://platform.adobe.com)でデータセットのアクティビティを確認することで、データが正常に取り込まれたかどうかを確認できます。左側のナビゲーションで「**[!UICONTROL データセット]**」をクリックし、データセットのリストを表示します。表示されたリストからストリーミング先のアクティビティセットを選択すると、その&#x200B;**[!UICONTROL データセットアクティビティ]**&#x200B;ページを開き、選択した期間に送信されたすべてのバッチが表示されます。詳しくは、 [!DNL Experience Platform] データストリームを監視するには、 [ストリーミングデータフローの監視](../quality/monitor-data-ingestion.md).

データの取り込みに失敗し、次から復元する場合： [!DNL Platform]失敗したバッチの ID をに送信することで、失敗したバッチを取得できます。 [!DNL Data Access API]. 詳しくは、[失敗したバッチの取得](../quality/retrieve-failed-batches.md)に関するガイドを参照してください。

### ストリーミングデータがデータレイクで使用できないのはなぜですか。

バッチ取得が [!DNL Data Lake]（無効な形式、データが見つからない、システムエラーなど）。 バッチが失敗した理由を判断するには、 [!DNL Data Ingestion Service API] 詳細を表示します。 失敗したバッチを取得する手順について詳しくは、[失敗したバッチの取得](../quality/retrieve-failed-batches.md)に関するガイドを参照してください。

### API リクエストに対して返された応答を解析する方法を教えてください。

応答を解析するには、最初にサーバー応答コードをチェックし、要求が受け入れられたかどうかを確認します。成功応答が返された場合は、`responses` 配列オブジェクトを確認して、取り込みタスクのステータスを判断します。

成功した単一のメッセージ API リクエストは、ステータスコード 200 を返します。バッチ処理されたメッセージ API リクエストが成功（または部分的に成功）すると、ステータスコード 207 が返されます。

次の JSON は、2 つのメッセージを含む API リクエストの応答オブジェクトの例です。1 つは成功したもの、1 つは失敗したものです。正常にストリーミングされるメッセージは、`xactionId` プロパティを返します。ストリーミングに失敗したメッセージは、`statusCode` プロパティと応答 `message`、および詳細情報が返されます。

```JSON
{
    "inletId": "9b0cb233972f3b0092992284c7353f5eead496218e8441a79b25e9421ea127f5",
    "batchId": "1565638336649:1750:244",
    "receivedTimeMs": 1565638336705,
    "responses": [
        {
            "xactionId": "1565650704337:2124:92:3"
        },
        {
            "statusCode": 400,
            "message": "inletId: [9b0cb233972f3b0092992284c7353f5eead496218e8441a
                79b25e9421ea127f5] 
                imsOrgId: [{ORG_ID}] 
                Message has unknown xdm format"
        }
    ]
}
```

### 送信したメッセージがに受信されないのはなぜですか？ [!DNL Real-Time Customer Profile]?

If [!DNL Real-Time Customer Profile] メッセージを拒否します。原因としては、id 情報が正しくないことが考えられます。 これは、ID に無効な値または名前空間を指定した結果です。

ID 名前空間には、デフォルトとカスタムの 2 タイプがあります。カスタム名前空間を使用する場合は、内で名前空間が登録されていることを確認します。 [!DNL Identity Service]. デフォルトおよびカスタム名前空間の使用について詳しくは、[ID 名前空間の概要](../../identity-service/namespaces.md)を参照してください。

[[!DNL Experience Platform UI]](https://platform.adobe.com) を使用して、メッセージの取り込みに失敗した理由の詳細を確認できます。左側のナビゲーションで「**[!UICONTROL 監視]**」をクリックし、「**[!UICONTROL エンドツーエンドのストリーミング]**」タブを表示して、選択した期間にストリーミングされたメッセージバッチを表示します。
