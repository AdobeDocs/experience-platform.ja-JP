---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: ストリーミング取り込みのトラブルシューティング
topic: troubleshooting
translation-type: tm+mt
source-git-commit: 0eecd802fc8d0ace3a445f3f188a7f095b97d0c8
workflow-type: tm+mt
source-wordcount: '1046'
ht-degree: 0%

---


# ストリーミング取り込みのトラブルシューティングガイド

このドキュメントでは、Adobe Experience Platformでのストリーミング取り込みに関するよくある質問に対する回答を示します。 すべてのプラットフォームAPIで発生する問題など、他のプラットフォームサービスに関する質問やトラブルシューティングについては、 [Experience Platformトラブルシューティングガイドを参照してください](../../landing/troubleshooting.md)。

Adobe Experience Platform Data Ingestは、RESTful APIを提供します。このAPIを使用して、データをExperience Platformに取り込むことができます。 取り込んだデータを使用して個々の顧客プロファイルをほぼリアルタイムで更新し、パーソナライズされた関連性のあるエクスペリエンスを複数のチャネルにわたって配信できます。 サービスと様々な [取り込み方法の詳細については、](../home.md) データ取り込みの概要を参照してください。 ストリーミング取り込みAPIの使用方法に関する手順については、 [ストリーミング取り込みの概要を参照してください](../streaming-ingestion/overview.md)。

## FAQ

次に、ストリーミング取り込みに関するよくある質問に対する回答のリストを示します。

### 送信するペイロードが正しくフォーマットされていることを知るにはどうしたらよいですか。

データ取り込みでは、Experience Data Model(XDM)スキーマを利用して、入力データの形式を検証します。 事前定義されたXDMスキーマの構造に適合しないデータを送信すると、取り込みに失敗します。 XDMとExperience Platformでのその使用について詳しくは、「 [XDM System overview](../../xdm/home.md)」を参照してください。

ストリーミング取り込みでは、次の2つの検証モードがサポートされます。 同期および非同期。 失敗したデータの処理は、検証方法ごとに異なります。

**同期検証は** 、開発プロセスで使用する必要があります。 検証に失敗したレコードは削除され、失敗した理由に関するエラーメッセージが返されます(例： &quot;XDMメッセージ形式が無効です&quot;)。

**実稼働環境では非同期検証** (Asynchronous)を使用する必要があります。 検証に合格しない形式のデータは、失敗したバッチファイルとしてData Lakeに送信され、後でそのデータを取得して、分析することができます。

同期検証と非同期検証について詳しくは、「 [ストリーミング検証の概要](../quality/streaming-validation.md)」を参照してください。 検証に失敗したバッチを表示する手順については、失敗したバッチの [取得に関するガイドを参照してください](../quality/retrieve-failed-batches.md)。

### リクエストペイロードをプラットフォームに送信する前に検証できますか。

リクエストペイロードは、プラットフォームに送信された後にのみ評価できます。 同期検証を実行すると、有効なペイロードは入力されたJSONオブジェクトを返し、無効なペイロードはエラーメッセージを返します。 非同期検証中に、サービスは不正なデータを検出し、データレークに送信します。データレークでは、後で分析用に取得できます。 See the [streaming validation overview](../quality/streaming-validation.md) for more information.

### 同期検証がサポートされていないエッジで同期検証が要求された場合はどうなりますか？

要求された場所で同期検証がサポートされていない場合、501エラー応答が返されます。 同期検証の詳細については、 [ストリーミング検証の概要](../quality/streaming-validation.md) を参照してください。

### データが信頼できるソースからのみ収集されるようにする方法

エクスペリエンスプラットフォームは、セキュリティで保護されたデータ収集をサポートします。 認証済みデータ収集が有効な場合、クライアントはJSON Web Token(JWT)とIMS組織IDをリクエストヘッダーとして送信する必要があります。 認証済みデータをプラットフォームに送信する方法について詳しくは、 [認証済みデータ収集に関するガイドを参照してください](../tutorials/create-authenticated-streaming-connection.md)。

### リアルタイム顧客プロファイルへのデータのストリーミングにかかる遅延は何ですか。

ストリーム化されたイベントは、通常、60秒未満でリアルタイムの顧客プロファイルに反映されます。 実際の待ち時間は、データ量、メッセージサイズ、帯域幅の制限によって異なる場合があります。

### 同じAPIリクエストに複数のメッセージを含めることはできますか。

単一の要求ペイロード内で複数のメッセージをグループ化し、それらをプラットフォームにストリーミングすることができます。 正しく使用すれば、1つのリクエスト内で複数のメッセージをグループ化することは、データ操作を最適化する優れた方法です。 詳細については、リクエスト内で複数のメッセージを [送信する方法のチュートリアルをお読みください](../tutorials/streaming-multiple-messages.md) 。

### 送信するデータが受信されているかどうかを知る方法

プラットフォームに送信されるすべてのデータ（正常または正常）は、バッチファイルとして保存された後、データセットに保持されます。 バッチの処理ステータスは、送信先のデータセット内に表示されます。

データセットのアクティビティを確認するには、 [Experience Platformユーザーインターフェイスを使用します](https://platform.adobe.com)。 左側のナビゲーションで **「Datasets** 」をクリックして、データセットのリストを表示します。 表示されたリストからストリーミング先のデータセットを選択し、 *データセットアクティビティ* ページを開き、選択した期間に送信されたすべてのバッチを表示します。 Experience Platformを使用してデータストリームを監視する方法について詳しくは、ストリーミングデータフローの [監視に関するガイドを参照してください](../quality/monitor-data-flows.md)。

データの取り込みに失敗し、プラットフォームから回復する場合は、失敗したバッチのIDを [データアクセスAPIに送信して取得できます][Data Access Service API]。 詳しくは、失敗したバッチの [取得に関するガイド](../quality/retrieve-failed-batches.md) を参照してください。

### データレイクでストリーミングデータが利用できないのはなぜですか。

バッチ取り込みがデータレークに到達しない原因としては、無効なフォーマット、データの欠落、システムエラーなど、様々な理由があります。 バッチが失敗した理由を判断するには、 [Data Ingest Service APIを使用してバッチを取得し][Data Ingestion Service] 、その詳細を表示する必要があります。 失敗したバッチを取得する手順について詳しくは、失敗したバッチの [取得に関するガイドを参照してください](../quality/retrieve-failed-batches.md)。

### APIリクエストに対して返された応答を解析する方法を教えてください。

最初にサーバーの応答コードをチェックして、要求が受け入れられたかどうかを確認することで、応答を解析できます。 正常な応答コードが返された場合は、 `responses` 配列オブジェクトを確認して取り込みタスクのステータスを判断できます。

成功した単一メッセージのAPIリクエストは、ステータスコード200を返します。 バッチ処理されたメッセージAPIリクエストが成功した（または一部成功した）場合は、ステータスコード207を返します。

次のJSONは、2つのメッセージを持つAPIリクエストの応答オブジェクトの例です。 1つは成功し、1つは失敗しました。 プロパティを正常にストリーミング再生するメッセージ `xactionId` です。 プロパティと応答を返すストリーミングに失敗したメッセージで、 `statusCode` 詳細な情報 `message` が返されます。

```JSON
{
    "inletId": "9b0cb233972f3b0092992284c7353f5eead496218e8441a79b25e9421ea127f5",
    "batchId": "1565638336649:1750:244",
    "receivedTimeMs": 1565638336705,
    "responses": [
        {
            "xactionId": "1565650704337:2124:92:3"
        },
        {
            "statusCode": 400,
            "message": "inletId: [9b0cb233972f3b0092992284c7353f5eead496218e8441a
                79b25e9421ea127f5] 
                imsOrgId: [{IMS_ORG}] 
                Message has unknown xdm format"
        }
    ]
}
```

### リアルタイム顧客プロファイルが送信メッセージを受信しないのはなぜですか。

リアルタイム顧客プロファイルがメッセージを拒否した場合、多くの場合、ID情報が正しくないことが原因です。 これは、IDに対して無効な値または名前空間を指定した結果である可能性があります。

ID名前空間には次の2種類があります。 defaultとcustom. カスタム名前空間を使用する場合は、名前空間がIDサービス内に登録されていることを確認します。 デフォルトおよびカスタム [名前空間の使用について詳しくは、「](../../identity-service/namespaces.md) ID名前空間の概要」を参照してください。

メッセージの取り込みに失敗した理由の詳細については、 [エクスペリエンスプラットフォームUI](https://platform.adobe.com) （英語のみ）を参照してください。 左側のナビゲーションで **「** Monitoring _」をクリックし、「_ Streaming end-to-end」タブを表示して、選択した期間にストリーミングされたメッセージバッチを表示します。