---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: ストリーミング取り込みのトラブルシューティング
topic: troubleshooting
translation-type: tm+mt
source-git-commit: 4817162fe2b7cbf4ae4c1ed325db2af31da5b5d3

---


# ストリーミング取り込みのトラブルシューティングガイド

このドキュメントでは、Adobe Experience Platformでのストリーミングの取り込みに関するよくある質問に対する回答を示します。 すべてのプラットフォームAPIで発生する問題を含む、他のプラットフォームサービスに関する質問とトラブルシューティングについては、Experience Platformのトラブルシューティングガイドを [参照してくださ](../../landing/troubleshooting.md)い。

Adobe Experience Platform Data Ingestionは、データをExperience Platformに取り込むために使用できるRESTful APIを提供します。 取り込んだデータは、個々の顧客のプロファイルをほぼリアルタイムで更新するために使用され、パーソナライズされた関連性のあるエクスペリエンスを複数のチャネルで配信できます。 サービスと様々な [取り込み方法の詳細については](../home.md) 、「データ取り込みの概要」を参照してください。 ストリーミングインジェストAPIの使用方法に関する手順については、ストリーミングインジェストの概要 [を参照してくださ](../streaming-ingestion/overview.md)い。

## FAQ

次に、ストリーミングリストに関するよくある質問に対する回答を示します。

### 送信するペイロードが正しくフォーマットされていることを知る方法を教えてください。

データ取り込みでは、Experience Data Model(XDM)スキーマを利用して、受信データの形式を検証します。 事前に定義されたXDMデータの構造に準拠しないデータを送信すると、スキーマの取り込みに失敗します。 XDMとExperience Platformでの使用について詳しくは、 [XDM Systemの概要を参照してください](../../xdm/home.md)。

ストリーミング取り込みでは、次の2つの検証モードがサポートされます。同期および非同期。 検証方法ごとに、失敗したデータの処理方法が異なります。

**同期検証は** 、開発プロセスで使用します。 検証に失敗したレコードは削除され、失敗した理由に関するエラーメッセージが返されます(例：&quot;Invalid XDM Message Format&quot;)。

**実稼働環境では** 、非同期検証を使用する必要があります。 検証に合格しない形式のデータは、失敗したバッチファイルとしてData Lakeに送信され、後で取得して、さらに分析できます。

同期検証と非同期検証について詳しくは、ストリーミング検証の概 [要を参照してください](../quality/streaming-validation.md)。 検証に失敗したバッチを表示する手順については、失敗したバッチの取得に関するガイドを参 [照してください](../quality/retrieve-failed-batches.md)。

### リクエストペイロードをプラットフォームに送信する前に検証できますか。

リクエストペイロードは、プラットフォームに送信された後でのみ評価できます。 同期検証を実行すると、有効なペイロードは入力されたJSONオブジェクトを返し、無効なペイロードはエラーメッセージを返します。 非同期検証中に、サービスは不正なデータを検出してData Lakeに送信し、後でそのデータを取得して分析します。 See the [streaming validation overview](../quality/streaming-validation.md) for more information.

### 同期検証がサポートされていないエッジで同期検証が要求された場合、どうなりますか？

要求された場所で同期検証がサポートされていない場合、501エラー応答が返されます。 同期検証について詳し [くは、ストリーミング検証の概要](../quality/streaming-validation.md) 、を参照してください。

### 送信データを認証する方法を教えてください。

エクスペリエンスプラットフォームは、セキュリティで保護されたデータ収集をサポートします。 認証済みのデータ収集が有効な場合、クライアントはJSON Web Token(JWT)とIMS組織IDをリクエストヘッダーとして送信する必要があります。 認証済みデータをプラットフォームに送信する方法について詳しくは、認証済みデータ収集のガイドを参 [照してください](../tutorials/create-authenticated-streaming-connection.md)。

### リアルタイム顧客プロファイルへのデータのストリーミングの遅延は何ですか。

ストリームイベントは、通常、60秒未満でリアルタイム顧客プロファイルに反映されます。 実際の待ち時間は、データ量、メッセージサイズ、帯域幅の制限によって異なる場合があります。

### 同じAPIリクエストに複数のメッセージを含めることはできますか。

複数のメッセージを1つのリクエストペイロード内でグループ化し、プラットフォームにストリーミング配信できます。 正しく使用すると、1つのリクエスト内で複数のメッセージをグループ化することが、データ操作を最適化する優れた方法です。 詳細については、複数のメッセー [ジをリクエストで送信する方法のチュートリアル](../tutorials/streaming-multiple-messages.md) を参照してください。

### 送信するデータが受信されているかどうかを知る方法を教えてください。

プラットフォームに送信されるすべてのデータ（正常に、またはその他の方法で）は、データセットに保持される前にバッチファイルとして保存されます。 バッチの処理ステータスは、送信先のデータセット内に表示されます。

データセットのアクティビティを確認するには、 [Experience Platformユーザーインターフェイスを使用します](https://platform.adobe.com)。 左側のナ **ビゲーションで** 「Datasets」をクリックし、データセットのリストを表示します。 表示されたリストからストリーミング先のアクティビティセットを選択し、そのデータセットのデータセットの選択ページを開き ** 、選択した期間に送信されたすべてのバッチが表示されます。 エクスペリエンスプラットフォームを使用してデータストリームを監視する方法について詳しくは、ストリーミングデータフローの監視に関する [ガイドを参照してくださ](../quality/monitor-data-flows.md)い。

データの取り込みに失敗し、プラットフォームから回復する場合は、失敗したバッチのIDをデータアクセスAPIに送信することで、そのバッチを取 [得できます][Data Access Service API]。 詳しくは、失敗したバッチの取 [得に関するガイド](../quality/retrieve-failed-batches.md) を参照してください。

### ストリーミングデータがData Lakeで使用できないのはなぜですか。

バッチ取り込みがデータレークに到達しない原因としては、無効な形式、データが見つからない、システムエラーなど、様々な理由があります。 バッチが失敗した理由を判断するには、 [Data Ingest Service APIを使用してバッチを取得し、その詳細を][Data Ingestion Service] 表示する。 失敗したバッチを取得する手順について詳しくは、失敗したバッチの取得に関するガイドを [参照してくださ](../quality/retrieve-failed-batches.md)い。

### APIリクエストに対して返された応答を解析する方法を教えてください。

応答を解析するには、最初にサーバー応答コードをチェックし、要求が受け入れられたかどうかを確認します。 成功した応答コードが返された場合は、配列オブジェクトを確認し `responses` て、インジェストタスクのステータスを判断します。

成功した単一メッセージAPIリクエストは、ステータスコード200を返します。 正常に（または部分的に成功した）バッチ処理されたメッセージAPIリクエストは、ステータスコード207を返します。

次のJSONは、2つのメッセージを含むAPIリクエストの応答オブジェクトの例です。1つは成功し、1つは失敗しました。 正常にストリーミングされるメッセージは、プロパティを返 `xactionId` します。 ストリーミングに失敗したメッセージは、プロパ `statusCode` ティと応答を返し、詳 `message` 細情報が返されます。

```JSON
{
    "inletId": "9b0cb233972f3b0092992284c7353f5eead496218e8441a79b25e9421ea127f5",
    "batchId": "1565638336649:1750:244",
    "receivedTimeMs": 1565638336705,
    "responses": [
        {
            "xactionId": "1565650704337:2124:92:3"
        },
        {
            "statusCode": 400,
            "message": "inletId: [9b0cb233972f3b0092992284c7353f5eead496218e8441a
                79b25e9421ea127f5] 
                imsOrgId: [{IMS_ORG}] 
                Message has unknown xdm format"
        }
    ]
}
```

### 送信したメッセージがリアルタイム顧客のプロファイルに届かない理由

リアルタイム顧客プロファイルがメッセージを拒否した場合、ID情報が正しくないことが原因の可能性が高くなります。 これは、IDに無効な値または名前空間を指定した結果です。

ID名前空間には、defaultとcustom。 カスタム名前空間を使用する場合は、名前空間がIDサービス内に登録されていることを確認します。 デフォルトおよびカ [スタム名前空間の使用](../../identity-service/namespaces.md) （英語）について詳しくは、「ID名前空間の概要」を参照してください。

Experience Platform UIを使用して [](https://platform.adobe.com) 、メッセージの取り込みに失敗した理由の詳細を確認できます。 左側のナ **ビゲーションで** 「Monitoring」をクリックし、「 _Streaming end-to-end_ 」タブを表示して、選択した期間にストリーミングされたメッセージバッチを表示します。