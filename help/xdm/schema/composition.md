---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: スキーマ組成の基本
topic: overview
translation-type: tm+mt
source-git-commit: d04bf35e49488ab7d5e07de91eb77d0d9921b6fa
workflow-type: tm+mt
source-wordcount: '2628'
ht-degree: 0%

---


# スキーマ組成の基本

このドキュメントでは、 [!DNL Experience Data Model] (XDM)スキーマと、Adobe Experience Platformで使用するスキーマを構成するための構成要素、原則、ベストプラクティスを紹介します。 XDMの一般的な情報とXDM内での使用方法については、「 [!DNL Platform]XDMシステムの概要 [](../home.md)」を参照してください。

## スキーマについて

スキーマは、データの構造と形式を表し、検証する一連のルールです。 高いレベルで、スキーマは現実世界のオブジェクト（人など）の抽象的な定義を提供し、そのオブジェクトの各インスタンスに含めるデータ（名、姓、誕生日など）の概要を示します。

スキーマは、データの構造に加えて、制約や期待をデータに適用し、システム間を移動する際に検証できるようにします。 これらの標準の定義により、接触チャネルに関係なく一貫した形でデータを解釈でき、複数のアプリケーション間での翻訳を必要としなくなります。

[!DNL Experience Platform] スキーマを使用して、このセマンティックの正規化を維持します。 スキーマはのデータを記述する標準的な方法で [!DNL Experience Platform]あり、スキーマに準拠するすべてのデータを組織間で競合なく再利用可能にし、複数の組織間で共有可能にすることができます。

### リレーショナルテーブルと埋め込みオブジェクト

リレーショナルデータベースを扱う場合、ベストプラクティスでは、データの標準化、またはエンティティの取得と分割を個別の部分に分割し、複数のテーブルに表示します。 データ全体を読み取る、またはエンティティを更新するために、読み取り/書き込み操作は、JOINを使用して、多くの個々のテーブルに対して行う必要があります。

XDMスキーマは、埋め込みオブジェクトを使用することで、複雑なデータを直接表現し、階層構造を持つ独立したドキュメントに格納できます。 この構造の主な利点の1つは、複数の非正規化テーブルへの高価な結合によってエンティティを再構築することなく、データをクエリできる点です。

### スキーマとビッグデータ

最新のデジタルシステムは、大量の行動信号（トランザクションデータ、ウェブログ、物のインターネット、表示など）を生成します。 この大規模なデータオファーは、エクスペリエンスを最適化する非常に大きな機会ですが、データの規模と種類が大きいので使用が困難です。 データから値を取得するには、一貫性と効率性を持って処理できるように、データの構造、形式および定義を標準化する必要があります。

スキーマは、複数のソースからデータを統合し、共通の構造と定義を通じて標準化し、ソリューション間で共有することで、この問題を解決します。 これにより、後続のプロセスやサービスは、データに関する質問に対して、従来のデータモデリングアプローチとは異なり、データに関する質問を事前に把握し、データを期待に沿ってモデル化します。

### スキーマベースのワークフロー [!DNL Experience Platform]

標準化は、重要な概念で [!DNL Experience Platform]す。 XDMは、アドビが推進する機能で、カスタマーエクスペリエンスデータを標準化し、カスタマーエクスペリエンス管理の標準的なスキーマを定義する取り組みです。

構築されるインフラストラクチャ [!DNL Experience Platform] は、スキーマベースのワークフローを容易にし、 [!DNL XDM System]、 [!DNL Schema Registry][!DNL Schema Editor]スキーマのメタデータ、サービスの消費パターンを含みます。これらのインフラストラクチャは、これらを基盤としています。 See the [XDM System overview](../home.md) for more information.

## スキーマの計画

スキーマを構築する最初の手順は、スキーマ内で捕捉しようとする概念、つまり現実世界のオブジェクトを決定することです。 説明しようとしている概念を特定したら、データの種類、潜在的なIDフィールド、将来のスキーマの発展について考えることで、スキーマの計画を始めることができます。

### データ動作( [!DNL Experience Platform]

での使用を意図したデータは、2つの動作タイプ [!DNL Experience Platform] に分類されます。

* **Record data**: 件名の属性に関する情報を提供します。 件名は、組織または個人にすることができます。
* **時系列データ**: レコードの件名によって直接または間接的にアクションが実行された時点のシステムのスナップショットを提供します。

すべてのXDMスキーマは、レコードまたは時系列として分類できるデータを記述します。 スキーマのデータ動作は、スキーマの **クラス**(最初に作成されたときにスキーマに割り当てられる)によって定義されます。 XDMクラスについては、このドキュメントで後述します。

レコードと時系列の両方のスキーマには、IDのマップ(`xdm:identityMap`)が含まれます。 このフィールドには、次のセクションで説明するように、「ID」とマークされたフィールドから描画される、件名のID表現が含まれます。

### [!UICONTROL ID]

スキーマは、データをに取り込むために使用され [!DNL Experience Platform]ます。 このデータは、複数のサービスで使用して、個々のエンティティの単一の統合表示を作成できます。 したがって、「[!UICONTROL ID]」について考える際はスキーマを考えることが重要です。また、データの送信元に関係なく、どのフィールドを使用して件名を識別できるかが重要です。

この処理に役立つように、主要フィールドを「[!UICONTROL ID]」としてマークすることができます。 データ取り込み時に、これらのフィールド内のデータが個々の「[!UICONTROL IDグラフ]」に挿入されます。 グラフデータは、その後、 [!DNL Real-time Customer Profile](../../profile/home.md) および他のサー [!DNL Experience Platform] ビスによってアクセスされ、個々の顧客の組み合わせ表示を提供できます。

「[!UICONTROL ID]」として一般的にマークされるフィールドには、次のものがあります。 電子メールアドレス、電話番号、 [!DNL Experience Cloud ID (ECID)](https://docs.adobe.com/content/help/ja-JP/id-service/using/home.html)CRM IDまたはその他の一意のIDフィールド。 また、「[!UICONTROL ID]」フィールドとしても適切な場合があるので、組織に固有の一意の識別子も考慮する必要があります。

スキーマ計画段階で顧客のIDを考えて、最も堅牢なプロファイルを構築するためにデータを統合できるようにすることが重要です。 ユーザーにデジタルエクスペリエンスを提供する際にID情報がどのように役立つかについて詳しくは、 [IDサービスの概要](../../identity-service/home.md) （英語）を参照してください。

### スキーマ進化の原則 {#evolution}

デジタルエクスペリエンスの本質が進化し続けるにつれて、スキーマがデジタルエクスペリエンスを表現する必要があります。 したがって、適切に設計されたスキーマは、スキーマの以前のバージョンに破壊的な変更を加えることなく、必要に応じて適応し、進化することができます。

下位互換性の維持はスキーマの発展にとって重要なので、では、完全に加算的なバージョン管理原則を適用して、スキーマに対するすべてのリビジョンが非破壊的な更新と変更の結果のみを生み出すようにします。 [!DNL Experience Platform] つまり、変更の **破棄はサポートされていません。**

| サポートされる変更 | 変更の破棄（未サポート） |
|------------------------------------|---------------------------------|
| <ul><li>既存のスキーマへの新しいフィールドの追加</li><li>必須フィールドのオプション化</li></ul> | <ul><li>以前に定義したフィールドの削除</li><li>新しい必須フィールドの紹介</li><li>既存のフィールドの名前の変更または再定義</li><li>以前サポートされていたフィールド値の削除または制限</li><li>ツリー内の別の場所への属性の移動</li></ul> |

>[!NOTE]
>
>スキーマがまだデータを取り込むために使用されていない場合 [!DNL Experience Platform]は、そのスキーマに改ざんが発生する可能性があります。 ただし、でスキーマを使用した後は、追加のバージョン管理ポリシーに従う [!DNL Platform]必要があります。

### スキーマとデータの取り込み

データをに取り込むには、まずデータセット [!DNL Experience Platform]を作成する必要があります。 データセットはデータ変換と追跡の基礎となる要素で [!DNL Catalog Service](../../catalog/home.md)あり、通常は取り込んだデータを含むテーブルやファイルを表します。 すべてのデータセットは既存のXDMスキーマに基づいており、取り込むデータの内容と構造化方法に制約があります。 詳しくは、 [Adobe Experience Platformデータ取り込みの概要](../../ingestion/home.md) （英語）を参照してください。

## スキーマの構成要素

[!DNL Experience Platform] では、標準の構築ブロックを組み合わせてスキーマを作成する組版アプローチを使用します。 このアプローチは、既存のコンポーネントの再利用を促進し、のベンダーのスキーマとコンポーネントをサポートするために、業界全体の標準化を推進 [!DNL Platform]します。

スキーマは次の式を使用して構成されます。

**Class + Mixin&amp;ast; = XDMスキーマ**

&amp;ast;スキーマは、クラスと _0個以上の_ mixinで構成されます。 つまり、ミックスインをまったく使用せずにデータセットスキーマを作成できます。

### クラス

スキーマの構成は、クラスの割り当てから始まります。 スキーマに格納されるデータ（レコードまたは時系列）の行動面を定義するクラスです。 このクラスに加えて、そのクラスに基づくすべてのスキーマが必要とする最小の共通プロパティを記述するクラスもあります。これにより、互換性のある複数のデータセットをマージする手段が提供されます。

また、クラスは、スキーマでどのミックスインを使用できるかを決定します。 この点については、後述の [mixin](#mixin) 節で詳しく説明します。

のすべての統合で提供される標準クラスがあり [!DNL Experience Platform]、「Industry」クラスと呼ばれます。 業界クラスは、一般的に認められる業界標準で、広範な使用例に適用されます。 Industryクラスの例としては、アドビが提供するクラス [!DNL XDM Individual Profile] と [!DNL XDM ExperienceEvent] クラスがあります。

[!DNL Experience Platform] また、「Vendor」クラスも使用できます。これは、パートナーによって定義され、内でそのベンダーサービスまたはアプリケーションを使用するすべての顧客が利用でき [!DNL Experience Platform][!DNL Platform]ます。

「顧客」クラスと呼ばれる、内の個々の組織の具体的な使用例を説明するクラス [!DNL Platform]もあります。 顧客クラスは、一意の使用例を説明するためのIndustryクラスまたはVendorクラスがない場合に、組織によって定義されます。

例えば、忠誠度プログラムのメンバーを表すスキーマは、個人に関するレコードデータを記述するので、Adobeが定義する標準的なIndustryクラスである [!DNL XDM Individual Profile] クラスに基づくことができます。

### Mixin {#mixin}

ミックスインは、個人の詳細、ホテルの環境設定、住所などの特定の機能を実装する1つ以上のフィールドを定義する再利用可能なコンポーネントです。 ミックスインは、互換性のあるクラスを実装するスキーマの一部として含めることを意図しています。

ミックスインは、表すデータ（レコードまたは時系列）の動作に基づいて、互換性のあるクラスを定義します。 つまり、すべてのクラスで使用できるミックスインがあるわけではありません。

ミックスインは、クラスと同じスコープと定義を持ちます。 を使用する個々の組織で定義される業界ミックスイン、ベンダーミックスイン、および顧客ミックスインがあ [!DNL Platform]ります。 [!DNL Experience Platform] には多くの標準的な業界ミックスインが含まれていますが、ベンダーはユーザーのミックスインを定義でき、個々のユーザーは独自の概念のミックスインを定義できます。

例えば、「[!UICONTROL Royality Members]」スキーマの「[!UICONTROL First Name]」や「[!UICONTROL Home Address]」などの詳細を取り込むには、これらの共通概念を定義する標準ミックスインを使用できます。 ただし、あまり一般的でない使用例に特有の概念(「[!UICONTROL 忠誠度プログラムレベル]」など)には、多くの場合、事前に定義されたミックスインがありません。 この場合、この情報を取り込むには、独自のミックスインを定義する必要があります。

スキーマは「0個以上」のミックスインで構成されているので、これは、ミックスインを一切使用せずに有効なスキーマを構成できることを意味します。

### Data type {#data-type}

データ型は、基本的なリテラルフィールドと同様に、クラスまたはスキーマで参照フィールド型として使用されます。 主な違いは、データ型は複数のサブフィールドを定義できる点です。 mixinと同様、データ型は複数フィールド構造の一貫した使用を可能にしますが、データ型はフィールドの「データ型」として追加することでスキーマ内のどこにでも含めることができるので、mixinよりも柔軟性が高くなります。

[!DNL Experience Platform] には、一般的なデータ構造を記述するための標準パターンの使用をサポートするため [!DNL Schema Registry] の一部として、多くの共通データ型が用意されています。 これについては、 [!DNL Schema Registry] チュートリアルで詳しく説明しています。データタイプを定義する手順を実行すると、より明確になります。

### フィールド

フィールドは、スキーマの最も基本的な構成要素です。 フィールドには、特定のデータ型を定義することで、フィールドに含めることができるデータの種類に関する制約があります。 これらの基本的なデータ型は1つのフィールドを定義しますが、 [前述の](#data-type) データ型では、複数のサブフィールドを定義し、同じ複数フィールド構造を様々なスキーマで再利用できます。 したがって、フィールドの「データ型」をレジストリで定義されたデータ型の1つとして定義するだけでなく、次のような基本的なスカラー型も [!DNL Experience Platform] サポートします。

* 文字列
* 整数
* 数値
* Boolean
* 配列
* オブジェクト

これらのスカラー型の有効範囲は、特定のパターン、形式、最小/最大値、または事前定義済みの値にさらに制限できます。 これらの制約を使用すると、以下のような様々な特定のフィールドタイプを表すことができます。

* 列挙
* ロング
* Short
* バイト
* 日付
* 日時
* マップ

>[!NOTE]
>
>「map」フィールドタイプを使用すると、1つのキーに対する複数の値を含むキーと値のペアのデータを取得できます。 マップはシステムレベルでのみ定義できます。つまり、業界またはベンダー定義のスキーマでマップが見つかる場合がありますが、定義したフィールドでは使用できません。 フィールドの種類の定義について詳しくは、『 [スキーマレジストリAPI開発者ガイド](../api/getting-started.md) 』を参照してください。

ダウンストリームサービスやアプリケーションで使用される一部のデータ操作では、特定のフィールドタイプに制約が適用されます。 影響を受けるサービスには、次のものがあります。

* [!DNL Real-time Customer Profile](../../profile/home.md)
* [!DNL Identity Service](../../identity-service/home.md)
* [!DNL Segmentation](../../segmentation/home.md)
* [!DNL Query Service](../../query-service/home.md)
* [!DNL Data Science Workspace](../../data-science-workspace/home.md)

ダウンストリームサービスで使用するスキーマを作成する前に、スキーマが対象とするデータ操作のフィールド要件と制約をより深く理解するために、該当するサービスの適切なドキュメントを確認してください。

### XDMフィールド

XDMは、基本的なフィールドと独自のデータ型を定義する機能に加えて、サー [!DNL Experience Platform] ビスで暗黙的に認識される標準的なフィールドとデータ型のセットを提供し、コンポーネント間で使用される場合の一貫性を高め [!DNL Platform] ます。

「名」や「電子メールアドレス」などのこれらのフィールドには、基本的なスカラーフィールド型以外の記述が追加され、同じXDMデータ型を共有するすべてのフィールド [!DNL Platform] が同じように動作することを示します。 この動作は、データの送信元や使用中のサー [!DNL Platform] ビスに関係なく、信頼できるため、一貫性を保つことができます。

使用可能なXDMフィールドの完全なリストについては、 [XDMフィールドディクショナリ](field-dictionary.md) (XDM field dictionary)を参照してください。 XDMフィールドとデータ型は、できる限り、XDMフィールドとデータ型を使用して、全体の一貫性と標準化をサポートすることをお勧め [!DNL Experience Platform]します。

## 組版の例

スキーマは、に取り込まれ、コンポジションモデルを使用して構築されるデータの形式 [!DNL Platform]と構造を表します。 前述したように、これらのスキーマは、クラスと、そのクラスと互換性のある0個以上のミックスインで構成されます。

例えば、小売店で行われた購入を説明するスキーマを「[!UICONTROL 店舗トランザクション]」と呼びます。 このスキーマは、標準の [!DNL XDM ExperienceEvent] コマースミックスインとユーザ定義の [!UICONTROL 製品情報ミックスインを組み合わせた] クラスを実装します。

Webサイトトラフィックを追跡する別のスキーマは、「[!UICONTROL Web訪問回数]」と呼ばれる場合があります。 クラスも実装しますが、 [!DNL XDM ExperienceEvent] 今回は標準的な [!UICONTROL Web] ミックスインを組み合わせます。

次の図に、これらのスキーマと各ミックスインが貢献するフィールドを示します。 また、このガイドで前述した「 [!DNL XDM Individual Profile] 忠誠度メンバ」スキーマを含む、クラスに基づく2つのスキーマも含まれます。

![](../images/schema-composition/composition.png)

### 和集合 {#union}

特定の使用例に対してスキーマを作成で [!DNL Experience Platform] きますが、特定のクラスタイプのスキーマの「和集合」を確認することもできます。 上の図は、XDM ExperienceEventクラスに基づく2つのスキーマと、クラスに基づく2つのスキーマを示してい [!DNL XDM Individual Profile] ます。 以下に示す和集合は、同じクラス(およびそれ[!DNL XDM ExperienceEvent] ぞれ)を共有するすべてのスキーマのフィールドを集計し [!DNL XDM Individual Profile]ます。

![](../images/schema-composition/union.png)

で使用するスキーマを有効にする [!DNL Real-time Customer Profile]と、そのクラスタイプの和集合に含められます。 [!DNL Profile] 顧客属性の堅牢で一元的なプロファイルと、統合されたあらゆるシステムにおいて顧客が持つすべてのイベントのタイムスタンプのあるアカウントを提供 [!DNL Platform]します。 [!DNL Profile] 和集合表示を使用してこのデータを表し、個々の顧客の全体的な表示を提供します。

での作業について詳し [!DNL Profile]くは、 [リアルタイム顧客プロファイルの概要](../../profile/home.md)を参照してください。

## データ・ファイルのXDMスキーマへのマッピング

に取り込まれるすべてのデータファイルは、XDMスキーマの構造に従う [!DNL Experience Platform] 必要があります。 XDM階層（サンプルファイルを含む）に準拠するためにデータファイルをフォーマットする方法の詳細については、ETL変換の [サンプルに関するドキュメントを参照してください](../../etl/transformations.md)。 データファイルのへの取り込みに関する一般的な情報につ [!DNL Experience Platform]いては、 [バッチ取り込みの概要](../../ingestion/batch-ingestion/overview.md)を参照してください。

## 次の手順

スキーマ構成の基本を理解したら、を使用してスキーマの作成を開始する準備が整い [!DNL Schema Registry]ます。

は、Adobe Experience Platform内 [!DNL Schema Registry][!DNL Schema Library] にアクセスするために使用され、使用可能なすべてのライブラリリソースにアクセスできるユーザーインターフェイスおよびRESTful APIを提供します。 には、アドビが定義する業界リソース、パートナーが定義するベンダーリソース、および組織のメンバーが構成するクラス、ミックスイン、データ型、スキーマが [!DNL Schema Library][!DNL Experience Platform] 含まれます。

UIを使用してスキーマの構成を開始するには、 [スキーマエディタのチュートリアルに従って](../tutorials/create-schema-ui.md) 、このドキュメントで説明する「Loyalty Members」スキーマを作成します。

この [!DNL Schema Registry] APIの使用を開始するには、『 [スキーマレジストリAPI開発ガイド](../api/getting-started.md)』を読んで開始してください。 開発者ガイドを読んだ後、スキーマレジストリAPIを使用したスキーマの [作成に関するチュートリアルで概要を説明している手順に従います](../tutorials/create-schema-api.md)。
