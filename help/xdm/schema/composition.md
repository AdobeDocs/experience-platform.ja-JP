---
keywords: Experience Platform;home;popular topics
solution: Experience Platform
title: スキーマ合成の基本
topic: overview
translation-type: tm+mt
source-git-commit: d0ccaa5511375253a2eca8f1235c2f953b734709

---


# スキーマ合成の基本

このドキュメントでは、Experience Data Model(XDM)スキーマの概要と、Adobe Experience Platformで使用するスキーマを構成するための構成要素、原則およびベストプラクティスを紹介します。 XDMとプラットフォーム内での使用方法に関する一般的な情報については、 [XDMシステムの概要を参照してください](../home.md)。

## スキーマ

スキーマは、データの構造と形式を表し、検証する一連のルールです。 スキーマは、高いレベルで、実世界のオブジェクト（人など）の抽象的な定義を提供し、そのオブジェクトの各インスタンスに含めるデータ（名、姓、誕生日など）の概要を示します。

スキーマは、データの構造を説明するだけでなく、制約や期待をデータに適用し、システム間の移動時に検証できるようにします。 これらの標準的な定義により、接触チャネルに関係なくデータを一貫して解釈でき、アプリケーション間での翻訳の必要性を排除できます。

エクスペリエンスプラットフォームは、このセマンティックの正規化を使用して維持します。スキーマの使用。 スキーマは、スキーマに適合するすべてのデータを組織間で競合なく再利用可能にし、さらに複数の組織間で共有可能にする、Experience Platformの標準的なデータ記述方法です。

### リレーショナル・テーブルと埋め込みオブジェクト

リレーショナルデータベースを使用する場合、ベストプラクティスでは、データの標準化、またはエンティティの取得と分割を行い、複数のテーブルに表示される個別の部分に分割することが重要です。 データ全体の読み取りやエンティティの更新を行うには、JOINを使用して、多くの個々のテーブルに対して読み取り/書き込み操作を行う必要があります。

XDMスキーマは、埋め込みオブジェクトを使用することで、複雑なデータを直接表現し、階層構造を持つ独立したドキュメントに格納できます。 この構造の主な利点の1つは、複数の非正規化テーブルへの高価な結合によってエンティティを再構築しなくても、データをクエリできる点です。

### スキーマとビッグデータ

現代のデジタルシステムは、大量の行動信号（トランザクションデータ、ウェブログ、物のインターネット、ディスプレイなど）を生成する。 この大きなデータオファーは、エクスペリエンスを最適化する非常に大きな機会を生み出しますが、データの規模と多様性が原因で、使用が困難です。 データから値を得るには、一貫性と効率性を持って処理できるように、構造、形式および定義を標準化する必要があります。

スキーマは、複数のソースからのデータの統合、共通の構造や定義による標準化、複数のソリューション間での共有を可能にすることで、この問題を解決します。 これにより、後続のプロセスやサービスは、データに関するあらゆる種類の質問に答え、従来のデータモデリングアプローチから、データに関するすべての質問が事前にわかり、データが期待に沿うようにモデル化されます。

### スキーマベースのワークフロー(Experience Platform)

標準化は、エクスペリエンスプラットフォームの背後にある主要な概念です。 アドビが推進するXDMは、顧客エクスペリエンスデータを標準化し、顧客エクスペリエンス管理の標準スキーマを定義する取り組みです。

Experience Platformが構築されるインフラストラクチャ（XDM Systemと呼ばれる）は、スキーマベースのワークフローを容易にし、スキーマレジストリ、スキーマエディター、スキーマメタデータ、サービス消費パターンを含みます。 See the [XDM System overview](../home.md) for more information.

## スキーマ

スキーマを構築する最初の手順は、スキーマ内で捕捉しようとする概念、すなわち現実世界のオブジェクトを決定することです。 説明しようとしている概念を特定したら、データのタイプ、潜在的なIDフィールド、将来のスキーマの発展について考え、スキーマの計画を始めることができます。

### エクスペリエンスプラットフォームでのデータ動作

エクスペリエンスプラットフォームでの使用を意図したデータは、次の2つの動作タイプに分類されます。

* **Record data**:件名の属性に関する情報を提供します。 件名は、組織または個人にすることができます。
* **時系列データ**:レコードの件名によって直接または間接的にアクションが実行された時点のシステムのスナップショットを提供します。

すべてのXDMスキーマは、レコードまたは時系列として分類できるデータを記述します。 スキーマのデータ動作は、スキーマのクラスによっ **て定義され**、スキーマの作成時に割り当てられます。 XDMクラスについては、このドキュメントで後述します。

レコードと時系列の両方のスキーマには、IDのマップ(`xdm:identityMap`)が含まれます。 このフィールドには、次の節で説明する「ID」とマークされたフィールドから作成された、件名のID表現が含まれます。

### ID

スキーマは、データをエクスペリエンスプラットフォームに取り込むために使用されます。 このデータは、複数のサービスで使用して、個々のエンティティの単一の統合表示を作成できます。 したがって、スキーマについて考える際には、「ID」と、どのフィールドを使用してデータの送信元に関係なく、主題を識別できるかを考慮することが重要です。

この処理を支援するために、キーフィールドを「ID」としてマークできます。 データの取り込み時に、これらのフィールドのデータがその個人の「アイデンティティグラフ」に挿入されます。 その後、リアルタイム顧客プロファイルおよび他の [Experience Platformサービスによって](../../profile/home.md) 、グラフデータにアクセスして、各顧客の関連付けられた表示を提供できます。

一般に「ID」とマークされるフィールドには、次のものが含まれます。電子メールアドレス、電話番号、 [Experience Cloud ID(ECID)](https://marketing.adobe.com/resources/help/ja_JP/mcvid/)、CRM IDまたはその他の一意のIDフィールド。 また、「ID」フィールドとしても適切な場合があるので、組織に固有の一意の識別子も考慮する必要があります。

スキーマ計画段階で顧客のIDを考慮し、可能な限り堅牢なプロファイルを構築するためにデータを統合できるようにすることが重要です。 ID情報が顧客にデジ [タルエクスペリエンスを提供する方法について詳しくは](../../identity-service/home.md) 、IDサービスの概要を参照してください。

### スキーマ進化の原理 {#evolution}

デジタルエクスペリエンスの本質が進化し続けるにつれ、デジタルエクスペリエンスを表すスキーマが必要になります。 したがって、適切に設計されたスキーマは、必要に応じて適応し、進化し、以前のバージョンのスキーマに破壊的な変更を加えることなく使用できます。

スキーマの進化には後方互換性の維持が重要なので、Experience Platformでは、スキーマのリビジョンが非破壊的な更新と変更のみを生み出すように、完全に加算的なバージョン管理原則が適用されます。 つまり、変更の解除 **はサポートされません。**

| サポートされる変更 | 変更の破棄（未サポート） |
|------------------------------------|---------------------------------|
| <ul><li>既存のフィールドへの新しいフィールドのスキーマ</li><li>必須フィールドのオプション化</li></ul> | <ul><li>以前に定義したフィールドの削除</li><li>新しい必須フィールドの紹介</li><li>既存のフィールドの名前の変更または再定義</li><li>以前にサポートされていたフィールド値の削除または制限</li><li>ツリー内の別の場所への属性の移動</li></ul> |

>[!NOTE] スキーマがまだデータをエクスペリエンスプラットフォームに取り込んでいない場合は、そのプラットフォームに改善点がある可能性があります。スキーマ ただし、プラットフォームでスキーマを使用した後は、追加のバージョン管理ポリシーに従う必要があります。

### スキーマとデータの取り込み

データをExperience Platformに取り込むには、まずデータセットを作成する必要があります。 データセットは、 [Catalog Serviceのデータ変換と追跡のための構成要素であり](../../catalog/home.md)、一般に、取り込んだデータを含むテーブルやファイルを表します。 すべてのデータセットは既存のXDMスキーマに基づいており、取り込むデータの内容と構造の制約を提供します。 詳しくは、 [Adobe Experience Platform Data Ingestの概要を参照してください](../../ingestion/home.md) 。

## スキーマ

Experience Platformでは、標準の構築ブロックを組み合わせて組版アプローチを使用してスキーマを作成します。 このアプローチは、既存のコンポーネントの再利用を促進し、業界全体の標準化を推進して、プラットフォームのベンダーのスキーマとコンポーネントをサポートします。

スキーマは、次の式を使用して構成されます。

**Class + Mixin&amp;ast;= XDMスキーマ**

&amp;ast;スキーマは、クラスと0個以上のミック _スインで構成され_ ます。 つまり、ミックスインを使用せずにデータセットスキーマを作成できます。

### クラス

クラスを割り当てることで、スキーマの構成が開始されます。 クラスは、スキーマに含まれるデータ（レコードまたは時系列）の行動面を定義します。 さらに、クラスは、そのクラスに基づくすべてのスキーマが含め、複数の互換性のあるデータセットをマージする方法を提供する必要がある最も小さい数の共通プロパティを記述します。

クラスは、どのミックスインをスキーマで使用できるかを決定します。 これについては、後述の「ミックスイン」の節で [詳しく](#mixin) 説明します。

「業界」クラスと呼ばれる、Experience Platformのすべての統合で提供される標準クラスがあります。 業界クラスは、一般的に認められる業界標準で、幅広い使用例に適用されます。 Industryクラスの例としては、アドビが提供するXDM IndividurealプロファイルおよびXDM ExperienceEventクラスがあります。

また、Experience Platformでは、「ベンダー」クラスも使用できます。「ベンダー」クラスは、Experience Platformパートナーによって定義され、プラットフォーム内でそのベンダーのサービスまたはアプリケーションを使用するすべての顧客が使用できるクラスです。

また、「顧客」クラスと呼ばれる、プラットフォーム内の個々の組織の具体的な使用例を説明するクラスもあります。 顧客クラスは、一意の使用例を説明するために使用できるIndustryクラスまたはVendorクラスがない場合、組織によって定義されます。

例えば、忠誠度プログラムのメンバーを表すスキーマは、個人に関するレコードデータを記述するので、XDM個人プロファイルクラス（Adobeが定義する標準的なIndustryクラス）に基づくことができます。

### ミキシン {#mixin}

ミックスインは、個人の詳細、ホテルの環境設定、住所などの特定の機能を実装する1つ以上のフィールドを定義する再利用可能なコンポーネントです。 ミックスインは、互換性のあるクラスを実装するスキーマの一部として含まれることを意図しています。

ミックスインは、表すデータ（レコードまたは時系列）の動作に基づいて、互換性のあるクラスを定義します。 つまり、すべてのミックスインがすべてのクラスで使用できるわけではありません。

ミックスインのスコープと定義はクラスと同じです。プラットフォームを使用する個々の組織で定義される、業界ミックスイン、ベンダーミックスイン、顧客ミックスインがあります。 エクスペリエンスプラットフォームには多くの標準的な業界ミックスインが含まれていますが、ベンダーはユーザーのミックスインを定義し、個々のユーザーは独自の概念のミックスインを定義できます。

例えば、「忠誠度メンバー」スキーマの「名」や「ホームアドレス」などの詳細を取り込むには、これらの共通概念を定義する標準的なミックスインを使用できます。 ただし、あまり一般的でない使用例に固有の概念(「忠誠度のプログラムレベル」など)には、多くの場合、事前に定義されたミックスインが含まれていません。 この場合、この情報を取り込むには、独自のミックスインを定義する必要があります。

スキーマは「0個以上」のミックスインで構成されているので、ミックスインを一切使用せずに有効なスキーマを作成できます。

### Data type {#data-type}

データ型は、基本リテラルフィールドと同様に、クラスやスキーマの参照フィールド型として使用されます。 主な違いは、データ型が複数のサブフィールドを定義できる点です。 ミックスインと同様に、データ型はマルチフィールド構造の一貫した使用を可能にしますが、データ型はフィールドの「データ型」として追加することでスキーマ内の任意の場所に含めることができるので、ミックスインよりも柔軟性が高くなります。

Experience Platformは、スキーマレジストリの一部として、共通のデータ構造を記述するための標準パターンの使用をサポートする、多数の共通のデータ型を提供します。 これについて詳しくは、スキーマレジストリのチュートリアルで説明しています。データ型を定義する手順を実行すると、より明確になります。

### フィールド

フィールドは、スキーマの最も基本的な構成要素です。 フィールドには、特定のデータ型を定義することで含めることができるデータの種類に関する制約が含まれます。 これらの基本的なデータ型は単一のフィールドを定義しますが [](#data-type) 、前述のデータ型では複数のサブフィールドを定義し、様々なスキーマで同じ複数フィールド構造を再利用できます。 したがって、フィールドの「データ型」をレジストリで定義されたデータ型の1つとして定義する以外に、Experience Platformは、次のような基本的なスカラー型をサポートしています。

* 文字列
* 整数
* 数値
* Boolean
* 配列
* オブジェクト

これらのスカラー型の有効な範囲は、特定のパターン、形式、最小/最大値、または事前定義値にさらに制限できます。 これらの制約を使用すると、以下のような、より詳細なフィールドタイプを幅広く表すことができます。

* 列挙
* ロング
* 短い
* バイト
* 日付
* 日時
* マップ

>[!NOTE] 「map」フィールドタイプを使用すると、キーと値のペアのデータ（1つのキーの複数の値を含む）を取得できます。 マップは、システムレベルでのみ定義できます。つまり、業界またはベンダー定義のスキーマでマップが見つかる場合がありますが、定義したフィールドでは使用できません。 フィールド [の種類の定義について詳しくは](../api/getting-started.md) 、スキーマレジストリAPI開発者ガイドを参照してください。

ダウンストリームサービスやアプリケーションで使用される一部のデータ操作では、特定のフィールドタイプに制約が適用されます。 影響を受けるサービスには、次のものが含まれます。

* [リアルタイム顧客プロファイル](../../profile/home.md)
* [ID サービス](../../identity-service/home.md)
* [セグメント](../../segmentation/home.md)
* [クエリサービス](../../query-service/home.md)
* [Data Science Workspace](../../data-science-workspace/home.md)

ダウンストリームサービスで使用するスキーマを作成する前に、スキーマが意図するデータ操作のフィールド要件と制約をより深く理解するために、これらのサービスに関する適切なドキュメントを確認してください。

### XDMフィールド

XDMは、基本フィールドと独自のデータ型を定義する機能に加え、Experience Platformサービスで暗黙的に認識されるフィールドとデータ型の標準セットを提供し、プラットフォームコンポーネント間で使用する場合に一貫性を高めます。

「名」や「電子メールアドレス」などのフィールドには、基本的なスカラーフィールド型以外にも、同じXDMデータ型を共有するすべてのフィールドが同じように動作することをプラットフォームに伝える追加の記述が含まれます。 この動作は、データの送信元やデータが使用されているプラットフォームサービスに関係なく、一貫性を保つために信頼できます。

使用可能なXDMフィールドの完全なリストについては [](field-dictionary.md) 、XDMフィールドディクショナリを参照してください。 Experience Platform全体での一貫性と標準化をサポートするために、可能な限りXDMフィールドとデータ型を使用することをお勧めします。

## 組版の例

スキーマは、プラットフォームに取り込まれ、構成モデルを使用して構築されるデータの形式と構造を表します。 前述のとおり、これらのスキーマはクラスと、そのクラスと互換性のある0個以上のミックスインで構成されます。

例えば、小売店で行われたスキーマを「店舗トランザクション」と呼ぶことができます。 このスキーマは、標準のコマースミックスインとユーザ定義の製品情報ミックスインを組み合わせたXDM ExperienceEventクラスを実装します。

別のスキーマは、Webサイトトラフィックを追跡するもので、「Web訪問回数」と呼ばれる場合があります。 また、XDM ExperienceEventクラスも実装しますが、今回は標準のWebミックスインを組み合わせます。

次の図に、これらのスキーマと各ミックスインが寄与するフィールドを示します。 また、XDM個々のプロファイルクラスに基づく2つのスキーマが含まれています。この中には、このガイドで前述した「Loyalty Members」スキーマが含まれています。

![](../images/schema-composition/composition.png)

### 和集合 {#union}

Experience Platformでは特定の使用事例のスキーマを作成できますが、特定のクラスタイプのスキーマの「和集合」を確認することもできます。 上の図は、XDM ExperienceEventクラスに基づく2つのスキーマと、XDM Individualスキーマクラスに基づく2つのプロファイルを示しています。 次に示す和集合は、同じクラス(XDM ExperienceEventとXDM Individualプロファイル)を共有するすべてのスキーマのフィールドを集計します。

![](../images/schema-composition/union.png)

スキーマをリアルタイム顧客プロファイルで使用できるようにすると、そのクラスタイプの和集合に含められます。 プロファイルは、お客様の属性を一元的にプロファイルし、Platformと統合されたあらゆるイベントにおいてお客様が持つすべてのシステムのタイムスタンプのあるアカウントを提供します。 プロファイルは、和集合表示を使用してこのデータを表し、各顧客の全体的な表示を提供します。

プロファイルの操作について詳しくは、リアルタイム [顧客プロファイルの概要を参照してください](../../profile/home.md)。

## XDMへのデータ・ファイルのマッピングスキーマ

Experience Platformに取り込まれるすべてのデータファイルは、XDMプラットフォームの構造に従う必要があります。スキーマ XDM階層（サンプル・ファイルを含む）に準拠するようにデータ・ファイルをフォーマットする方法の詳細は、ETL変換のサンプルに関するドキュメントを [参照してくださ](../../etl/transformations.md)い。 データファイルのエクスペリエンスプラットフォームへの取り込みに関する一般的な情報については、バッチ取り込みの概 [要を参照してくださ](../../ingestion/batch-ingestion/overview.md)い。

## 次の手順

これで、スキーマ構成の基本を理解したので、スキーマレジストリを使用してスキーマを作成します。

スキーマレジストリは、Adobe Experience Platform内のスキーマライブラリにアクセスするために使用され、使用可能なすべてのライブラリリソースにアクセスできるユーザーインターフェイスとRESTful APIを提供します。 スキーマライブラリには、アドビが定義する業界リソース、Experience Platformパートナーが定義するベンダーリソース、組織のメンバーが構成するクラス、ミックスイン、データ型、スキーマが含まれます。

UIを使用してスキーマの構成を開始するには、スキーマエディタのチュートリアルと共に [](../tutorials/create-schema-ui.md) 、このドキュメントで取り上げる「Loyalty Members」スキーマを作成します。

スキーマレジストリAPIの使用を開始するには、開始レジストリAPI開発ガ [イドを読んでスキーマします](../api/getting-started.md)。 開発者ガイドを読んだ後、スキーマレジストリAPIを使用したスキーマの作成に関するチュート [リアルで概要を説明している手順に従います](../tutorials/create-schema-api.md)。
