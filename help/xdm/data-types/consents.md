---
keywords: Experience Platform；プロファイル；リアルタイム顧客プロファイル；トラブルシューティング；API；同意；同意；環境設定；環境設定；privacyOptOuts;marketingPreferences;optOutType;basisOfProcessing；同意；同意
title: 同意および環境設定データタイプ
description: プライバシー、パーソナライゼーション、マーケティング環境設定に対する同意データタイプは、同意管理プラットフォーム（CMP）やその他のソースによってデータ操作から生成された顧客の権限と環境設定の収集をサポートすることを目的としています。
exl-id: cdcc7b04-eeb9-40d3-b0b5-f736a5472621
source-git-commit: b08c6cf12a38f79e019544dea91913a77bd6490a
workflow-type: tm+mt
source-wordcount: '2278'
ht-degree: 1%

---

# [!UICONTROL 同意および環境設定] データタイプ

この [!UICONTROL プライバシー、パーソナライゼーションおよびマーケティング環境設定に関する同意] データタイプ（以下「」）[!UICONTROL 同意および環境設定] データタイプ&quot;）は [!DNL Experience Data Model] （XDM）データ型：データ操作から同意管理プラットフォーム（CMP）やその他のソースによって生成された顧客の権限や環境設定の収集をサポートすることを目的としたデータ型。

このドキュメントでは、が提供するフィールドの構造と使用目的について説明します [!UICONTROL 同意および環境設定] データタイプ。

## 前提条件 {#prerequisites}

このドキュメントでは、XDM と内のスキーマの使用について実際に理解している必要があります [!DNL Experience Platform]. 続行する前に、次のドキュメントを確認してください。

* [XDM システムの概要](https://experienceleague.adobe.com/docs/experience-platform/xdm/home.html?lang=ja)
* [スキーマ構成の基本](https://www.adobe.com/go/xdm-schema-best-practices-en)

## データタイプ構造 {#structure}

>[!IMPORTANT]
>
>この [!UICONTROL 同意および環境設定] データタイプは、様々な同意および環境設定管理のユースケースをカバーするように設計されています。 そのため、このドキュメントでは、データタイプのフィールドの一般的な使用方法を説明し、これらのフィールドの使用方法をどのように解釈するかについての提案のみを行います。 プライバシー法務チームに問い合わせて、データタイプの構造を組織の解釈方法と整合させ、これらの同意と好みの選択を顧客に提示してください。

この [!UICONTROL 同意および環境設定] データタイプには、キャプチャに使用する複数のフィールドが用意されています **同意** および **環境設定** 情報。

同意とは、顧客がデータの使用方法を指定できるオプションです。 同意の多くには法的側面があり、一部の管轄区域では、特定の方法でデータを使用する前に許可を得る必要があります。または、肯定的な同意が必要ない場合は、顧客がその使用（オプトアウト）を停止するオプションを用意する必要があります。

環境設定とは、ブランドでのエクスペリエンスの様々な側面をどのように処理するべきかを顧客が指定できるオプションです。 これらは次の 2 つのカテゴリに分類されます。

* **パーソナライゼーション環境設定**：ブランドが顧客に配信するエクスペリエンスをパーソナライズする方法に関する環境設定。
* **マーケティング環境設定**：ブランドが様々なチャネルを通じて顧客に連絡できるかどうかを指定します。

次のスクリーンショットは、データタイプの構造が Platform UI でどのように表現されるかを示しています。

![](../images/data-types/consents.png)

>[!TIP]
>
>のガイドを参照してください [xdm リソースの調査](../ui/explore.md) xdm リソースを検索し、Platform UI でその構造を検査する手順については、を参照してください。

次の JSON は、 [!UICONTROL 同意および環境設定] データタイプはを処理できます。 これらの各フィールドの具体的な使用方法については、以降の節で説明します。

```json
{
  "consents": {
    "collect": {
      "val": "VI",
    },
    "adID": {
      "idType": "IDFA",
      "val": "y"
    },
    "share": {
      "val": "y",
    },
    "personalize": {
      "content": {
        "val": "y"
      }
    },
    "marketing": {
      "preferred": "email",
      "any": {
        "val": "u"
      },
      "push": {
        "val": "n",
        "reason": "Too Frequent",
        "time": "2019-01-01T15:52:25+00:00"
      }
    },
    "metadata": {
      "time": "2019-01-01T15:52:25+00:00"
    }
  }
}
```

>[!TIP]
>
>顧客の同意データと環境設定データのマッピング方法を視覚化するために、Experience Platformで定義した XDM スキーマのサンプル JSON データを生成できます。 詳しくは、次のドキュメントを参照してください。
>
>* [UI でのサンプルデータの生成](../ui/sample.md)
>* [API でのサンプルデータの生成](../api/sample-data.md)

## `consents` {#choices}

`consents` 顧客の同意および環境設定を説明する複数のフィールドが含まれます。 これらのフィールドについては、以下のサブセクションで詳しく説明します。

```json
"consents": {
  "collect": {
    "val": "VI",
  },
  "adID": {
    "idType": "IDFA",
    "val": "y"
  },
  "share": {
    "val": "y",
  },
  "personalize": {
    "content": {
      "val": "y"
    }
  },
  "marketing": {
    "preferred": "email",
    "any": {
      "val": "u"
    },
    "email": {
      "val": "n",
      "reason": "Too Frequent",
      "time": "2019-01-01T15:52:25+00:00"
    }
  }
}
```

### `collect`

`collect` データを収集することへの顧客の同意を表します。

```json
"collect": {
  "val": "y"
}
```

| プロパティ | 説明 |
| --- | --- |
| `val` | このユースケースでは、お客様から提供された同意の選択肢。 を参照してください。 [付録](#choice-values) 使用できる値および定義。 |

{style="table-layout:auto"}

### `adID`

`adID` 広告主 ID を使用してこのデバイス上のアプリ間で顧客をリンクできるかどうかに関する顧客の同意を表します。

```json
"adID": {
  "idType": "IDFA",
  "val": "y"
}
```

| プロパティ | 説明 |
| --- | --- |
| `idType` | 広告 ID タイプは、 `IDFA` 広告主用のApple ID または `GAID` Googleの広告主 ID （Android 広告主 ID （AAID）とも呼ばれます）。 |
| `val` | このユースケースでは、お客様から提供された同意の選択肢。 を参照してください。 [付録](#choice-values) 使用できる値および定義。 |

{style="table-layout:auto"}

### `share`

`share` 顧客のデータをセカンドパーティまたはサードパーティと共有（またはセカンドパーティに販売）できるかどうかに対する顧客の同意を表します。

```json
"share": {
  "val": "y"
}
```

| プロパティ | 説明 |
| --- | --- |
| `val` | このユースケースでは、お客様から提供された同意の選択肢。 を参照してください。 [付録](#choice-values) 使用できる値および定義。 |

{style="table-layout:auto"}

### `personalize` {#personalize}

`personalize` データをパーソナライゼーションに使用する方法に関するお客様の環境設定をキャプチャします。 顧客は、特定のパーソナライゼーションのユースケースをオプトアウトすることも、パーソナライゼーションを完全にオプトアウトすることもできます。

>[!IMPORTANT]
>
>`personalize` マーケティングユースケースには対応していません。 例えば、顧客がすべてのチャネルのパーソナライゼーションをオプトアウトしている場合、それらのチャネルを通じた通信の受信を停止しないでください。 むしろ、受信するメッセージは一般的で、プロファイルに基づくものであってはなりません。
>
>同じ例で、顧客がすべてのチャネル（経由）でダイレクトマーケティングをオプトアウトしている場合 `marketing`、詳しくは [次のセクション](#marketing)）に設定した場合は、パーソナライゼーションが許可されていても、その顧客はメッセージを受け取りません。

```json
"personalize": {
  "content": {
    "val": "y",
  }
}
```

| プロパティ | 説明 |
| --- | --- |
| `content` | Web サイトまたはアプリケーション上のパーソナライズされたコンテンツに対する顧客の好みを表します。 |
| `val` | 指定したユースケースに対して顧客が指定したパーソナライゼーション環境設定。 顧客に同意を求めるプロンプトを表示する必要がない場合、このフィールドの値は、パーソナライゼーションを行う基準を示す必要があります。 を参照してください。 [付録](#choice-values) 使用できる値および定義。 |

{style="table-layout:auto"}

### `marketing` {#marketing}

`marketing` データを使用できるマーケティング目的に関するお客様の環境設定をキャプチャします。 顧客は、特定のマーケティングのユースケースをオプトアウトすることも、ダイレクトマーケティングを完全にオプトアウトすることもできます。

```json
"marketing": {
  "preferred": "email",
  "any": {
    "val": "u"
  },
  "email": {
    "val": "n",
    "reason": "Too Frequent"
  },
  "push": {
    "val": "y"
  },
  "sms": {
    "val": "y"
  }
}
```

| プロパティ | 説明 |
| --- | --- |
| `preferred` | 通信を受信するための顧客の優先チャネルを示します。 を参照してください。 [付録](#preferred-values) 使用できる値。 |
| `any` | ダイレクトマーケティング全体に対する顧客の好みを表します。 で提供される追加のサブフィールドによって上書きされない限り、このフィールドで指定される同意環境設定は、すべてのマーケティングチャネルの「デフォルト」環境設定と見なされます `marketing`. より詳細な同意オプションを使用する予定がある場合は、このフィールドを除外することをお勧めします。<br><br>値がに設定されている場合 `n`を指定する場合は、より具体的なパーソナライゼーション設定はすべて無視してください。 値がに設定されている場合 `y`の場合、より詳細なパーソナライゼーションオプションもすべて `y`に明示的に設定されていない限り、 `n`. 値を設定していない場合、各パーソナライゼーションオプションの値が指定されたとおりに適用されます。 |
| `email` | 顧客が電子メールメッセージの受信に同意するかどうかを示します。 |
| `push` | 顧客がプッシュ通知の受信を許可しているかどうかを示します。 |
| `sms` | 顧客がテキストメッセージの受信に同意するかどうかを示します。 |
| `val` | 指定したユースケースに対してお客様が指定した環境設定。 顧客に同意の入力を促すプロンプトを表示する必要がない場合、このフィールドの値は、マーケティングユースケースを実行する基準を示す必要があります。 を参照してください。 [付録](#choice-values) 使用できる値および定義。 |
| `time` | マーケティング環境設定が変更された際の ISO 8601 タイムスタンプ（該当する場合）。 個々の環境設定のタイムスタンプが下で指定されたものと同じ場合は注意が必要です `metadata`を選択した場合、このフィールドはその環境設定に対して設定されません。 |
| `reason` | 顧客がマーケティングユースケースをオプトアウトする場合、この文字列フィールドは、顧客がオプトアウトした理由を表します。 |

{style="table-layout:auto"}

### `metadata`

`metadata` 顧客の同意および環境設定に関する一般的なメタデータを、最終更新時に常にキャプチャします。

```json
"metadata": {
  "time": "2019-01-01T15:52:25+00:00",
}
```

| プロパティ | 説明 |
| --- | --- |
| `time` | お客様の同意および環境設定が最後に更新されたときの ISO 8601 タイムスタンプ。 負荷と複雑さを軽減するために、個々の環境設定にタイムスタンプを適用する代わりに、このフィールドを使用できます。 次を提供 `time` 個々の環境設定の下の値は、をオーバーライドします `metadata` 特定の環境設定のタイムスタンプ。 |

{style="table-layout:auto"}

## データタイプを使用したデータの取り込み {#ingest}

を使用するには [!UICONTROL 同意および環境設定] データタイプ顧客から同意データを取り込むには、そのデータタイプを含むスキーマに基づいてデータセットを作成する必要があります。

チュートリアルを参照してください。 [ui でのスキーマの作成](https://www.adobe.com/go/xdm-schema-editor-tutorial-en) フィールドにデータタイプを割り当てる手順については、を参照してください。 を使用したフィールドを含むスキーマを作成したら、 [!UICONTROL 同意および環境設定] データタイプについては、の節を参照してください [データセットの作成](../../catalog/datasets/user-guide.md#create) データセットユーザーガイドでは、既存のスキーマを使用してデータセットを作成する手順に従います。

>[!IMPORTANT]
>
>に同意データを送信する場合 [!DNL Real-Time Customer Profile]を作成する必要があります。 [!DNL Profile]に基づいた、対応スキーマ [!DNL XDM Individual Profile] を含むクラス [!UICONTROL 同意および環境設定] データタイプ。 そのスキーマに基づいて作成するデータセットも、用に有効にする必要があります [!DNL Profile]. に関連する特定の手順については、上記にリンクされたチュートリアルを参照してください [!DNL Real-Time Customer Profile] スキーマおよびデータセットの要件。
>
>また、顧客プロファイルを正しく更新するには、最新の同意データと環境設定データを含むデータセットに優先順位を付けるように結合ポリシーが設定されていることを確認する必要があります。 概要を参照してください [結合ポリシー](../../rtcdp/profile/merge-policies.md) を参照してください。

## 同意および環境設定の変更の処理

顧客が web サイトに対する同意や環境設定を変更した場合は、その変更を収集し、を使用して直ちに適用する必要があります [Adobe Experience Platform Web SDK](../../web-sdk/commands/setconsent.md). お客様がデータ収集をオプトアウトした場合、すべてのデータ収集は直ちに停止する必要があります。 顧客がパーソナライゼーションをオプトアウトする場合、訪問する次のページにはパーソナライゼーションが存在しないはずです。

## 付録 {#appendix}

以下のセクションでは、に関する追加情報を提供します [!UICONTROL 同意および環境設定] データタイプ。

### `val` の許容値 {#choice-values}

次の表に、の許容値を示します `val`:

| 値 | タイトル | 説明 |
| --- | --- | --- |
| `y` | はい（オプトイン） | 顧客が同意または好みに対してオプトインした。 つまり、 **実行** 当該の同意または好みによって示されたデータの使用に同意すること。 |
| `n` | いいえ（オプトアウト） | お客様が同意または好みをオプトアウトしている。 つまり、 **実行しない** 当該の同意または好みによって示されたデータの使用に同意すること。 |
| `p` | 確認待ち | システムはまだ最終的な同意または優先順位値を受け取っていません。 これは、2 段階認証を必要とする同意の一部として最もよく使用されます。 例えば、顧客がメールの受信をオプトインした場合、その同意は次のように設定されます。 `p` メール内のリンクを選択して、正しいメールアドレスが指定されたことを確認するまでは、同意は次のように更新されます。 `y`.<br><br>この同意または環境設定で 2 段階の検証プロセスが使用されない場合は、 `p` 代わりに、顧客が同意プロンプトにまだ応答していないことを示すために、を使用することもできます。 例えば、自動的に値をに設定できます `p` web サイトの最初のページで、顧客が同意プロンプトに応答する前。 明示的な同意を必要としない法域では、顧客が明示的にオプトアウトしていない（つまり、同意が想定されている）ことを示すために使用する場合もあります。 |
| `u` | 不明 | 顧客の同意または好みの情報が不明です。 |
| `dy` | デフォルトは「はい」（オプトイン） | 顧客が自身で同意値を指定しておらず、デフォルトではオプトイン（「はい」）として扱われます。 つまり、顧客が別の指定をしない限り、同意が想定されます。<br><br>法律や会社のプライバシーポリシーの変更により、一部またはすべてのユーザーのデフォルトが変更される場合は、デフォルト値を含むすべてのプロファイルを手動で更新する必要があります。 |
| `dn` | デフォルトの「いいえ」（オプトアウト） | 顧客が自身で同意値を指定しておらず、デフォルトではオプトアウトとして扱われます（「いいえ」）。 つまり、お客様が同意を拒否した場合は、その旨を明示するまでは、同意を拒否したものと見なされます。<br><br>法律や会社のプライバシーポリシーの変更により、一部またはすべてのユーザーのデフォルトが変更される場合は、デフォルト値を含むすべてのプロファイルを手動で更新する必要があります。 |
| `LI` | 正当な利益 | 特定目的のためにこのデータを収集して処理する正当なビジネス上の利益は、個人に与える潜在的な害を上回ります。 |
| `CT` | 契約 | 特定の目的のためのデータの収集は、個人との契約上の義務を満たすために必要です。 |
| `CP` | 法的義務の遵守 | 特定目的のためのデータの収集は、ビジネスの法的義務を満たすために必要です。 |
| `VI` | 個人の極めて重要な関心 | 特定目的のデータ収集は、個人の重要な利益を保護するために必要です。 |
| `PI` | 公共の利益 | 特定の目的のためのデータの収集は、公共の利益または公権力の行使のタスクを実行するために必要です。 |

{style="table-layout:auto"}

### `preferred` の許容値 {#preferred-values}

次の表に、の許容値を示します `preferred`. この `preferred` 値は、データ収集、プライバシーポリシー、パーソナライゼーションオプションに関する情報を顧客に提供する、顧客の通信の優先チャネルを示します。

| 値 | 説明 |
| --- | --- |
| `email` | この環境設定は、メールでメッセージを受信することに対する顧客の同意を示します。 |
| `push` | この環境設定は、プッシュ通知を受信する顧客の同意を示します。 これらは、デバイス（多くの場合、モバイルアプリケーション）に直接送信されるメッセージまたはアラートです。 |
| `inApp` | この環境設定は、アプリ内メッセージを受信することに対する顧客の同意を示します。 これらのメッセージは、モバイルまたは web アプリケーション内で配信され、ユーザーがアプリに積極的に関与している間に情報を提供します。 |
| `sms` | この環境設定は、SMS （ショートメッセージサービス）を介してメッセージを受信することに対する顧客の同意を示します。 これらは、携帯電話に送信されるテキストメッセージです。 |
| `phone` | この環境設定は、電話でのインタラクションを通じて通信を受信することに対する顧客の同意を示します。 |
| `phyMail` | この環境設定は、物理的な郵便で資料を受け取ることに対するお客様の同意を示します。 |
| `inVehicle` | この環境設定は、車内で通知を受け取ることに対する顧客の同意を示します。 これらのメッセージは、車両インフォテインメントシステムやその他の車載通信チャネルを通じて配信される場合があります。 |
| `inHome` | この環境設定は、顧客が自宅でメッセージを受信することに同意していることを示します。 これらのメッセージは、スマートホームデバイスやその他のホームベースの通信チャネルを介して配信される場合があります。 |
| `iot` | この環境設定は、モノのインターネット（IoT）に関連するメッセージを受信することへの顧客の同意を表します。 これらのメッセージは、環境内の接続されたデバイスやシステムを介して配信される場合があります。 |
| `social` | この環境設定は、ソーシャルメディアプラットフォームを通じて通信を受信することに対する顧客の同意を示します。 |
| `other` | この環境設定には、標準カテゴリに当てはまらないチャネルが含まれます。 特定のビジネスや業界に固有の代替または特殊なコミュニケーションチャネルを表します。 |
| `none` | この環境設定は、顧客が優先通信チャネルを持っていないことを示しています。 |
| `unknown` | この環境設定は、顧客の優先通信チャネルが不明であるか、指定されていないことを示します。 これは、顧客が明示的な同意や好みの情報を提供していない場合に発生する可能性があります。 |

{style="table-layout:auto"}

### フル [!UICONTROL 同意および環境設定] スキーマ {#full-schema}

の完全なスキーマを表示するには [!UICONTROL 同意および環境設定] データタイプ。を参照してください。 [公式 XDM リポジトリ](https://github.com/adobe/xdm/blob/master/components/datatypes/consent/consent-preferences.schema.json).
