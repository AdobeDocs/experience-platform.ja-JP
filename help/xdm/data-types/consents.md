---
keywords: Experience Platform;profile;real-time customer profile;troubleshooting;API;consent;Consent;preferences;Preferences;privacyOptOuts;marketingPreferences;optOutType;basisOfProcessing;consent;Consent
title: Consents & Preferencesデータタイプ
description: 「プライバシー/マーケティングの環境設定（同意）」データ型は、データ操作から、Consent Management Platforms(CMP)や他のソースによって生成される顧客の権限や好みの収集をサポートすることを目的としています。
topic: guide
translation-type: tm+mt
source-git-commit: 640f0be8a297fada0eee10ff80fec3b3142c09b9
workflow-type: tm+mt
source-wordcount: '2022'
ht-degree: 1%

---


# [!DNL Consents & Preferences] データ型

データ型(以下「 [!DNL Privacy/Marketing Preferences (Consent)] データ型」と呼ばれる)は、[!DNL Consents & Preferences][!DNL Experience Data Model] (XDM)データ型で、Consent Management Platforms(CMP)やデータ操作から生成されるその他のソースによって生成される顧客の権限や好みの収集をサポートすることを目的としています。

このドキュメントでは、データ型が提供するフィールドの構造と使用目的について説明し [!DNL Consents & Preferences] ます。

## 前提条件 {#prerequisites}

このドキュメントでは、XDMとのスキーマの使用に関する十分な理解が必要 [!DNL Experience Platform]です。 先に進む前に、次のドキュメントを確認してください。

* [XDM システムの概要](http://www.adobe.com/go/xdm-home-en)
* [スキーマ構成の基本](http://www.adobe.com/go/xdm-schema-best-practices-en)

## データタイプの構造 {#structure}

>[!IMPORTANT]
>
>この [!DNL Consents & Preferences] データ型は、同意および優先管理の様々な使用例を対象とするように設計されています。 その結果、このドキュメントでは、データ型のフィールドの一般的な使用方法について説明し、これらのフィールドの使用をどのように解釈すべきかについての提案のみを行います。 データタイプの構造と、組織がこれらの同意や好みの選択をどのように解釈し、顧客に提示するかを調整するには、プライバシー法務チームにお問い合わせください。

データタイプは、同意と [!DNL Consents & Preferences] 優先 ******** 情報を取り込むために使用されるいくつかのフィールドを提供します。

同意とは、顧客が自分のデータの使用方法を指定できるオプションです。 ほとんどの同意は法的側面を持ちます。管轄区域によっては、特定の方法でデータを使用する前に許可を取得する必要がある場合や、肯定的な同意が必要でない場合は、その使用を停止するオプション(オプトアウト)を持つ必要がある場合があります。

プリファレンスとは、ブランドに関するエクスペリエンスの様々な側面を顧客がどのように扱うべきかを指定できるオプションです。 これらは2つのカテゴリ内にあります。

* **個人設定の環境設定**:ブランドが顧客に提供するエクスペリエンスをパーソナライズする方法に関する環境設定。
* **マーケティングの環境設定**:様々なチャネルを通じてブランドが顧客との接触を許可されるかどうかに関するプレファレンス。

次のJSONは、データ型が処理できるデータのタイプの例を示してい [!DNL Consents & Preferences] ます。 各フィールドの具体的な使用方法については、以降の節で説明します。

```json
{
  "xdm:consents": {
    "xdm:collect": {
      "xdm:val": "y",
    },
    "xdm:adID": {
      "xdm:val": "VI"
    },
    "xdm:share": {
      "xdm:val": "y",
    },
    "xdm:personalize": {
      "xdm:any": {
        "xdm:val": "y",
      },
      "xdm:content": {
        "xdm:val": "y"
      }
    },
    "xdm:marketing": {
      "xdm:preferred": "email",
      "xdm:any": {
        "xdm:val": "u"
      },
      "xdm:push": {
        "xdm:val": "n",
        "xdm:reason": "Too Frequent",
        "xdm:time": "2019-01-01T15:52:25+00:00"
      }
    },
    "xdm:idSpecific": {
      "email": {
        "jdoe@example.com": {
          "xdm:marketing": {
            "xdm:email": {
              "xdm:val": "n"
            }
          }
        }
      }
    }
  },
  "xdm:metadata": {
    "xdm:time": "2019-01-01T15:52:25+00:00"
  }
}
```

>[!NOTE]
>
>上の例は、データ型を介して送信されるデータの構造を示すためのもので、データ型が提供する主なフィールドについて説明するこのドキュメントの残りの部分にコンテキストを与えるためのものです。 [!DNL Platform][!DNL Consents & Preferences] データ型の構造の完全なスキーマは、 [付録](#full-schema) 「参照用」に記載されています。

## xdm:consents {#choices}

`xdm:consents` には、顧客の同意と環境設定を説明する複数のフィールドが含まれています。 これらのフィールドについて詳しくは、以下のサブセクションを参照してください。

```json
"xdm:consents": {
  "xdm:collect": {
    "xdm:val": "y",
  },
  "xdm:adID": {
    "xdm:val": "VI"
  },
  "xdm:share": {
    "xdm:val": "y",
  },
  "xdm:personalize": {
    "xdm:any": {
      "xdm:val": "y",
    },
    "xdm:content": {
      "xdm:val": "y"
    }
  },
  "xdm:marketing": {
    "xdm:preferred": "email",
    "xdm:any": {
      "xdm:val": "u"
    },
    "xdm:email": {
      "xdm:val": "n",
      "xdm:reason": "Too Frequent",
      "xdm:time": "2019-01-01T15:52:25+00:00"
    }
  }
}
```

### xdm:collect

`xdm:collect` は、顧客がデータを収集することに同意したことを表します。

```json
"xdm:collect" : {
  "xdm:val": "y"
}
```

| プロパティ | 説明 |
| --- | --- |
| `xdm:val` | この使用事例に対するお客様提供の同意の選択。 使用できる値と定義については、 [付録](#choice-values) を参照してください。 |

### xdm:adID

`xdm:adID` は、広告主ID（IDFAまたはGAID）を使用して、このデバイス上のアプリ間で顧客をリンクできるかどうかに関する顧客の同意を表します。

```json
"xdm:adID" : {
  "xdm:val": "y"
}
```

| プロパティ | 説明 |
| --- | --- |
| `xdm:val` | この使用事例に対するお客様提供の同意の選択。 使用できる値と定義については、 [付録](#choice-values) を参照してください。 |

### xdm:share

`xdm:share` は、自社のデータを第2のパーティと共有（または第3のパーティと共有）できるか（または販売できるか）に関する顧客の同意を表します。

```json
"xdm:share" : {
  "xdm:val": "y"
}
```

| プロパティ | 説明 |
| --- | --- |
| `xdm:val` | この使用事例に対するお客様提供の同意の選択。 使用できる値と定義については、 [付録](#choice-values) を参照してください。 |

### xdm:personalize {#personalize}

`xdm:personalize` データをどのようにパーソナライズに使用できるかに関する顧客の環境設定を取得します。 お客様は、特定オプトアウトのパーソナライゼーションの使用例を使用することも、パーソナライゼーションを完全オプトアウトに使用することもできます。

>[!IMPORTANT]
>
>`xdm:personalize` マーケティングの使用例は説明していません。 例えば、すべてのチャネルに対してパーソナライゼーションをオプトアウトした場合、それらのチャネルを通じた通信の受信を停止しないでください。 その代わりに、メッセージの受信はプロファイルに基づくのではなく、汎用的なものにする必要があります。
>
>同じ例で、すべてのチャネル( `xdm:marketing`次の節で説明する「経由」 [を参照](#marketing))のダイレクトマーケティングをオプトアウトした場合、パーソナライゼーションが許可されていても、その顧客はメッセージを受け取ってはなりません。

```json
"xdm:personalize": {
  "xdm:content": {
    "xdm:val": "y",
  }
}
```

| プロパティ | 説明 |
| --- | --- |
| `xdm:content` | Webサイトやアプリケーション上でパーソナライズされたコンテンツを提供する、ユーザーの環境設定を表します。 |
| `xdm:val` | 指定した使用例に対する顧客が提供するパーソナライゼーション設定です。 顧客が同意を求められない場合は、このフィールドの値は、パーソナライゼーションを実行する基準を示す必要があります。 使用できる値と定義については、 [付録](#choice-values) を参照してください。 |

### xdm:marketing {#marketing}

`xdm:marketing` データを使用できるマーケティング目的に関する顧客の判断基準を取り込みます。 特定オプトアウトのマーケティングの使用例や、完全なダイレクトマーケティングオプトアウトのお客様が考えられます。

```json
"xdm:marketing": {
  "xdm:preferred": "email",
  "xdm:any": {
    "xdm:val": "u"
  },
  "xdm:email": {
    "xdm:val": "n",
    "xdm:reason": "Too Frequent"
  },
  "xdm:push": {
    "xdm:val": "y"
  },
  "xdm:sms": {
    "xdm:val": "y"
  }
}
```

| プロパティ | 説明 |
| --- | --- |
| `xdm:preferred` | 顧客が好む通信チャネルを示します。 使用できる値については、 [付録](#preferred-values) を参照してください。 |
| `xdm:any` | ダイレクトマーケティング全体に対する顧客の好みを表します。 このフィールドに指定する同意の優先順位は、で提供される追加のサブフィールドによって上書きされない限り、すべてのマーケティングチャネルに対して「デフォルト」の優先順位と見なされ `xdm:marketing`ます。 より詳細な同意オプションを使用する場合は、このフィールドを除外することをお勧めします。<br><br>この値をに設定した場合 `n`、それ以上の個別設定は無視する必要があります。 この値をに設定した場合 `y`、に明示的に設定しない限り、すべての詳細なパーソナライゼーションオプションも、 `y`として扱われ `n`ます。 値が設定されていない場合は、個々のパーソナライゼーションオプションの値を指定どおりに扱う必要があります。 |
| `xdm:email` | 顧客が電子メールメッセージの受信に同意するかどうかを示します。 |
| `xdm:push` | ユーザーがプッシュ通知の受信を許可しているかどうかを示します。 |
| `xdm:sms` | ユーザーがテキストメッセージの受信に同意するかどうかを示します。 |
| `xdm:val` | 指定した使用例に対する顧客が指定した基本設定です。 顧客が同意を促すように促す必要がない場合は、このフィールドの値はマーケティング使用事例の発生基準を示す必要があります。 使用できる値と定義については、 [付録](#choice-values) を参照してください。 |
| `xdm:time` | マーケティング環境設定が変更された時のISO 8601タイムスタンプ（該当する場合）。 個々の環境設定のタイムスタンプが、で指定したタイムスタンプと同じ場合 `xdm:metadata`、その環境設定に対してこのフィールドは設定されません。 |
| `xdm:reason` | 顧客がマーケティングの使用事例からオプトアウトした場合、この文字列フィールドは、顧客がオプトアウトした理由を表します。 |

### xdm:idSpecific

`xdm:idSpecific` は、特定の同意または優先度が顧客に広く適用されるわけではなく、単一のデバイスまたはIDに限定される場合に使用できます。 例えば、顧客はあるアドレス宛てオプトアウトの電子メールを受信できる一方、別のアドレス宛ての電子メールを受信できる可能性があります。

>[!IMPORTANT]
>
>チャネルレベルの同意および環境設定(「以 `xdm:consents` 外」で提供される承諾 `xdm:idSpecific`)は、そのチャネル内のIDに適用されます。 したがって、チャネルレベルの同意事項や環境設定は、同等のIDやデバイス固有の設定が適用されるかどうかに関わらず、直接影響を受けます。
>
>* 顧客がチャネルレベルでオプトアウトした場合、にある同等の同意またはプリファレンスは無視 `xdm:idSpecific` されます。
>* チャネルレベルの同意または優先度が設定されていない場合、または顧客がオプトインした場合は、の同等の同意または優先度が使用 `xdm:idSpecific` されます。


オブジェクト内の各キーは、Adobe Experience PlatformIDサービスで認識される特定のID名前空間を表し `xdm:idSpecific` ます。 様々なIDを分類する独自のカスタム名前空間を定義できますが、リアルタイム顧客プロファイルのストレージサイズを小さくするために、Identity Serviceが提供する標準名前空間の1つを使用することをお勧めします。 ID名前空間について詳しくは、「IDサービスドキュメント [」の「](../../identity-service/namespaces.md) ID名前空間の概要」を参照してください。

各名前空間オブジェクトのキーは、ユーザーが環境設定を行った一意のID値を表します。 各ID値には、と同じ形式の完全な同意と環境設定を含めることができ `xdm:consents`ます。

```json
"xdm:idSpecific": {
  "email": {
    "jdoe@example.com": {
      "xdm:marketing": {
        "xdm:email": {
          "xdm:val": "n"
        }
      }
    }
  }
}
```

## xdm:metadata

`xdm:metadata` 顧客の同意と環境設定が最後に更新されたときに、その同意に関する一般的なメタデータを取り込みます。

```json
"xdm:metadata": {
  "xdm:time": "2019-01-01T15:52:25+00:00",
}
```

| プロパティ | 説明 |
| --- | --- |
| `xdm:time` | 顧客の同意および環境設定が最後に更新された時のタイムスタンプ。 読み込みと複雑さを軽減するために、個々の環境設定にタイムスタンプを適用する代わりに、このフィールドを使用できます。 個々の環境設定で値を指定すると、その環境設定の `xdm:time``xdm:metadata` タイムスタンプが上書きされます。 |

## データ型を使用したデータの取り込み {#ingest}

顧客の同意データを取り込むために [!DNL Consents & Preferences] データ型を使用するには、そのデータ型を含むスキーマに基づいてデータセットを作成する必要があります。

フィールドにデータタイプを割り当てる手順については、UIでの [スキーマの](http://www.adobe.com/go/xdm-schema-editor-tutorial-en) 作成に関するチュートリアルを参照してください。 データタイプが指定されたフィールドを含むスキーマーを作成したら、既存のスキーマーでデータセットを作成する手順に従い、『データセット [!DNL Consents & Preferences] 』ユーザーガイドのデータセットの [](../../catalog/datasets/user-guide.md#create) 作成に関する節を参照してください。

>[!IMPORTANT]
>
>同意データをに送信する場合 [!DNL Real-time Customer Profile]は、 [!DNL Profile]データタイプを含むクラスに基づいて、 [!DNL XDM Individual Profile] 有効なスキーマを作成する必要があり [!DNL Consents & Preferences] ます。 そのスキーマに基づいて作成したデータセットも有効にする必要があり [!DNL Profile]ます。 スキーマとデータセットの [!DNL Real-time Customer Profile] 要件に関する具体的な手順については、上記のリンクを含むチュートリアルを参照してください。
>
>また、顧客プロファイルを正しく更新するために、最新の同意データと優先データを含むデータセットに優先順位を付けるようにマージポリシーを設定する必要もあります。 See the overview on [merge policies](../../rtcdp/profile/merge-policies.md) for more information.

## 同意と優先順位の変更の処理

お客様がWebサイトでの同意や環境設定を変更した場合は、 [Adobe Experience PlatformWeb SDKを使用して変更を収集し、すぐに適用する必要があります](../../edge/consent/supporting-consent.md)。 顧客がデータ収集をオプトアウトした場合、すべてのデータ収集は直ちに停止する必要があります。 顧客がパーソナライゼーションをオプトアウトした場合、訪問者が次のページにパーソナライゼーションを表示しないでください。

## 付録 {#appendix}

以下の節では、 [!DNL Consents & Preferences] データタイプに関する追加の参照情報を示します。

### xdm:valに指定できる値 {#choice-values}

次の表に、使用できる値の概要を示し `xdm:val`ます。

| 値 | タイトル | 説明 |
| --- | --- | --- |
| `y` | ○ | 顧客が同意または優先を選択しました。 言い換えると、本人 **は** 、本件の同意または好みで示されるデータの使用に同意します。 |
| `n` | × | 顧客が同意または好みをオプトアウトしました。 つまり、本人 **は** 、本件の同意または嗜好に示されるデータの使用に同意しない。 |
| `p` | 検証待ち | システムは、最終同意または優先度の値をまだ受け取っていません。 これは、2段階の検証が必要な同意の一部として最もよく使用されます。 例えば、顧客が電子メールの受信を希望する場合、その同意は、顧客が電子メール内のリンクを選択して正しい電子メールアドレスを入力したことを確認するまでは、に設定され、その時点で同意が更新され `p``y`ます。<br><br>この同意または優先順位で2つのセットによる検証プロセスを使用しない場合は、代わりに `p` 選択肢を使用して、顧客が同意プロンプトにまだ応答していないことを示すことができます。 例えば、顧客が同意プロンプトに応答する前に、Webサイト `p` の最初のページの値を自動的ににに設定できます。 明示的な同意を必要としない管轄区域では、顧客が明示的にオプトアウトしないことを示す（つまり、同意が前提となる）場合にも使用できます。 |
| `u` | Unknown | 顧客の同意または嗜好情報が不明です。 |
| `LI` | 正当な利益 | 特定の目的でこのデータを収集して処理する正当なビジネス上の関心事は、個人に与える潜在的な損害を上回ります。 |
| `CT` | 契約 | 特定の目的に応じたデータの収集は、個人との契約上の義務を満たすために必要です。 |
| `CP` | 法的義務の遵守 | 特定の目的に対するデータの収集は、ビジネスの法的義務を満たすために必要です。 |
| `VI` | 個人の極めて重要な関心 | 特定の目的に合わせたデータの収集は、個人の重要な利益を保護するために必要です。 |
| `PI` | 公益 | 特定の目的に係るデータの収集は、公益上のタスク又は職権の行使上の行為に必要とされる。 |

### xdmに指定できる値：優先 {#preferred-values}

次の表に、使用できる値の概要を示し `xdm:preferred`ます。

| 値 | 説明 |
| --- | --- |
| `email` | 電子メールメッセージ。 |
| `push` | プッシュ通知. |
| `inApp` | アプリ内メッセージ. |
| `sms` | SMSメッセージ。 |
| `phone` | 電話のインタラクション数。 |
| `phyMail` | 物理的なメール。 |
| `inVehicle` | 車内メッセージ。 |
| `inHome` | ホームメッセージ。 |
| `iot` | インターネット(IoT)メッセージ。 |
| `social` | ソーシャルメディアコンテンツ。 |
| `other` | 標準のカテゴリに適合しないチャネルです。 |
| `none` | 優先するチャネルはありません。 |
| `unknown` | 優先チャネルが不明です。 |

### フル [!DNL Consents & Preferences] スキーマ {#full-schema}

データ型の完全なスキーマを表示するには、 [!DNL Consents & Preferences][正式なXDMリポジトリを参照してください](https://github.com/adobe/xdm/blob/master/components/datatypes/consent-preferences.schema.json)。