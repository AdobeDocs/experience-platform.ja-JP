---
solution: Experience Platform
title: Experience Platformダッシュボードを支える未加工データセットの調査と処理
type: Documentation
description: クエリサービスを使用して、プロファイル、セグメント、宛先ダッシュボードを機能させる生のデータセットを調査し、処理する方法をExperience Platformで説明します。
source-git-commit: 1facf7079213918c2ef966b704319827eaa4a53d
workflow-type: tm+mt
source-wordcount: '614'
ht-degree: 1%

---


# クエリサービスを使用したダッシュボードデータセットの調査、検証、処理

Adobe Experience Platformは、Experience PlatformUI内で使用可能なダッシュボードを通じて、組織のプロファイル、セグメント、宛先データに関する重要な情報を提供します。 その後、Adobe Experience Platformクエリサービスを使用して、データレイクでこれらのダッシュボードに機能する未加工のデータセットを調査、検証、処理できます。

## クエリサービスの概要

Adobe Experience Platformクエリサービスは、標準のSQLを使用してデータレイクのデータをクエリできるようにすることで、マーケターがデータからのインサイトを得るのをサポートします。 クエリサービスは、データレイク内の任意のデータセットを結合し、クエリ結果を新しいデータセットとして取り込み、レポート、機械学習、リアルタイム顧客プロファイルへの取り込みに使用できるユーザーインターフェイスとAPIを提供します。

クエリサービスとExperience Platform内での役割について詳しくは、まず「[クエリサービスの概要](../query-service/home.md)」をお読みください。

## 使用可能なデータセット

クエリサービスを使用して、プロファイル、セグメント、宛先の各ダッシュボードに対して生のデータセットをクエリできます。 次の節では、データレイクで見つけられる生のデータセットについて説明します。

### プロファイル属性データセット

リアルタイム顧客プロファイルのアクティブな結合ポリシーごとに、データレイクで使用できるプロファイル属性データセットがあります。

これらのデータセットの命名規則は、**プロファイル属性**&#x200B;の後に英数字の値が続きます。 例：`Profile Attribute 14adf268-2a20-4dee-bee6-a6b0e34616a9`

各データセットの完全なスキーマを理解するには、Experience PlatformUIのデータセットビューアを使用して、データセットをプレビューし、調査します。

### セグメントメタデータデータセット

組織の各セグメントのメタデータを含むデータレイクで使用できるセグメントメタデータデータセットがあります。

このデータセットの命名規則は、**プロファイルセグメント定義**&#x200B;の後に英数字の値が続きます。 例：`Profile Segment Definition 6591ba8f-1422-499d-822a-543b2f7613a3`

データセットの完全なスキーマを理解するには、Experience PlatformUIのデータセットビューアを使用して、スキーマをプレビューし、調査します。

![](images/query/segment-metadata.png)

### 宛先メタデータデータセット

組織でアクティブ化されたすべての宛先のメタデータは、データレイクで生のデータセットとして使用できます。

このデータセットの命名規則は&#x200B;**DIM_Destination**&#x200B;です。

データセットの完全なスキーマを理解するには、Experience PlatformUIのデータセットビューアを使用して、スキーマをプレビューし、調査します。

![](images/query/destinations-metadata.png)

## クエリの例

次のクエリ例には、ダッシュボードの機能を備えた生のデータセットを調査、検証、処理するためにクエリサービスで使用できるSQLのサンプルが含まれています。

### ID別プロファイル数

このプロファイルインサイトは、データセット内のすべての結合プロファイルにわたってIDの分類を提供します。 1つのプロファイルに複数の名前空間が関連付けられている可能性があるので、ID別のプロファイルの合計数（つまり、各名前空間に表示される値をまとめたもの）は、結合されたプロファイルの合計数より多くなる場合があります。 例えば、顧客が複数のチャネルでブランドとやり取りする場合、複数の名前空間がその個々の顧客に関連付けられます。

**クエリ**

```sql
Select
        Key namespace,
        count(1) count_of_profiles
     from
        (
           Select
               explode(identitymap)
           from
              profile_attribute_14adf268-2a20-4dee-bee6-a6b0e34616a9
        )
     group by
        namespace;
```

### セグメント別のプロファイルの数

このオーディエンスインサイトは、データセット内の各セグメント内の結合プロファイルの合計数を提供します。 この数は、プロファイルフラグメントを結合してセグメント内の個々の個々のプロファイルを1つ形成するために、セグメント結合ポリシーをプロファイルデータに適用した結果です。

```sql
Select          
        concat_ws('-', key, source_namespace) segment_id,
        count(1) count_of_profiles
      from
        (
            Select
              Upper(key) as source_namespace,
              explode(value)
            from
              (
                  Select
                    explode(Segmentmembership)
                  from
                    profile_attribute_14adf268-2a20-4dee-bee6-a6b0e34616a9
              )
        )
      group by
      segment_id
```

## 次の手順

このガイドを読むと、クエリサービスを使用して、プロファイル、セグメント、宛先の各ダッシュボードを動作させる生のデータセットを調査および処理するためのクエリを実行できます。

各ダッシュボードとその指標について詳しくは、ドキュメントナビゲーションで利用可能なダッシュボードのリストからダッシュボードを選択してください。
